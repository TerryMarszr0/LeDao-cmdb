// www.hightopo.com - ht for web
!function(N,e,Q){"use strict";var j="ht";if(!N[j]){!function(){for(var Y=0,v=["ms","moz","webkit","o"],D=0;D<v.length&&!N.requestAnimationFrame;++D)N.requestAnimationFrame=N[v[D]+"RequestAnimationFrame"],N.cancelAnimationFrame=N[v[D]+"CancelAnimationFrame"]||N[v[D]+"CancelRequestAnimationFrame"];N.requestAnimationFrame||(N.requestAnimationFrame=function(y){var w=(new Date).getTime(),J=Math.max(0,16-(w-Y)),T=N.setTimeout(function(){y(w+J)},J);return Y=w+J,T}),N.cancelAnimationFrame||(N.cancelAnimationFrame=function(N){$(N)})}();var I,o,A,c,J=N.document,L=null,G=N[j]={},P=N[j+"config"],y=G.Default=P&&P.Default||{},H=G.Style=P&&P.Style||{},z=G.Color=P&&P.Color||{},m=G.IsGetter=P&&P.IsGetter||{},W=Math,u=W.round,s=W.floor,k=W.ceil,w=W.sqrt,q=W.max,g=W.min,Z=W.abs,n=W.cos,X=W.acos,l=W.sin,b=W.pow,M=W.asin,p=W.PI,O=2*p,B=p/2,Y=W.tan,V=W.atan2,f=W.random,T=N.parseInt||global.parseInt,i="2015-10-01",K=function(Z){return Z*Z},x=N.setTimeout,$=N.clearTimeout,r=N.navigator?N.navigator.userAgent.toLowerCase():"",h=function(M){return M.test(r)},C=h(/msie/)||h(/trident/),v=h(/msie 10/),D=h(/firefox/),U=h(/mac/),E=y.isTouchable===Q?J?"ontouchend"in J:!1:y.isTouchable,a="default",R="single",F="multiple",t="front",_="back",d="left",S="right",Tg="top",Po="bottom",qs="center",mq="eye",yc="middle",Bk="east",Kj="west",xo="north",om="none",Lo="px",Dr="absolute",ve="border",Pe="triangle",rp="rect",Oq="circle",ji="cylinder",sq="shape",ye="items",Er="normal",Qd="remove",nh="clear",Qo="width",Te="height",Vp="ingroup",Ci="check",Vq="uncheck",$i="radio",yh="radioOn",kb="radioOff",sn="points",Xk="values",ns="series",km="body",zm="label",uf="label2",rb="note",Og="note2",ij="icons",oo="labelFont",An="labelColor",Uf="labelSelectColor",Mq="note.expanded",ai="note2.expanded",sr="edge.expanded",Vl="edge.points",$n="edge.type",gf="rotation",Ph="getRotation",gh="setRotation",vg="hidden",Qi="visible",Ao="tuv",id="no",yb="select",ch="currentSubGraph",_g="selectBackground",Nl="autoMakeVisible",Hg="autoHideScrollBar",Cr="scrollBarColor",Bm="scrollBarSize",Qk="indent",pn="rowHeight",Ig="columnLineColor",vm="rowLineColor",Ge="columnLineVisible",De="rowLineVisible",iq="visibleFunc",hn="expandIcon",ii="collapseIcon",Dd="checkMode",So="sortFunc",Sb="editable",Do="batchEditable",Cs="tristate",Zf="asc",zq="desc",hm="position",Yb="elevation",yf="children",Lm="translateX",En="translateY",Ck="dataModel",pi="shape3d",Nd="shape3d.resolution",Mp="shape3d.visible",Qh="shape3d.from.visible",Qg="shape3d.to.visible",Ve="shape3d.top.visible",Qc="shape3d.bottom.visible",Gl="repeat.uv.length",Co="serializeValue",to="deserializeValue",Ko="centerUniform",lq="rgba(255,255,255,0)",Zj="style",Ic="attr",Fh="field",pp="string",kf="boolean",Nc="color",rh="int",Lf="number",Rd="ew-resize",Ij="ns-resize",ak="pointer",Cj="auto",Vn="mousedown",ts="mousemove",qg="mouseup",Jb="mouseout",kd="touchstart",Ji="touchmove",ff="touchend",dl="keydown",zj="keyup",vj=D?"DOMMouseScroll":"mousewheel",ud=E?[kd,Ji,ff]:[dl,zj,Vn,ts,qg,Jb,vj,"contextmenu"],ci=L,Ap=L,Sp=L,np=qg.length,Go=function(){Sp&&($(Sp.timeout),Sp=L)},Uj=function(){Sp&&Xe(Sp.e,Sp.info)};N.addEventListener&&(E||(N.addEventListener(Jb,function(){Go()},!1),N.addEventListener(vj,function(){ec()},!1)),N.addEventListener(zj,function(W){91===W.keyCode?Mh={}:delete Mh[W.keyCode]},!0),N.addEventListener(dl,function(u){Mh[u.keyCode]=!0},!0));var lj,ep,kc,qh=!1,wd=L,Yp=L,af={},aj={},ub={},jk={},fi={},Mh={},be={},Ep={},Ze={},Vd=[],Wr={},ss=L,Ar=L,lh=function(){},wg=function(){throw"Oops!"},Bi=[0,0,0],gc=[0,0,0,0],Mb={x:0,y:0,width:0,height:0},od=L,Rj=L,pe=L,Ib=function(J){Rj&&!J._72O&&(pe||(pe={}),pe[J._72O=Ql()]=J),lj!=L?tb()<.05&&c&&!ep&&(mk=Go):mk=Zk},Jm=function(s,m,k,A){Rj||(Rj={});var Y=Rj[s];if(Y){if(Y.url===m)return;Y.image.onload=lh,Y.image.onerror=lh}var R=new Image;Rj[s]={image:R,url:m},R.onload=function(){k&&(R.width=k),A&&(R.height=A),y.handleImageLoaded(s,R),Oc(s,R)},R.onerror=function(){Oc(s,y.handleUnfoundImage(s,m)||L)},R.src=m},Oc=function($,w){if(aj[$]=w,delete Rj[$],Jo(Rj)&&(Rj=L,pe)){for(var m in pe){var R=pe[m];R.invalidateAll&&R.invalidateAll(),R.redraw&&R.redraw(),R.iv(),delete R._72O}pe=L}if(w&&pe)for(var m in pe){var R=pe[m];R.invalidateAll&&R.invalidateAll(),R.redraw&&R.redraw(),R.iv()}},xp=function(){return N.performance&&N.performance.now?N.performance.now():Date.now()},hg=function(A,T){T?$(A):N.cancelAnimationFrame(A)},_l=function(h,W,w){return{width:h,height:W,comps:pr(w)?w:[w]}},ap=function(W,C){return{type:Oq,rect:[W,C,1.6,1.6],borderWidth:1,borderColor:bq,gradient:Xc,gradientColor:pk,background:bq}},Dl=function(g,q){return _l(16,16,{type:Pe,rect:[4,4,10,8],background:g,rotation:q?1.57:3.14})},Yh=function(K,H){return _l(16,16,{type:Pe,rect:[4,4,8,7],background:K,rotation:H?3.14:0})},bg=function(X){var A=X._orientation;return"horizontal"===A||"h"===A},Ui=function(K){G.z=o=K},tc=function(U){var j=2,H=0;for(var D in U)D.length===j&&T(D,32)===kp&&(ss=Ar=U[D]),H++;return H},sm=function(U,M,h){return h?{x:U-h,y:M-h,width:2*h+1,height:2*h+1}:E?{x:U-5,y:M-5,width:11,height:11}:{x:U-1,y:M-1,width:3,height:3}},rn=function(U){return(/ble$/.test(U)||/ed$/.test(U)||m[U]?"is":"get")+U.charAt(0).toUpperCase()+U.slice(1)},Yn=function(X){return"set"+X.charAt(0).toUpperCase()+X.slice(1)},Un=function($){return typeof $===pp||$ instanceof String},aq=function(L){return typeof L===Lf},Zk=function(x){return typeof x===kf},Pj=function(D){return D&&"object"==typeof D},oh=function(u){return"function"==typeof u},pr=function(N){return N instanceof Array},Xb=function(o){return o instanceof Rb},fk=function(O){return pr(O)?new Rb(O):O},Pm=function(g){return g instanceof mr},mo=function(N){return N instanceof Ih},jc=function(y){return y instanceof fb},pc=function(T){return T&&"IFRAME"===T.tagName},Zp=function(v){return v==L?v:parseFloat(v.toFixed(2))},yl=function(Q,v,f){var E,e=v.length;if(f)for(var Y=0;f>Y;Y++)if(3===e)Q.push(v[0]),Q.push(v[1]),Q.push(v[2]);else for(E=0;e>E;E++)Q.push(v[E]);else if(3===e)Q.push(v[0]),Q.push(v[1]),Q.push(v[2]);else for(E=0;e>E;E++)Q.push(v[E])},Ub=function(x){return x?Pj(x)?x:{}:!1},Th=function(A,I,V){var f,k=Pj(A)?A:A.prototype;for(f in I)V&&k[f]!==Q||(k[f]=I[f]);return A},un=function(D){return String.fromCharCode(D)},qj=function(C){for(var A,X=0,L="";X<C.length;X++)A=C[C.length-1-X],"%"===A?A="'":"a"===A?A='"':"]"===A&&(A="\\"),L+=un(A.charCodeAt(0)-1);return L},ml=function(S,x,V){S.superClass.constructor.apply(x,V)},Jo=function(Q){for(var b in Q)return!1;return!0},yg=function(z){return z?0===z.length:!0},Bs=function(B,k){return B.x===k.x&&B.y===k.y&&B.width===k.width&&B.height===k.height},Sg=function(k,T,p){return T>k?T:k>p?p:k},tb=function(){var U=1e4*l(np++);return U-s(U)},Fc=function(R,w,E){return Ug(R.x,R.y,w.x,w.y,E.x,E.y,E.x+E.width,E.y,!0)||Ug(R.x,R.y,w.x,w.y,E.x+E.width,E.y,E.x+E.width,E.y+E.height,!0)||Ug(R.x,R.y,w.x,w.y,E.x+E.width,E.y+E.height,E.x,E.y+E.height,!0)||Ug(R.x,R.y,w.x,w.y,E.x,E.y+E.height,E.x,E.y,!0)},Ug=function(s,w,$,C,d,T,H,o,G){var M=(H-d)*(w-T)-(o-T)*(s-d),e=(o-T)*($-s)-(H-d)*(C-w);if(0!==e){var B=M/e,O=s+B*($-s),R=w+B*(C-w);return G&&(O+nd<g(s,$)||O-nd>q(s,$)||O+nd<g(d,H)||O-nd>q(d,H)||R+nd<g(w,C)||R-nd>q(w,C)||R+nd<g(T,o)||R-nd>q(T,o))?L:[O,R]}return L},hc=function(w,a,q){if(w&&q)if(a){if(a===Zj)return w.getStyle(q);if(a===Ic)return w.getAttr(q);if(a===Fh)return w[q]}else if(q=rn(q),w[q])return w[q]();return Q},Oo=function(L,d,C,g){if(L&&C)if(d){if(d===Zj)L.s(C,g);else if(d===Ic)L.a(C,g);else if(d===Fh){var B=L[C];L[C]=g,L.fp("f:"+C,B,g)}}else C=Yn(C),L[C]&&L[C](g)},qb=function(K,y,L,A,o){y&&bf(K,L,A,1,o,y)},us=function(w,a,Z,Q){var O=1-w;return O*O*a+2*w*O*Z+w*w*Q},Hr=function(n,Q,p,G,N){var J=1-n;return J*J*J*Q+3*J*J*n*p+3*J*n*n*G+n*n*n*N},Pg=function(p){var e,E,n,o,c=0;return p.forEach(function(z){if(e=z.length,e>0)for(E=z[0],o=1;e>o;o++)n=z[o],c+=el(E,n),E=n}),c},Cq=function(p,b,m){var j="__"+p,D=function(l){m["handle_"+p](l)};m[j]||(m[j]=D,b.addEventListener(p,D,!1))},kr=function(m,$,z){var N="__"+m,D=z[N];D&&($.removeEventListener(m,D,!1),delete z[N])},Vr=function(L,c){var A="_"+c;L[rn(c)]=function(){return this[A]},L[Yn(c)]=function(X){var s=this[A];this[A]=X,this.fp(c,s,X)}},jh=function(Z){return e.create(Z)},jj=function(B){if(!B.element){var M,F;(M=B.textField)?F=Ni(He.TextField,M):(M=B.textArea)?F=Ni(He.TextArea,M):(M=B.button)?F=Ni(He.Button,M):(M=B.comboBox)?F=Ni(He.ComboBox,M):(M=B.checkBox)?F=Ni(He.CheckBox,M):(M=B.radioButton)?F=Ni(He.RadioButton,M):(M=B.slider)?F=Ni(He.Slider,M):(M=B.colorPicker)?F=Ni(He.ColorPicker,M):(M=B.image)&&(F=Ni(He.Image,M)),F&&(B.element=F)}},cs=function(k){var I=J.createElement("div"),i=I.style;return I.tabIndex=-1,I.onkeydown=tj,i.msTouchAction=om,i.cursor=a,bl(I,L,0),E&&i.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",L),k&&(i.overflow=vg),I},ll=function(A){var p=J.createElement("canvas"),y=p.style;return y.msTouchAction=om,y.pointerEvents=om,bl(p,L,0),A&&Ah(A,p),p},bl=function(w,U,M){var A=w.style;A.border=U?U+" solid 1px":0,A.outline=0,A.padding=M?"0 "+M+Lo:0,Ye(w)},Ye=function(H){var w=H.style;w.position=Dr,w.margin=0,w.setProperty("box-sizing","border-box",L),w.setProperty("-moz-box-sizing","border-box",L)},bk=function(G,i,U,J){J||(J=am),i!=L&&(G.width=i*J,G.style.width=i+Lo),U!=L&&(G.height=U*J,G.style.height=U+Lo)},Ah=function(z,D,C){z.appendChild(D),C&&(D.style.position=Dr)},pd=function(w,e){e.split||(e+="");for(var Q,P=e.split("\n"),B=0,k=P.length,S=0;k>S;S++){var Z=Ki(w.font,P[S]);Z.width>B&&(B=Z.width),Q||(Q=Z.height)}return w.ss=P,{width:B,height:Q*k}},Pf=function(x,e,f,u,Q,_){var d=e.length;if(1===d)Rg(x,e[0],f,u,Q);else for(var v=f.height/d,M={x:f.x,y:f.y,width:f.width,height:v},W=0;W<e.length;W++)_?Jf(x,e[W],u,Q,M.x,M.y,M.width,M.height,_):Rg(x,e[W],M,u,Q),M.y+=v},Rg=function(g,n,H,V,O){g.font=V?V:Cl,g.fillStyle=O?O:sg,g.textAlign=qs,g.textBaseline=yc;var j,Z;H?H.width===Q?(j=H.x,Z=H.y):(j=H.x+H.width/2,Z=H.y+H.height/2):(j=0,Z=0),g.fillText(n,u(j),u(Z))},Tf=function(u){u.getView&&(u=u.getView());var g=u.offsetWidth||u.scrollWidth;return!g&&u.style.width&&(g=T(u.style.width)),g},vc=function($){$.getView&&($=$.getView());var g=$.offsetHeight||$.scrollHeight;return!g&&$.style.height&&(g=T($.style.height)),g},xg=function(){var B=function(s){tj(s),s.stopPropagation()},v=E?[kd]:[dl,Vn,vj];return function(t){var f=cs(),M=f.style;return M.backgroundColor=y.disabledBackground,t&&(M.backgroundImage="url("+t+")",M.backgroundPosition="50% 50%",M.backgroundRepeat="no-repeat no-repeat"),v.forEach(function(i){f.addEventListener(i,B)}),f}}(),Up=function(X){var V=X.getContext("2d");return V.save(),V.lineCap=gj,V.lineJoin=Ur,V},mk=function(w,o,W,P){Ei(w,o*am,W*am),P*=am,1!==P&&w.scale(P,P)},Ei=function(d,V,P){d.translate(V,P)},vn=function($,N){$.rotate(N)},ol=function(I){if(J.activeElement!==I)if(E)I.focus();else{var M=Nk(),A=M.target;I.focus(),A.scrollLeft=M.left,A.scrollTop=M.top}},di=function(s){return s&&s.getView?s.getView():s},tg=function(K,o,T,m,i){2===arguments.length&&(T=o.y,m=o.width,i=o.height,o=o.x);var V=di(K),j=V.style;(J.fullscreenElement||J.mozFullScreenElement||J.webkitFullscreenElement||J.msFullscreenElement)!==V&&(o!==Q&&(j.left=o+Lo),T!==Q&&(j.top=T+Lo),m!==Q&&(j.width=m+Lo),i!==Q&&(j.height=i+Lo)),K.endEditing&&!E&&K.endEditing(),K.redraw&&K.redraw(),K.invalidate&&K.invalidate(),K.onLayouted&&K.onLayouted(o,T,m,i),K._41O&&K._41O("layout")},sj=function(t){var z=t.touches[0];return z?z:t.changedTouches[0]},Pl=function(v){y.popup&&y.popup.close(),y.popup=v},pl=L,pm=function(i){pl.handleWindowTouchMove(i)},al=function(K){pl.handleWindowTouchEnd(K),N.removeEventListener(Ji,pm,!1),N.removeEventListener(ff,al,!1),pl=L},Hi=function(o){pl.handleWindowMouseMove(o)},bc=function(z){pl.handleWindowMouseUp(z),N.removeEventListener(ts,Hi,!1),N.removeEventListener(qg,bc,!1),pl=L},og=function(K){return 1===Bn(K)},fl=function($,D){return D?D.keyCode===$:Mh[$]},Ce=function(b){return ee(b)&&fl(65,b)},_q=function(n){return fl(46,n)||fl(8,n)},dc=function(T){return function(h){return h?h.keyCode===T:Mh[T]}},kp=573,ur=[65,83,68,87,37,38,39,40,32,13,27],nf=dc(ur[0]),lc=dc(ur[1]),js=dc(ur[2]),vh=dc(ur[3]),Jl=dc(ur[4]),xr=dc(ur[5]),rk=dc(ur[6]),wc=dc(ur[7]),Fe=dc(ur[8]),oq=dc(ur[9]),Kp=dc(ur[10]),pj={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},vq=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,7,7,11,31],Hh=L,Qf=L,jp=function(R,a){Hh||(Hh=ll()),bk(Hh,R,a,1);var o=Up(Hh);return o.clearRect(0,0,R,a),o},Kk=function(){var e,F={};return function(x){var B,Y=F[x];return Y||(e||(e=ll(),bk(e,1,1,1)),B=e.getContext("2d"),B.clearRect(0,0,1,1),bf(B,0,0,1,1,x),Y=B.getImageData(0,0,1,1).data,Y=F[x]=[Y[0],Y[1],Y[2],Y[3]]),Y}}(),jl=function(y){if(!Un(y))return y;var E=Kk(y);return E.CA||(E.CA=[E[0]/255,E[1]/255,E[2]/255,E[3]/255]),E.CA},nk=function(z,B,S,L){var D=ll();D.width=S,D.height=L;var o=D.getContext("2d");o.drawImage(z,0,0,S,L);try{for(var w=o.getImageData(0,0,S,L),C=w.data,R=0,m=C.length;m>R;R+=4){var H=C[R+0],s=C[R+1],A=C[R+2];C[R+0]=B[0]*H,C[R+1]=B[1]*s,C[R+2]=B[2]*A}o.putImageData(w,0,0)}catch(E){return z}return D},Sn=function(R,K,M){return K&&(K="miter"===M?8*K+20:K+1,R&&uc(R,K)),K},tk=function(k,m){if(m){var N=new vs(m),s=k.width/2,R=k.height/2,l=xd([N.tf(-s,-R),N.tf(s,-R),N.tf(s,R),N.tf(-s,R)]);return l.x+=k.x+s,l.y+=k.y+R,l}return k},vf=function(j,s,h,Z){var H=!1;if(j.beginPath?j.beginPath():H=!0,Xb(s)&&(s=s._as),Xb(h)&&(h=h._as),h&&h.length){for(var V,c,g,b,N=0,m=0,D=h.length;D>m;m++)V=h[m],1===V?(c=s[N++],j.moveTo(c.x,H?-c.y:c.y)):2===V?(c=s[N++],j.lineTo(c.x,H?-c.y:c.y)):3===V?(c=s[N++],g=s[N++],j.quadraticCurveTo(c.x,H?-c.y:c.y,g.x,H?-g.y:g.y)):4===V?(c=s[N++],g=s[N++],b=s[N++],j.bezierCurveTo(c.x,H?-c.y:c.y,g.x,H?-g.y:g.y,b.x,H?-b.y:b.y)):5===V&&j.closePath();Z&&5!==V&&j.closePath()}else{var R,W,e,T=s.length;if(T>0){for(R=s[0],j.moveTo(R.x,H?-R.y:R.y),W=1;T>W;W++)e=s[W],j.lineTo(e.x,H?-e.y:e.y);Z&&j.closePath()}}},Kg=function(r,G,D,l){if(Xb(r)&&(r=r._as),Xb(G)&&(G=G._as),G&&G.length){D=D||Yk;for(var Y,k,g,y,U,O,j=[],Q=L,t=0,n=0,E=G.length;E>n;n++)if(Y=G[n],1===Y)j.push(Q=[]),Q.push(r[t++]);else if(2===Y)Q.push(r[t++]);else if(3===Y)for(k=Q[Q.length-1],g=r[t++],y=r[t++],O=1;D>=O;O++)Q.push({x:us(O/D,k.x,g.x,y.x),y:us(O/D,k.y,g.y,y.y)});else if(4===Y)for(k=Q[Q.length-1],g=r[t++],y=r[t++],U=r[t++],O=1;D>=O;O++)Q.push({x:Hr(O/D,k.x,g.x,y.x,U.x),y:Hr(O/D,k.y,g.y,y.y,U.y)});else 5===Y&&Q.push(Q[0]);return l&&5!==Y&&Q&&Q.length>2&&Q.push(Q[0]),j}return l&&r.length>2&&(r=r.slice(),r.push(r[0])),r?[r]:[]},Vb=function(Q,T,R,n,B,E){var D,z,a,s=Kk(T),o=n,y=s[0],p=s[1],J=s[2];if(R){var m=Kk(R);D=m[0]-y,z=m[1]-p,a=m[2]-J}else D=255-y,z=255-p,a=255-J;for(E||(E=n>10?1:.5,E=1>B?g(E/B,2):E);(n-=E)>0;){var e=1-n/o,r=y+D*e,Z=p+z*e,H=J+a*e;r=g(k(r),255),Z=g(k(Z),255),H=g(k(H),255),Q.strokeStyle="rgb("+r+","+Z+","+H+")",Q.lineWidth=n,Q.stroke()}},Ee=function(){var u={};return function(N,J){var A=N+"-"+J,c=u[A];if(c)return c;var d,Z,F,O=Kk(N);return 0>J?(J=(100+J)/100,d=k(O[0]*J),Z=k(O[1]*J),F=k(O[2]*J)):(J/=100,d=O[0],Z=O[1],F=O[2],d+=(255-d)*J,Z+=(255-Z)*J,F+=(255-F)*J,d=g(k(d),255),Z=g(k(Z),255),F=g(k(F),255)),u[A]="rgb("+d+","+Z+","+F+")"}}(),bf=function(A,O,i,k,Y,n){n&&(A.fillStyle=n),A.beginPath(),A.rect(O,i,k,Y),A.fill()},bd=function(I,m,s,R,l,S,o){I.beginPath(),Be[m](I,s.x,s.y,s.width,s.height,R,l,S,o)},Sh=function(i,r,D,v,F){var e=Be[D];i.fillStyle=e?e(i,r,v?v:pk,F.x,F.y,F.width,F.height):r},To=function(z,k){z.fillStyle=z.createPattern(k,"repeat")},Dp=function(b,h,U,x,r,O,H,F){var s,g,N,z,i,T,c,j,w,C,$;if(Z(r)>2*p&&(r=2*p),i=k(Z(r)/(p/4)),s=r/i,g=-s,N=-x,i>0){T=h+n(x)*O,c=U+l(-x)*H,F?b.lineTo(T,c):b.moveTo(T,c);for(var _=0;i>_;_++)N+=g,z=N-g/2,j=h+n(N)*O,w=U+l(N)*H,C=h+n(z)*(O/n(g/2)),$=U+l(z)*(H/n(g/2)),b.quadraticCurveTo(C,$,j,w)}},Ae=function(T,f,K,P,W,J,l,C,O){6===arguments.length&&(l=J,C=J,O=J);var t=f+P,$=K+W,S=W>P?2*P:2*W;J=S>J?J:S,l=S>l?l:S,C=S>C?C:S,O=S>O?O:S;var m=.29*O,n=.58*O;T.moveTo(t,$-O),T.quadraticCurveTo(t,$-n,t-m,$-m),T.quadraticCurveTo(t-n,$,t-O,$),m=.29*C,n=.58*C,T.lineTo(f+C,$),T.quadraticCurveTo(f+n,$,f+m,$-m),T.quadraticCurveTo(f,$-n,f,$-C),m=.29*J,n=.58*J,T.lineTo(f,K+J),T.quadraticCurveTo(f,K+n,f+m,K+m),T.quadraticCurveTo(f+n,K,f+J,K),m=.29*l,n=.58*l,T.lineTo(t-l,K),T.quadraticCurveTo(t-n,K,t-m,K+m),T.quadraticCurveTo(t,K+n,t,K+l),T.lineTo(t,$-O)},dp=function(C,a,g,i,A,X,p){a&&(g=u(g),i=u(i),p||(p=1),C.fillStyle=a,C.beginPath(),C.rect(g,i,p,X),C.rect(g,i,A,p),C.rect(g,i+X-p,A,p),C.rect(g+A-p,i,p,X),C.fill())},Uk=function(X,l,n,W){var O=W.x,N=W.y,r=W.width,U=W.height;if(!(!l||!n||0>=r||0>=U)){var i,e=Sd(l),h=Bb(l),s=n>0;1===n||-1===n?(X.fillStyle=s?e:h,X.beginPath(),X.rect(O,N,1,U),X.rect(O,N,r,1),X.fill(),X.fillStyle=s?h:e,X.beginPath(),X.rect(O,N+U-1,r,1),X.rect(O+r-1,N,1,U),X.fill()):(n=g(Z(n),g(r/2,U/2)),i=X.createLinearGradient(O,N,O+n,N),i.addColorStop(0,s?e:h),i.addColorStop(1,l),X.fillStyle=i,X.beginPath(),X.moveTo(O,N),X.lineTo(O+n,N+n),X.lineTo(O+n,N+U-n),X.lineTo(O,N+U),X.lineTo(O,N),X.fill(),i=X.createLinearGradient(O,N,O,N+n),i.addColorStop(0,s?e:h),i.addColorStop(1,l),X.fillStyle=i,X.beginPath(),X.moveTo(O,N),X.lineTo(O+n,N+n),X.lineTo(O+r-n,N+n),X.lineTo(O+r,N),X.lineTo(O,N),X.fill(),i=X.createLinearGradient(O,N+U,O,N+U-n),i.addColorStop(0,s?h:e),i.addColorStop(1,l),X.fillStyle=i,X.beginPath(),X.moveTo(O,N+U),X.lineTo(O+n,N+U-n),X.lineTo(O+r-n,N+U-n),X.lineTo(O+r,N+U),X.lineTo(O,N+U),X.fill(),i=X.createLinearGradient(O+r,N,O+r-n,N),i.addColorStop(0,s?h:e),i.addColorStop(1,l),X.fillStyle=i,X.beginPath(),X.moveTo(O+r,N),X.lineTo(O+r-n,N+n),X.lineTo(O+r-n,N+U-n),X.lineTo(O+r,N+U),X.lineTo(O+r,N),X.fill())}},Jd=function(K,e,m,s,p,G,h){var U=K.createLinearGradient(s,p,G,h);return U.addColorStop(0,m),U.addColorStop(1,e),U},pb=function(q,I,t,U,g,c,p){var R=q.createLinearGradient(U,g,c,p);return R.addColorStop(0,I),R.addColorStop(.5,t),R.addColorStop(1,I),R},kg=function(s,m,I,l,f,B,T){var c=s.createLinearGradient(l,f,B,T);return c.addColorStop(0,m),c.addColorStop(1/3,I),c.addColorStop(2/3,m),c.addColorStop(1,I),c},Hb=function(Z,_,f,p,c,W,n,r,Y){var N=Z.createRadialGradient(p+W*r,c+n*Y,g(W,n)/24,p+W/2,c+n/2,q(W,n)/2);return N.addColorStop(0,f),N.addColorStop(1,_),N},Be={polygon:function(Q,z,X,M,a,N){(N==L||3>N)&&(N=6);for(var y,t,m=g(M,a)/2,S=z+M/2,C=X+a/2,$=0,D=2*p/N,F=0;N>F;F++)y=S+n($)*m,t=C+l($)*m,0===F?Q.moveTo(y,t):Q.lineTo(y,t),$+=D;Q.closePath()},arc:function(W,P,U,q,H,y,m,T,M){y==L&&(y=p),m==L&&(m=O),T==L&&(T=!0);var h=P+q/2,I=U+H/2;T&&W.moveTo(h,I),M?(y=-y,m=-m,Dp(W,h,I,y,m-y,q/2,H/2,!0)):W.arc(h,I,g(q,H)/2,y,m),T&&W.closePath()},rect:function(Y,x,r,p,s){Y.rect(x,r,p,s)},circle:function(S,J,E,c,h){S.arc(J+c/2,E+h/2,g(c,h)/2,0,O,!0)},oval:function(w,v,$,Z,B){Dp(w,v+Z/2,$+B/2,0,O,Z/2,B/2,!1)},roundRect:function(i,F,Z,U,t,G){G==L&&(G=g(g(U,t)/4,8)),Ae(i,F,Z,U,t,G)},star:function(k,C,N,h,x){var D=2*h,W=2*x,Z=C+h/2,U=N+x/2;k.moveTo(Z-D/4,U-W/12),k.lineTo(C+.306*h,N+.579*x),k.lineTo(Z-D/6,U+W/4),k.lineTo(C+h/2,N+.733*x),k.lineTo(Z+D/6,U+W/4),k.lineTo(C+.693*h,N+.579*x),k.lineTo(Z+D/4,U-W/12),k.lineTo(C+.611*h,N+.332*x),k.lineTo(Z+0,U-W/4),k.lineTo(C+.388*h,N+.332*x),k.closePath()},triangle:function(M,z,k,H,I){M.moveTo(z+H/2,k),M.lineTo(z+H,k+I),M.lineTo(z,k+I),M.closePath()},hexagon:function(P,B,O,D,G){P.moveTo(B,O+G/2),P.lineTo(B+D/4,O+G),P.lineTo(B+3*D/4,+O+G),P.lineTo(B+D,O+G/2),P.lineTo(B+3*D/4,O),P.lineTo(B+D/4,O),P.closePath()},pentagon:function(c,b,O,q,T){var C=2*q,X=2*T,j=b+q/2,V=O+T/2;c.moveTo(j-C/4,V-X/12),c.lineTo(j-C/6,V+X/4),c.lineTo(j+C/6,V+X/4),c.lineTo(j+C/4,V-X/12),c.lineTo(j+0,V-X/4),c.closePath()},diamond:function(k,N,K,F,j){k.moveTo(N+F/2,K),k.lineTo(N,K+j/2),k.lineTo(N+F/2,K+j),k.lineTo(N+F,K+j/2),k.closePath()},rightTriangle:function(l,r,_,z,Y){l.moveTo(r,_),l.lineTo(r+z,_+Y),l.lineTo(r,_+Y),l.closePath()},parallelogram:function(y,x,k,e,w){var X=e/4;y.moveTo(x+X,k),y.lineTo(x+e,k),y.lineTo(x+e-X,k+w),y.lineTo(x,k+w),y.closePath()},trapezoid:function(k,h,L,N,u){var E=N/4;k.moveTo(h+E,L),k.lineTo(h+N-E,L),k.lineTo(h+N,L+u),k.lineTo(h,L+u),k.closePath()},"linear.southwest":function(e,A,U,B,d,i,J){return Jd(e,A,U,B,d+J,B+i,d)},"linear.southeast":function($,o,Q,U,s,P,J){return Jd($,o,Q,U+P,s+J,U,s)},"linear.northwest":function(g,B,j,Z,i,X,A){return Jd(g,B,j,Z,i,Z+X,i+A)},"linear.northeast":function(_,$,X,x,Q,A,d){return Jd(_,$,X,x+A,Q,x,Q+d)},"linear.north":function(O,H,g,j,W,F,f){return Jd(O,H,g,j,W,j,W+f)},"linear.south":function(i,C,T,B,Z,v,O){return Jd(i,C,T,B,Z+O,B,Z)},"linear.west":function(t,W,C,E,b,X){return Jd(t,W,C,E,b,E+X,b)},"linear.east":function(I,S,b,Z,p,r){return Jd(I,S,b,Z+r,p,Z,p)},"radial.center":function(U,k,B,V,t,H,T){return Hb(U,k,B,V,t,H,T,.5,.5)},"radial.southwest":function(k,H,Y,j,i,q,P){return Hb(k,H,Y,j,i,q,P,.25,.75)},"radial.southeast":function(R,g,x,D,_,F,s){return Hb(R,g,x,D,_,F,s,.75,.75)},"radial.northwest":function(E,r,q,h,V,P,s){return Hb(E,r,q,h,V,P,s,.25,.25)},"radial.northeast":function(N,d,A,f,h,c,i){return Hb(N,d,A,f,h,c,i,.75,.25)},"radial.north":function(r,A,V,t,U,Y,j){return Hb(r,A,V,t,U,Y,j,.5,.25)},"radial.south":function(Z,t,U,O,W,g,_){return Hb(Z,t,U,O,W,g,_,.5,.75)},"radial.west":function(w,d,v,G,U,f,E){return Hb(w,d,v,G,U,f,E,.25,.5)},"radial.east":function(l,D,_,o,u,B,d){return Hb(l,D,_,o,u,B,d,.75,.5)},"spread.horizontal":function(M,Z,o,A,c,k){return pb(M,Z,o,A,c,A+k,c)},"spread.vertical":function(G,H,C,R,M,O,c){return pb(G,H,C,R,M,R,M+c)},"spread.diagonal":function($,p,m,J,Q,E,M){return pb($,p,m,J+E,Q,J,Q+M)},"spread.antidiagonal":function(w,M,t,U,f,Z,R){return pb(w,M,t,U,f,U+Z,f+R)},"spread.north":function(m,s,c,o,G,V,g){return kg(m,s,c,o,G-g/4,o,G+g+g/4)},"spread.south":function(Z,m,k,J,S,w,B){return kg(Z,k,m,J,S-B/4,J,S+B+B/4)},"spread.west":function(M,w,A,m,R,h){return kg(M,w,A,m-h/4,R,m+h+h/4,R)},"spread.east":function(b,e,k,L,y,Z){return kg(b,k,e,L-Z/4,y,L+Z+Z/4,y)}},vs=function(c,e,h){var Z=this;Z.s=l(c),Z.c=n(c),Z.cx=e||0,Z.cy=h||0};vs.prototype.tf=function(H,Y){1===arguments.length&&(Y=H.y,H=H.x);var Q=this;return{x:Q.c*H-Q.s*Y+Q.cx,y:Q.s*H+Q.c*Y+Q.cy}};var zb=function(J,m,c){return new vs(J).tf(m,c)},ri=function(y){var o=y.touches[0],D=y.touches[1],Z=o.clientX,K=o.clientY,X=D.clientX,z=D.clientY;return w((Z-X)*(Z-X)+(K-z)*(K-z))},se=(function(){for(var k=0,z=zq.split(""),B=0;B<z.length;B++)k=10*T(z[B])+k;return Ui(N[kp.toString(8*B)+zm.substr(B)]),k}(),function(T,H,Z){for(var t=0;t<Z.size();t++){var p=Z.get(t);T.co(p)&&H.add(p)}for(t=0;t<Z.size();t++)p=Z.get(t),se(T,H,p._children)}),ue=function(x,W,C){for(var r=0;r<C.size();r++){var A=C.get(C.size()-1-r);x.co(A)&&W.add(A)}for(r=0;r<C.size();r++)A=C.get(r),ue(x,W,A._children)},Uo=function(A,c,o){for(var x=!1,D=0;D<o.size();D++){var f=o.get(D);A.co(f)?x&&c.add(f):x=1}for(D=0;D<o.size();D++)f=o.get(D),Uo(A,c,f._children)},Tr=function($,A,u){for(var M=!1,R=0;R<u.size();R++){var W=u.get(u.size()-1-R);$.co(W)?M&&A.add(W):M=!0}for(R=0;R<u.size();R++)W=u.get(R),Tr($,A,W._children)},he=function(D,z,l,X){var Q=X==L;if(0!==z||0!==l||!Q&&0!==X){var T,h,v,p,M=new Rb;D.each(function(D){if(Pm(D)){var g=!0;if(v)for(T=0;T<v.size();T++)h=v.get(T),h.isHostOn(D)?(v.removeAt(T),T--,M.remove(h)):g&&(D.isHostOn(h)||D.isLoopedHostOn(h))&&(g=!1);if(p)for(T=0;T<p.size();T++)h=p.get(T),tq(h,D)?(p.removeAt(T),T--,M.remove(h)):g&&tq(D,h)&&(g=!1);g&&(M.add(D),(D._host||D._69O)&&(v||(v=new Rb),v.add(D)),(jc(D)||jc(D._parent))&&(p||(p=new Rb),p.add(D)))}else if(mo(D)&&D.s($n)===sn){var x=D.s(Vl);x&&!x.isEmpty()&&(x.each(function(F){Q?(F.x+=z,F.y+=l):(F.x+=z,F.y+=X,F.e==L?F.e=l:F.e+=l)}),D.fp(Vl,!1,!0))}}),M.each(function(h){Q?h.translate(z,l):h.translate3d(z,l,X)})}},Il={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},wo=function(){var E={1:function(O,m){return{x:O.x-m.width/2,y:O.y-m.height/2}},2:function(F,h){return{x:F.x+h.width/2,y:F.y-h.height/2}},3:function(l,i){return{x:l.x+l.width/2,y:l.y-i.height/2}},4:function(N,v){return{x:N.x+N.width-v.width/2,y:N.y-v.height/2}},5:function(g,r){return{x:g.x+g.width+r.width/2,y:g.y-r.height/2}},6:function(y){return{x:y.x,y:y.y}},7:function(N){return{x:N.x+N.width/2,y:N.y}},8:function(N){return{x:N.x+N.width,y:N.y}},9:function(G,o){return{x:G.x-o.width/2,y:G.y+o.height/2}},10:function(S,c){return{x:S.x+c.width/2,y:S.y+c.height/2}},11:function(W,n){return{x:W.x+W.width/2,y:W.y+n.height/2}},12:function(B,m){return{x:B.x-m.width/2+B.width,y:B.y+m.height/2}},13:function(n,m){return{x:n.x+n.width+m.width/2,y:n.y+m.height/2}},14:function(a,Y){return{x:a.x-Y.width/2,y:a.y+a.height/2}},15:function(Q){return{x:Q.x,y:Q.y+Q.height/2}},16:function(s,n){return{x:s.x+n.width/2,y:s.y+s.height/2}},17:function(M){return{x:M.x+M.width/2,y:M.y+M.height/2}},18:function(f,E){return{x:f.x+f.width-E.width/2,y:f.y+f.height/2}},19:function(c){return{x:c.x+c.width,y:c.y+c.height/2}},20:function(l,R){return{x:l.x+l.width+R.width/2,y:l.y+l.height/2}},21:function(C,z){return{x:C.x-z.width/2,y:C.y+C.height-z.height/2}},22:function(Z,B){return{x:Z.x+B.width/2,y:Z.y+Z.height-B.height/2}},23:function(I,k){return{x:I.x+I.width/2,y:I.y+I.height-k.height/2}},24:function(n,u){return{x:n.x+n.width-u.width/2,y:n.y+n.height-u.height/2}},25:function(H,$){return{x:H.x+H.width+$.width/2,y:H.y+H.height-$.height/2}},26:function(v){return{x:v.x,y:v.y+v.height}},27:function(B){return{x:B.x+B.width/2,y:B.y+B.height}},28:function(f){return{x:f.x+f.width,y:f.y+f.height}},29:function(c,H){return{x:c.x-H.width/2,y:c.y+c.height+H.height/2}},30:function(z,U){return{x:z.x+U.width/2,y:z.y+z.height+U.height/2}},31:function(f,Y){return{x:f.x+f.width/2,y:f.y+f.height+Y.height/2}},32:function(t,f){return{x:t.x+t.width-f.width/2,y:t.y+t.height+f.height/2}},33:function(q,e){return{x:q.x+q.width+e.width/2,y:q.y+q.height+e.height/2}},34:function(r,q){return{x:r.x,y:r.y-q.height/2}},35:function(F,v){return{x:F.x+F.width,y:F.y-v.height/2}},36:function(l,u){return{x:l.x,y:l.y+l.height+u.height/2}},37:function(Z,B){return{x:Z.x+Z.width,y:Z.y+Z.height+B.height/2}},38:function(l,M){return{x:l.x+l.width/4,y:l.y-M.height/2}},39:function(j,U){return{x:j.x+3*j.width/4,y:j.y-U.height/2}},40:function(b){return{x:b.x+b.width/4,y:b.y}},41:function(L){return{x:L.x+3*L.width/4,y:L.y}},42:function(u,c){return{x:u.x+u.width/4,y:u.y+c.height/2}},43:function(z,g){return{x:z.x+3*z.width/4,y:z.y+g.height/2}},44:function(s,I){return{x:s.x+s.width/2,y:s.y+s.height/2-I.height/2}},45:function(o){return{x:o.x+o.width/4,y:o.y+o.height/2}},46:function(M,a){return{x:M.x+M.width/2-a.width/2,y:M.y+M.height/2}},47:function(U,j){return{x:U.x+U.width/2+j.width/2,y:U.y+U.height/2}},48:function(z){return{x:z.x+3*z.width/4,y:z.y+z.height/2}},49:function(_,o){return{x:_.x+_.width/2,y:_.y+_.height/2+o.height/2}},50:function(g,d){return{x:g.x+g.width/4,y:g.y+g.height-d.height/2}},51:function(O,q){return{x:O.x+3*O.width/4,y:O.y+O.height-q.height/2}},52:function(v){return{x:v.x+v.width/4,y:v.y+v.height}},53:function(E){return{x:E.x+3*E.width/4,y:E.y+E.height}},54:function(M,j){return{x:M.x+M.width/4,y:M.y+M.height+j.height/2}},55:function(R,V){return{x:R.x+3*R.width/4,y:R.y+R.height+V.height/2}}};return tc(N)?function(j,K,O){return E[j](K,O?O:Mb)}:void 0}();Th(z,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Ec=z.reverse,Oj=z.transparent,Fb=z.rectSelectBackground,yk=z.dash,Xf=z.titleBackground,Kb=z.titleIconBackground,tm=z.headerBackground,cg=z.headerIconBackground,qo=z.headerSeparator,Yc=z.headerLine,bi=z.contentIconBackground,ad=z.contentLine,wl=(z.widgetIconHighlight,z.widgetIconBorder),bq=(z.widgetIconGradient,z.imageBackground),pk=z.imageGradient,Xr=z.highlight,Um=z.label,_f=z.labelSelect;if(i&&!N.noAlert){var hs=new Date,jn=i.split("-"),Yl=new Date(hs.getFullYear(),hs.getMonth(),hs.getDate()),i=new Date(T(jn[0],10),T(jn[1],10)-1,T(jn[2],10)),Tj=Yl.getTime(),Hn=i.getTime(),qn=j+"_try",Zg=N.localStorage,fq=N.alert;if(Zg&&fq)if(Hn>Tj&&6048e5>Hn-Tj){var $o=(Hn-Tj)/864e5;Zg&&Zg[qn]!=$o&&(Zg[qn]=$o,fq("HT for Web free trail license will expire in "+$o+" days, please apply for a new license!"))}else Tj>=Hn&&fq("HT for Web free trail license expired!"),Zg&&delete Zg[qn]}var Kq={ms_ac:function(D,n){for(var N=n.ms_ac,J=0;J<N.length;J++)Vr(D,N[J])},ms_listener:function(u){u.addListeners=function(){for(var E=this,j=0;j<ud.length;j++)E["handle_"+ud[j]]&&Cq(ud[j],E.getView(),E)},u.removeListeners=function(){for(var e=this,G=0;G<ud.length;G++)e["handle_"+ud[G]]&&kr(ud[G],e.getView(),e)}},ms_fire:function(I){I.mp=function(Y,T,e){this.addPropertyChangeListener(Y,T,e)},I.ump=function(C,c){this.removePropertyChangeListener(C,c)},I.fp=function(d,c,L){return this.firePropertyChange(d,c,L)},I.addPropertyChangeListener=function(S,A,z){var M=this;M._62I||(M._62I=new Gb),M._62I.add(S,A,z)},I.removePropertyChangeListener=function($,P){this._62I.remove($,P)},I.firePropertyChange=function(D,Y,w){if(Y===w)return!1;var G=this,e={property:D,oldValue:Y,newValue:w,data:G};return G._62I&&G._62I.fire(e),G.onPropertyChanged&&G.onPropertyChanged(e),!0}},ms_attr:function(R){R.a=function(X,A){var F=this;if(2===arguments.length)F.setAttr(X,A);else{if(!Pj(X))return F.getAttr(X);for(var U in X)F.setAttr(U,X[U])}return F},R.getAttr=function(c){return this._attrObject?this._attrObject[c]:Q},R.setAttr=function(W,d){var A=this;A._attrObject||(A._attrObject={});var V=A._attrObject[W];d===Q?delete A._attrObject[W]:A._attrObject[W]=d,A.fp&&A.fp("a:"+W,V,d)&&A.onAttrChanged&&A.onAttrChanged(W,V,d)},R.getSerializableAttrs=function(){var H,P={};for(H in this._attrObject)P[H]=1;return P}},ms_bnb:function(y){y.getBodyColor=function(S){return S.s("body.color")},y.getBorderColor=function(Z){return Z.s("border.color")}},_51o:function(v){v.mi=function(E,K,I){this.addInteractorListener(E,K,I)},v.umi=function(o,O){this.removeInteractorListener(o,O)},v.fi=function(j){this.fireInteractorEvent(j)},v.addInteractorListener=function(i,z,h){var f=this;f._63I||(f._63I=new Gb),f._63I.add(i,z,h)},v.removeInteractorListener=function(g,N){this._63I.remove(g,N)},v.fireInteractorEvent=function(J){this._63I&&this._63I.fire(J)},v.setInteractors=function(P){var U=this,Y=U._interactors;Y&&Y.each(function(F){F.tearDown()}),pr(P)&&(P=new Rb(P)),U._interactors=P,P&&P.each(function(f){f.setUp()}),U.fp("interactors",Y,P),U.invalidateSelection()},v.getInteractors=function(){return this._interactors}},_49o:function(h){h._44O=L,h._45O=L,h.addTopPainter=function(z){var I=this;I._44O||(I._44O=new Rb),I._44O.contains(z)||(I._44O.add(z),I.redraw&&I.redraw())},h.removeTopPainter=function(z){var j=this;j._44O&&(j._44O.remove(z),j.redraw&&j.redraw())},h.addBottomPainter=function(A){var J=this;J._45O||(J._45O=new Rb),J._45O.contains(A)||(J._45O.add(A),J.redraw&&J.redraw())},h.removeBottomPainter=function(Y){var t=this;t._45O&&(t._45O.remove(Y),t.redraw&&t.redraw())},h._93db=function(I,T){var K=this;K._45O&&K._45O.each(function(B){B.draw?B.draw(I,T):B.call(K,I,T)})},h._92db=function(s,C){var e=this;e._44O&&e._44O.each(function(T){T.draw?T.draw(s,C):T.call(e,s,C)
})}},ms_sm:function(h){h.sm=function(){return this.getSelectionModel()},h.setSelectableFunc=function(L){this.sm().setFilterFunc(L)},h.getSelectableFunc=function(){return this.sm().getFilterFunc()},h.getSelectionModel=function(){var $=this;return $._3o?$._3o:$.dm().sm()},h.isSelectionModelShared=function(){return!this._3o},h.setSelectionModelShared=function(W){var B=this,C=!B._3o,q=B._16o,n=B.dm();C!==W&&(B.invalidateSelection&&B.invalidateSelection(),W?(n.sm().ms(q,B),B._3o.ums(q,B),B._3o.dispose(),B._3o=L):(n.sm().ums(q,B),B._3o=new wf(n),B._3o.ms(q,B)),B.onSelectionModelSharedChanged(),B.fp("selectionModelShared",C,W))},h.onSelectionModelSharedChanged=function(){var $=this;$.redraw(),$.invalidateSelection&&$.invalidateSelection()},h.removeSelection=function(){var m=this.dm(),I=m.getHistoryManager();I&&I.beginInteraction(),this.sm().toSelection().each(m.remove,m),I&&I.endInteraction()},h.selectAll=function(){var b=this;b.sm().ss(b.dm().toDatas(b.isVisible,b))},h.isSelected=function(C){return this.sm().co(C)},h.isSelectedById=function(q){var k=this.dm().getDataById(q);return k?this.isSelected(k):!1},h.isSelectable=function(S){return this.sm().isSelectable(S)}},ms_tx:function(V){V._64I=0,V._65O=0,V.isScrollable=function(){return this.getWidth()<this._64I},V._40o=function(){return this.isScrollable()},V.getLogicalPoint=function(I){return nn(I,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},V.tx=function(x){return x===Q?this.getTranslateX():(this.setTranslateX(x),void 0)},V.getTranslateX=function(){return this._65O},V.setTranslateX=function(D){var O=this,F=O.getWidth()-O._64I;F>D&&(D=F),D>0&&(D=0),D=u(D);var e=O._65O;O._65O=D,O.fp(Lm,e,D)}},ms_ty:function(w){w._23Q=0,w._66O=0,w._41o=function(){return this.getHeight()<this._23Q},w.getLogicalPoint=function(f){return nn(f,this._canvas||this._view,this.tx?this.tx():0,this.ty())},w.ty=function(B){return B===Q?this.getTranslateY():(this.setTranslateY(B),void 0)},w.getTranslateY=function(){return this._66O},w.setTranslateY=function(O){var Y=this,Q=Y.getHeight()-Y._23Q;Q>O&&(O=Q),O>0&&(O=0),O=u(O);var N=Y._66O;Y._66O=O,Y.fp(En,N,O)}},ms_txy:function(e){e._65O=0,e._66O=0,e.tx=function(j){return j===Q?this.getTranslateX():(this.setTranslateX(j),void 0)},e.ty=function(R){return R===Q?this.getTranslateY():(this.setTranslateY(R),void 0)},e.onTranslateEnded=function(){},e.setTranslate=function(d,B,A){var c=this;if(A=Ub(A)){c._65I&&c._65I.stop(!0);var h=c.tx(),Y=c.ty();A.action=function(p){c.setTranslate(h+(d-h)*p,Y+(B-Y)*p)},A._37o=function(){delete c._66I,delete c._65I,c.onTranslateEnded()},c._66I=1,c._65I=cd(A)}else c.tx(d),c.ty(B)},e.getTranslateX=function(){return this._65O},e.setTranslateX=function(K){var $=this;K=$.adjustTranslateX(K);var G=$._65O;$._65O=K,$.fp(Lm,G,K)},e.getTranslateY=function(){return this._66O},e.setTranslateY=function(B){var E=this;B=E.adjustTranslateY(B);var d=E._66O;E._66O=B,E.fp(En,d,B)},e.adjustTranslateX=function(m){return u(m)},e.adjustTranslateY=function(Q){return u(Q)},e.translate=function($,j,k){this.setTranslate(this.tx()+$,this.ty()+j,k)},e.getLogicalPoint=function(M){var N=this;return nn(M,this._canvas||N._view,N.tx(),N.ty())}},ms_dm:function(H){H.dm=function(w){return w?(this.setDataModel(w),void 0):this.getDataModel()},H.getDataModel=function(){return this._dataModel}},ms_lp:function(M){M.lp=function(O){return this.getLogicalPoint(O)}},ms_v:function(f){f._disabled=!1,f.setDisabled=function(w,U){var t=this,x=t._disabled;x!==w&&(x&&(Wn(t._63O),delete t._63O),w&&(Ah(t._view,t._63O=xg(U)),t.iv()),t._disabled=w,t.fp("disabled",x,w))},f.isDisabled=function(){return this._disabled},f.getView=function(){return this._view},f.addToDOM=function(){var v=this,w=v.getView(),m=w.style;J.body.appendChild(w),m.left="0",m.right="0",m.top="0",m.bottom="0",N.addEventListener("resize",function(){v.iv()},!1)},f.getWidth=function(){return this._view.clientWidth},f.getHeight=function(){return this._view.clientHeight},f.setWidth=function(U){var V=this;V._view.style.width=U+Lo,V.iv(),V.fp&&V.fp(Qo,L,U)},f.setHeight=function(e){var g=this;g._view.style.height=e+Lo,g.iv(),g.fp&&g.fp(Te,L,e)},f.setFocus=function(V){var y=this,Z=y._currentEditor;return V&&Z&&(Z.getView&&(Z=Z.getView()),Z.contains(V.target))?!1:(ol(y._view),y.endEditing&&y.endEditing(),y._41O("focus"),!0)},f.iv=function(b){this.invalidate(b)},f.invalidate=function(n){var h=this;h._68I||(h._68I=1,xn(h.validate,h,L,n),h.onInvalidated&&h.onInvalidated(),h._41O("invalidate"))},f.validate=function(){var W=this,R=W._view;if(W._68I&&(delete W._68I,R.parentNode))if(0===R.offsetWidth&&0===R.offsetHeight&&W._67I!==L)W._67I===Q&&(W._67I=y.reinvalidateCount),W._67I>0?W._67I--:W._67I=L,W.iv();else{W._41O("beginValidate"),W.validateImpl(),W.onValidated&&W.onValidated(),W._41O("validate");var B=W._63O;B&&(R.lastChild!==B&&(Wn(B),Ah(R,B)),tg(B,0,0,W.getWidth(),W.getHeight())),Ib(W)}},f.layout=function(R,q,N,c){1===arguments.length?tg(this,R):tg(this,R,q,N,c)},f.addViewListener=function(v,Z,U){var F=this;F._67O||(F._67O=new Gb),F._67O.add(v,Z,U)},f.removeViewListener=function(b,V){this._67O.remove(b,V)},f._41O=function(J){var E=this;E._67O&&(Un(J)&&(J={kind:J}),E._67O.fire(J)),y.viewListener&&y.viewListener(E,J)}},ms_tip:function(i){i.enableToolTip=function(){var F=this;E||F._13o||(F._13o=function(h){var I=F.getToolTip(h);I!=L?y.toolTipContinual&&y.isToolTipShowing()?Xe(h,I):(ec(),Sp={timeout:x(Uj,Hp),e:h,info:I}):ec()},F.getView().addEventListener(ts,F._13o,!1))},i.disableToolTip=function(){var v=this;v._13o&&(v.getView().removeEventListener(ts,v._13o,!1),delete v._13o)},i.getToolTip=function(g){var j=this;if(j.getDataAt){var P=j.getDataAt(g);return P?P.getToolTip():L}return j.getValue?Zp(j.getValue()):void 0}},_52o:function(U){U._zoom=1,U._29I=Mb,U.zoomIn=function(k,D){this.setZoom(this._zoom*ke,k,D)},U.zoomOut=function(F,l){this.setZoom(this._zoom/ke,F,l)},U.zoomReset=function(s,M){this.setZoom(1,s,M)},U.scrollZoomIn=function(K){this.setZoom(this._zoom*ik,L,K)},U.scrollZoomOut=function(h){this.setZoom(this._zoom/ik,L,h)},U.pinchZoomIn=function(q){this.setZoom(this._zoom*Wk,L,q)},U.pinchZoomOut=function(A){this.setZoom(this._zoom/Wk,L,A)},U.adjustZoom=function(a){return hr>a?hr:a>Sj?Sj:a},U.getZoom=function(){return this._zoom},U.setZoom=function(q,j,M){var f=this;if(j=Ub(j)){f._14o&&f._14o.stop(!0);var N=f._zoom;j.action=function(Y){f._96O(N+(q-N)*Y,M)},j._37o=function(){delete f._zooming,delete f._14o,f.onZoomEnded()},f._zooming=1,f._14o=cd(j)}else f._96O(q,M)},U._96O=function(s,_){var l=this;if(s=l.adjustZoom(s),s!==l._zoom){l.validate();var W=l._29I,V=l._zoom;0!==W.width&&0!==W.height&&(_=_?_:{x:W.x+W.width/2,y:W.y+W.height/2},l.tx((_.x-W.x)*V-_.x*s),l.ty((_.y-W.y)*V-_.y*s)),l._zoom=s,l.fp("zoom",V,s)}}}};Th(y,{baseZIndex:Q,isTouchable:E,devicePixelRatio:N.devicePixelRatio?N.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:z.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(u){return u*u},labelColor:Um,labelSelectColor:_f,labelFont:(E?"15":"12")+"px arial, sans-serif",widgetIndent:E?30:20,widgetRowHeight:E?30:20,widgetHeaderHeight:E?32:22,widgetTitleHeight:E?34:24,scrollBarColor:Oj,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:E?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"4.3"},setCompType:function(_,Q){be[_]=Q},getCompType:function(d){return be[d]},numberListener:function(){var $={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(v){var n=v.keyCode;$[n]||65===n&&y.isCtrlDown(v)||n>=35&&39>=n||(v.shiftKey||48>n||n>57)&&(96>n||n>105)&&v.preventDefault()}}(),preventDefault:function(F){var N=F.target.tagName;("DIV"===N||"CANVAS"===N)&&(F.preventDefault(),F.preventManipulation&&F.preventManipulation())},getWindowInfo:function(){var v=J.documentElement,D=v&&(v.scrollLeft||v.scrollTop)?v:J.body;return{target:D,left:D.scrollLeft,top:D.scrollTop,width:N.innerWidth||D.clientWidth,height:N.innerHeight||D.clientHeight}},isDragging:function(){return!!pl},isLeftButton:function(q){return E?!0:0===q.button},getTouchCount:function(w){return E?w.touches.length:1},isDoubleClick:function(){var B=new Date,P=L,t=new Date,G=L;return function(L){if(wd=new Date,Yp=wd.getTime(),E){var J=L.type,M=J+"_isDoubleClick";if(L[M]===Q){var A=mh(L);"touchstart"===J?(L[M]=P&&el(P,A)<20&&Yp-B.getTime()<500,B=wd,P=A):(L[M]=G&&el(G,A)<20&&Yp-t.getTime()<500,t=wd,G=A)}return L[M]}return 2===L.detail}}(),isShiftDown:function(K){return K?K.shiftKey:Mh["16"]},isCtrlDown:function(F){return F?U?F.metaKey:F.ctrlKey:U?Mh["91"]:Mh["17"]},getClientPoint:function($){return E&&($=sj($)),{x:$.clientX,y:$.clientY}},getPagePoint:function($){return E&&($=sj($)),{x:$.pageX,y:$.pageY}},createObject:function(x,h){var i=new x;for(var H in h){var Q=Yn(H),Y=h[H];i[Q]?(i[Q](Y),"setToolTip"===Q&&i.enableToolTip&&i.enableToolTip()):i[H]=Y}return i},setImage:function(N,b,f,L){var h=arguments.length;4===h?Jm(N,L,b,f):2===h?Un(b)?Jm(N,b):aj[N]=b:1===h&&Jm(N,N)},getImage:function(X,w){var h;if(X==L)return L;if(Pj(X)?h=X:(h=aj[X],X&&h===Q&&(Rj&&Rj[X]||Jm(X,X))),w&&h&&h.tagName){h.colors||(h.colors={});var l=h.colors[w];return l||(l=nk(h,jl(w),h.width,h.height),h.colors[w]=l),l}return h},getId:function(){var g=1;return function(){return++g}}(),callLater:function(w,l,C,I){var m=function(){w.apply(l,C)};return I?x(m,I):N.requestAnimationFrame(m)},clone:function(J){if(!J)return L;if(pr(J))return J.slice(0);if(Pj(J)){var v,m={};for(v in J)m[v]=J[v];return m}return J},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(D,e){if(D===e)return 0;if(D==L&&e!=L)return 1;if(D!=L&&e==L)return-1;if(D==L&&e==L)return 0;var l,E=typeof D,J=typeof e;return E===pp&&J===pp?l=D.localeCompare(e):E===Lf&&J===Lf&&(l=D-e),l===Q&&(l=(""+D).localeCompare(""+e)),l>0?1:0>l?-1:0},getClassMap:function(){return af},getClass:function(M){if(Un(M)){var G,d=af[M];if(!d){G=M.split("."),d=N;for(var B=0;B<G.length;B++)d=d[G[B]];af[M]=d}return d}return M},def:function(L,I,i){var n,W,X,Y=function(){};if(Y.prototype=I.prototype,n=new Y,Un(L)){if(af[L])throw"'"+L+"' alreay defined";X=zo(L),n.getClassName=function(){return L}}else X=L;if(n.constructor=X,n.getClass=function(){return X},n.getSuperClass=function(){return I},i)for(W in i)Kq[W]&&Kq.hasOwnProperty(W)?Kq[W](n,i):n[W]=i[W];X.prototype=n,X.superClass=I.prototype},startAnim:function(){var T=function(p){p.duration&&(p.startTime=xp()),p.timeId=xn(p.tick,L,L,p.interval)};return function(r){return r=je(r),r.easing=r.easing||y.animEasing,r.duration||r.frames||(r.duration=y.animDuration),r.t=0,r.duration?r.interval=0:(r.frame=0,r.interval=r.interval||10),r.tick=function(){if(r.duration){var $=(xp()-r.startTime)/r.duration;$>1&&($=1),r.t=$,r.action(r.easing($),$),1===$?r.stop():r._isPaused||(r.timeId=xn(r.tick))}else r.frame++,$=r.t=r.frame/r.frames,r.action(r.easing($),$),r.frame<r.frames?r._isPaused||(r.timeId=xn(r.tick,L,L,r.interval)):r.stop()},r.resume=function(){r._isPaused&&(delete r._isPaused,r.duration?r.t<1&&(r.startTime=xp()-r.duration*r.t,r.timeId=xn(r.tick)):r.frame<r.frames&&(r.timeId=xn(r.tick,L,L,r.interval)))},r.pause=function(){r._isPaused=!0},r.stop=function(X){r.isRunning()&&(r.duration?r.t<1&&X&&(r.t=1,r.action(r.easing(1))):r.frame<r.frames&&X&&(r.frame=r.frames,r.action(r.easing(1))),r._37o&&r._37o(),r.finishFunc&&r.finishFunc(),hg(r.timeId,!r.duration),delete r.timeId)},r.isRunning=function(){return r.timeId!=L},r.delay?xn(T,L,[r],r.delay):T(r),r}}(),getTextSize:function(){var V={},w=J?ll().getContext("2d"):L;return function(o,J){w.font=o?o:Cl;var B=V[w.font];return B||(B=2*w.measureText("e").width+4,V[w.font]=B),{width:w.measureText(J).width+4,height:B}}}(),drawText:function(V,P,G,U,t,J,o,z,K,k){if(P!=L){var $=Ki(G,P),M={};M.y=k&&k!==yc?k===Tg?J+$.height/2:J+z-$.height/2:J+z/2,M.x=K&&K!==d?K===S?t+o-$.width/2:t+o/2:t+$.width/2,Rg(V,P,M,G,U)}},getDistance:function(M,g){var r=M.length;return g?3===r?w(K(M[0]-g[0])+K(M[1]-g[1])+K(M[2]-g[2])):2===r?w(K(M[0]-g[0])+K(M[1]-g[1])):M.z===Q?w(K(g.x-M.x)+K(g.y-M.y)):w(K(g.x-M.x)+K(g.y-M.y)+K(g.z-M.z)):3===r?w(K(M[0])+K(M[1])+K(M[2])):2===r?w(K(M[0])+K(M[1])):void 0},brighter:function(U,p){return Ee(U,p?p:40)},darker:function(E,C){return Ee(E,C?C:-40)},unionPoint:function(_,y){if(!_)return L;if(2===arguments.length)return _&&y?{x:g(_.x,y.x),y:g(_.y,y.y),width:Z(_.x-y.x),height:Z(_.y-y.y)}:L;var r=_;if(r._as&&(r=r._as),r.length===Q)return L;var I=r.length;if(0>=I)return L;for(var K=1,p=r[0],Y={x:p.x,y:p.y,width:0,height:0};I>K;K++){p=r[K];var k=g(Y.x,p.x),c=q(Y.x+Y.width,p.x),u=g(Y.y,p.y),F=q(Y.y+Y.height,p.y);Y.x=k,Y.y=u,Y.width=c-k,Y.height=F-u}return Y},unionRect:function(d,Z){if(d&&!Z)return je(d);if(!d&&Z)return je(Z);if(d&&Z){var R={x:g(d.x,Z.x),y:g(d.y,Z.y)};return R.width=q(d.x+d.width,Z.x+Z.width)-R.x,R.height=q(d.y+d.height,Z.y+Z.height)-R.y,R}return L},containsPoint:function(I,M){return!(!I||M.x<I.x||M.y<I.y||M.x>I.x+I.width||M.y>I.y+I.height)},containsRect:function(k,i){if(!k||!i)return!1;var y=i.x,N=i.y,R=i.width,w=i.height,p=k.width,a=k.height;if(0>(p|a|R|w))return!1;var G=k.x,Q=k.y;if(G>y||Q>N)return!1;if(p+=G,R+=y,y>=R){if(p>=G||R>p)return!1}else if(p>=G&&R>p)return!1;if(a+=Q,w+=N,N>=w){if(a>=Q||w>a)return!1}else if(a>=Q&&w>a)return!1;return!0},intersectsRect:function(C,T){if(!C||!T)return!1;var w=T.width,u=T.height,s=C.width,c=C.height;if(0>=s||0>=c||0>=w||0>=u)return!1;var D=T.x,O=T.y,_=C.x,Y=C.y;return s+=_,c+=Y,w+=D,u+=O,s>D&&c>O&&w>_&&u>Y},intersection:function(i,t){if(!i||!t)return L;var $=t.x,K=t.y,e=i.x,z=i.y,F=$,a=K,Z=e,n=z;return F+=t.width,a+=t.height,Z+=i.width,n+=i.height,e>$&&($=e),z>K&&(K=z),F>Z&&(F=Z),a>n&&(a=n),F-=$,a-=K,0>=F||0>=a?L:{x:$,y:K,width:F,height:a}},grow:function(t,r){t.x-=r,t.y-=r,t.width=t.width+2*r,t.height=t.height+2*r},getLogicalPoint:function(h,U,F,p,t,C){var T=U.getBoundingClientRect();return h=E?sj(h):h,{x:(h.clientX-T.left+U.scrollLeft-(F||0))/(t||1),y:(h.clientY-T.top+U.scrollTop-(p||0))/(C||1)}},removeHTML:function(){var i;return function(B){return B&&B.parentNode?i===B?!0:(i=B,B.parentNode.removeChild(B),i=L,!0):!1}}(),getToolTipDiv:function(){if(!ci){ci=cs(),Ap=cs();var X=ci.style;y.baseZIndex!=L&&(X.zIndex=T(y.baseZIndex)+3+""),X.whiteSpace="nowrap",X.color=y.toolTipLabelColor,X.background=y.toolTipBackground,X.font=y.toolTipLabelFont,X.padding="5px",X.boxShadow="0px 0px 3px "+y.toolTipShadowColor}return ci},isToolTipShowing:function(){return ci&&ci.parentNode?!0:Ap&&Ap.parentNode?!0:!1},hideToolTip:function(){Wn(ci),Wn(Ap),Go()},showToolTip:function(T,P){if(!T||P==L)return ec(),void 0;y.getToolTipDiv();var R,X;if(P.html?(P=P.html,R=Ap,Wn(ci)):(R=ci,Wn(Ap)),X=R.style,R.innerHTML=P,R.parentNode||Ah(J.body,R),T.target){T=gd(T);var V=Nk(),s=T.x,G=T.y,g=E?60:12;if(E){var D=R.getBoundingClientRect();X.left=s-D.width/2+Lo,X.top=G-D.height-g<V.top?G+g+Lo:G-D.height-g+Lo}else{X.left=s+g+Lo,X.top=G+g+Lo;var D=R.getBoundingClientRect();D.left+D.width>V.width&&(X.left=s-g-D.width+Lo),D.top+D.height>V.height&&(X.top=G-g-D.height+Lo),D.left<0&&(X.left=s+g+Lo),D.top<0&&(X.top=G+g+Lo)}}else X.left=T.x+Lo,X.top=T.y+Lo;Go()},startDragging:function(j,p){j!==pl&&(pl?E?pl.handleWindowTouchEnd(p):pl.handleWindowMouseUp(p):E?(N.addEventListener(Ji,pm,!1),N.addEventListener(ff,al,!1)):(N.addEventListener(ts,Hi,!1),N.addEventListener(qg,bc,!1)),pl=j)},getImageMap:function(){return aj},toBoundaries:function(H,j,O,N){var c=[];return Kg(H,j,O,N).forEach(function(o){var W=[];o.forEach(function(F){W.push(F.x,F.y)}),c.push(W)}),c},getCurrentKeyCodeMap:function(){return Mh},drawCenterImage:function(z,V,Y,w,T,j,q){var i=Cf(V,T),J=Si(V,T);nj(z,V,u(Y-i/2),u(w-J/2),i,J,T,j,q)},drawStretchImage:function(d,y,N,l,V,$,b,t,p,r){var W,k=Cf(y,t),j=Si(y,t);"uniform"===N?(W=g($/k,b/j),k*=W,j*=W,l+=u(($-k)/2),V+=u((b-j)/2),$=k,b=j):N===Ko&&((k>$||j>b)&&(W=g($/k,b/j),k*=W,j*=W),l+=u(($-k)/2),V+=u((b-j)/2),$=k,b=j),nj(d,y,l,V,$,b,t,p,r)},toCanvas:function(V,o,U,R,J,a,w){V=fr(V,w),o=o||Cf(V,J),U=U||Si(V,J);var c=ll();bk(c,o,U,1);var Z=Up(c);return $g(Z,V,R,0,0,o,U,J,a,w),Z.restore(),c},createElement:function(_,Q,y,t){var m=J.createElement(_);return bl(m,Q||z.widgetBorder,2),m.style.font=y?y:Cl,t!=L&&(m.value=t),m},containedInView:function(I,g){var V=di(g).getBoundingClientRect();return Zd({x:V.left,y:V.top,width:V.width,height:V.height},mh(I))},isIsolating:function(){return qh},setIsolating:function(O){qh=O},toColorData:Kk},!0),Th(m,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var Rr=y.disabledOpacity,Hp=y.toolTipDelay,am=y.devicePixelRatio,Kh=y.autoMakeVisible,Ri=y.autoHideScrollBar,Xc=y.imageGradient,Xe=y.showToolTip,ec=y.hideToolTip,cn=y.dashPattern,gj=y.lineCap,Ur=y.lineJoin,sg=y.labelColor,rc=y.labelSelectColor,Cl=y.labelFont,Lq=y.widgetIndent,em=y.widgetRowHeight,ne=y.widgetHeaderHeight,Tq=y.widgetTitleHeight,Db=y.scrollBarColor,wn=y.scrollBarSize,Ie=y.scrollBarTimeout,Eo=y.scrollBarMinLength,Bh=y.scrollBarInteractiveSize,ke=y.zoomIncrement,ik=y.scrollZoomIncrement,Wk=y.pinchZoomIncrement,Sj=y.zoomMax,hr=y.zoomMin,Ni=y.createObject,tj=y.preventDefault,Nf=y.setImage,fr=y.getImage,zh=y.drawCenterImage,$g=y.drawStretchImage,Ql=y.getId,xn=y.callLater,lr=y.sortFunc,je=y.clone,zo=y.getClass,cd=y.startAnim,Sd=y.brighter,Bb=y.darker,Jf=y.drawText,Ki=y.getTextSize,Eq=y.isLeftButton,Bn=y.getTouchCount,Br=y.isDoubleClick,Af=y.isShiftDown,ee=y.isCtrlDown,mh=y.getClientPoint,gd=y.getPagePoint,el=y.getDistance,xd=y.unionPoint,wb=y.unionRect,Zd=y.containsPoint,dk=y.containsRect,Im=y.intersectsRect,No=y.intersection,Nk=y.getWindowInfo,uc=y.grow,nn=y.getLogicalPoint,Qj=y.startDragging,Wn=y.removeHTML,Dk=y.createElement,Yk=y.segmentResolution,Gf=y.shapeResolution,gp=y.shapeSide,th=y.def,ao=function(w,q,I){th(j+"."+w,q,I)};Th(y,{toolTipLabelColor:sg,toolTipLabelFont:Cl,toolTipBackground:z.toolTipBackground,toolTipShadowColor:Oj},!0);var nd=1e-6,er="undefined"!=typeof Uint16Array?Uint16Array:Array,qp="undefined"!=typeof Float32Array?Float32Array:Array,Of=function(v,E,Z){var T=[v[0]-E[0],v[1]-E[1],v[2]-E[2]];if(Z){var m=el(T);m>0&&(T[0]/=m,T[1]/=m,T[2]/=m)}return T},sh=function(z){return[-z[0],-z[1],-z[2]]},Bd=function(S,w){return 3===S.length?S[0]*w[0]+S[1]*w[1]+S[2]*w[2]:S[0]*w[0]+S[1]*w[1]},Jp=function(){var a=new qp(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},Pb=Jp(),Gh=function(y){var E=new qp(16);return E[0]=y[0],E[1]=y[1],E[2]=y[2],E[3]=y[3],E[4]=y[4],E[5]=y[5],E[6]=y[6],E[7]=y[7],E[8]=y[8],E[9]=y[9],E[10]=y[10],E[11]=y[11],E[12]=y[12],E[13]=y[13],E[14]=y[14],E[15]=y[15],E},xf=function(Z,z){return Z[0]=z[0],Z[1]=z[1],Z[2]=z[2],Z[3]=z[3],Z[4]=z[4],Z[5]=z[5],Z[6]=z[6],Z[7]=z[7],Z[8]=z[8],Z[9]=z[9],Z[10]=z[10],Z[11]=z[11],Z[12]=z[12],Z[13]=z[13],Z[14]=z[14],Z[15]=z[15],Z},cc=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Lh=function(j,s){var u=j[0],S=j[1],_=j[2];return j[0]=s[0]*u+s[4]*S+s[8]*_+s[12],j[1]=s[1]*u+s[5]*S+s[9]*_+s[13],j[2]=s[2]*u+s[6]*S+s[10]*_+s[14],j},Cd=function(V,H){var h=V[0],D=V[1],Z=V[2],a=V[3];return V[0]=H[0]*h+H[4]*D+H[8]*Z+H[12]*a,V[1]=H[1]*h+H[5]*D+H[9]*Z+H[13]*a,V[2]=H[2]*h+H[6]*D+H[10]*Z+H[14]*a,V[3]=H[3]*h+H[7]*D+H[11]*Z+H[15]*a,V},Bj=function(){var l,C,b,k,M=un(ur[1]+ur[7]),T=un(ur[0]+ur[3]-ur[10]),P=un(ur[8]+2),D=function(){return C=b.charAt(l),l+=1,C},Z=function(){var o="";if(C===P)for(;D();){if(C===P)return D(),o;o+=C}else D()},t=function(){for(;C&&" ">=C;)D()},F=function(){var r,m={};if(C===M){if(D(),t(),C===T)return D(),m;for(;C;){if(r=Z(),t(),D(),m[r]=k(),t(),C===T)return D(),m;D(),t()}}};return k=function(){switch(t(),C){case M:return F();default:return Z()}},function(d){if(c={},d){var Y;if(b=d,l=0,C=" ",Y=k(),t(),!C)return Y}}}(),xj=function(q,C){if(C){var t=l(C),b=n(C),w=q[4],I=q[5],B=q[6],s=q[7],d=q[8],K=q[9],k=q[10],T=q[11];q[4]=w*b+d*t,q[5]=I*b+K*t,q[6]=B*b+k*t,q[7]=s*b+T*t,q[8]=d*b-w*t,q[9]=K*b-I*t,q[10]=k*b-B*t,q[11]=T*b-s*t}},zk=function(p,$){if($){var j=l($),B=n($),A=p[0],t=p[1],R=p[2],r=p[3],s=p[8],c=p[9],H=p[10],m=p[11];p[0]=A*B-s*j,p[1]=t*B-c*j,p[2]=R*B-H*j,p[3]=r*B-m*j,p[8]=A*j+s*B,p[9]=t*j+c*B,p[10]=R*j+H*B,p[11]=r*j+m*B}},Yo=function(K,H){if(H){var o=l(H),I=n(H),G=K[0],r=K[1],v=K[2],j=K[3],W=K[4],q=K[5],U=K[6],R=K[7];K[0]=G*I+W*o,K[1]=r*I+q*o,K[2]=v*I+U*o,K[3]=j*I+R*o,K[4]=W*I-G*o,K[5]=q*I-r*o,K[6]=U*I-v*o,K[7]=R*I-j*o}},Uq=function(h,x,m){return rl(L,m===!1?L:h.s3(),h.r3(),h.getRotationMode(),h.p3(),L,x)},rl=function(r,H,U,p,K,y,T){return y||(y=Jp()),K&&ag(y,K),md(y,U,p),T&&gg(y,y,T),H&&Ed(y,H),r&&gg(y,y,r),y},Tp=function(R,Q,n){Q=T(Q),n=T(n);var m=this;m.g=R,m._84O=Q,m._85O=n,m._70I=!0,m.F=0,m._83O=Q+n,m.pen={x:0,y:0}},ic="lineDashOffset",go="setLineDash",$r=function(M){for(var L in M)1===L.length&&(ic=M[L]);return L?1:0},_n=function(u,R,w){return yg(R)?u:u[go]?(u[go](R),w&&(u.lineDashOffset=w),u):new Tp(u,R[0],R.length>1?R[1]:R[0])},Wp=function(E,G){!yg(G)&&E[go]&&(E[go](Vd),E.lineDashOffset=0)};th(Tp,e,{_69I:6,moveTo:function(B,s){var X=this,T=X.pen;T.x=B,T.y=s,X.g.moveTo(B,s),X.start||(X.start={x:B,y:s})},lineTo:function(Q,t){var T=this,U=T.pen,I=Q-U.x,y=t-U.y,Z=V(y,I),X=n(Z),u=l(Z),G=T._23O(U.x,U.y,Q,t),_=T._85O,w=T._84O,h=T._83O;if(T.F){if(T.F>G)return T._70I?T._72I(Q,t):T.moveTo(Q,t),T.F-=G,void 0;if(T._70I?T._72I(U.x+X*T.F,U.y+u*T.F):T.moveTo(U.x+X*T.F,U.y+u*T.F),G-=T.F,T.F=0,T._70I=!T._70I,!G)return}var g=s(G/h);if(g){for(var r=X*w,L=u*w,M=X*_,x=u*_,j=0;g>j;j++)T._70I?(T._72I(U.x+r,U.y+L),T.moveTo(U.x+M,U.y+x)):(T.moveTo(U.x+M,U.y+x),T._72I(U.x+r,U.y+L));G-=h*g}T._70I?G>w?(T._72I(U.x+X*w,U.y+u*w),T.moveTo(Q,t),T.F=_-(G-w),T._70I=!1):(T._72I(Q,t),G===w?(T.F=0,T._70I=!T._70I):(T.F=w-G,T.moveTo(Q,t))):G>_?(T.moveTo(U.x+X*_,U.y+u*_),T._72I(Q,t),T.F=w-(G-_),T._70I=!0):(T.moveTo(Q,t),G===_?(T.F=0,T._70I=!T._70I):T.F=_-G)},quadraticCurveTo:function(h,Y,c,f){var O,T=this,i=T.pen,X=i.x,p=i.y,A=T._22O(X,p,h,Y,c,f),u=0,Q=0,R=T._85O,j=T._84O;if(T.F){if(T.F>A)return T._70I?T._71I(h,Y,c,f):T.moveTo(c,f),T.F-=A,void 0;if(u=T.F/A,O=T._20O(X,p,h,Y,c,f,u),T._70I?T._71I(O[2],O[3],O[4],O[5]):T.moveTo(O[4],O[5]),T.F=0,T._70I=!T._70I,!A)return}var l=A-A*u,e=s(l/T._83O),k=j/A,U=R/A;if(e)for(var b=0;e>b;b++)T._70I?(Q=u+k,O=T._21O(X,p,h,Y,c,f,u,Q),T._71I(O[2],O[3],O[4],O[5]),u=Q,Q=u+U,O=T._21O(X,p,h,Y,c,f,u,Q),T.moveTo(O[4],O[5])):(Q=u+U,O=T._21O(X,p,h,Y,c,f,u,Q),T.moveTo(O[4],O[5]),u=Q,Q=u+k,O=T._21O(X,p,h,Y,c,f,u,Q),T._71I(O[2],O[3],O[4],O[5])),u=Q;l=A-A*u,T._70I?l>j?(Q=u+k,O=T._21O(X,p,h,Y,c,f,u,Q),T._71I(O[2],O[3],O[4],O[5]),T.moveTo(c,f),T.F=R-(l-j),T._70I=!1):(O=T._19O(X,p,h,Y,c,f,u),T._71I(O[2],O[3],O[4],O[5]),A===j?(T.F=0,T._70I=!T._70I):(T.F=j-l,T.moveTo(c,f))):l>R?(Q=u+U,O=T._21O(X,p,h,Y,c,f,u,Q),T.moveTo(O[4],O[5]),O=T._19O(X,p,h,Y,c,f,Q),T._71I(O[2],O[3],O[4],O[5]),T.F=j-(l-R),T._70I=!0):(T.moveTo(c,f),l===R?(T.F=0,T._70I=!T._70I):T.F=R-l)},bezierCurveTo:function(){var b=arguments;this.pen={x:b[4],y:b[5]},this.g.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5])},arc:function(U,D,$,G,c,m){m||(G=-G,c=-c),Dp(this,U,D,G,c-G,$,$,!1)},rect:function(L,E,N,W){var H=this;H.pen={x:L,y:E},H.moveTo(L,E),H.lineTo(L,E+W),H.lineTo(L+N,E+W),H.lineTo(L+N,E),H.lineTo(L,E)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(g,o,I,X){var P=I-g,u=X-o;return w(P*P+u*u)},_22O:function(e,_,c,x,h,o,L){for(var S,B,l,R,j,Z,i,m=0,F=e,r=_,w=L>0?L:this._69I,H=1;w>=H;H++)l=H/w,R=1-l,j=R*R,Z=2*l*R,i=l*l,S=j*e+Z*c+i*h,B=j*_+Z*x+i*o,m+=this._23O(F,r,S,B),F=S,r=B;return m},_21O:function(o,N,V,c,O,A,y,M){var p=this;if(0===y)return p._20O(o,N,V,c,O,A,M);if(1===M)return p._19O(o,N,V,c,O,A,y);var X=p._20O(o,N,V,c,O,A,M);return X.push(y/M),p._19O.apply(p,X)},_20O:function(Z,b,y,z,W,X,g){if(1!==g){var H=y+(W-y)*g,h=z+(X-z)*g;y=Z+(y-Z)*g,z=b+(z-b)*g,W=y+(H-y)*g,X=z+(h-z)*g}return[Z,b,y,z,W,X]},_19O:function(u,f,y,i,x,k,I){if(1!==I){var w=u+(y-u)*I,U=f+(i-f)*I;y+=(x-y)*I,i+=(k-i)*I,u=w+(y-w)*I,f=U+(i-U)*I}return[u,f,y,i,x,k]},_72I:function(J,k){var g=this.pen;(J!==g.x||k!==g.y)&&(g.x=J,g.y=k,this.g.lineTo(J,k))},_71I:function(k,Y,G,s){var p=this.pen;(k!==G||Y!==s||G!==p.x||s!==p.y)&&(p.x=G,p.y=s,this.g.quadraticCurveTo(k,Y,G,s))}});var eg=z.chart,dq=y.compStack=[],Nb=/^style@/,Zi=/^attr@/,Ro=/^field@/,Cf=function(d,Y){return d?ki(d.width,Y):0},Si=function(Z,G){return Z?ki(Z.height,G):0},ki=function(D,S,x){if(!D||!D.func)return D;var n,y=D.func,Y=D.value;return n=oh(y)?y(S,x):S?Nb.test(y)?S.s(y.slice(6)):Zi.test(y)?S.a(y.slice(5)):Ro.test(y)?S[y.slice(6)]:S[y]?S[y](x):Y:Y,Y!==Q&&n==L?Y:n},nj=y.drawImage=function(){var d,G,Y,a,f,x=function(o,P,g){var l=o[P];return l&&l.func?(l=ki(l,G,Y),g&&(l=g(l))):g&&(l=o[P]=g(l)),l},W=function(q,F){var n=x(q,F);if(f&&n){var O=jl(f);return n=Kk(n),"rgba("+s(n[0]*O[0])+","+s(n[1]*O[1])+","+s(n[2]*O[2])+","+n[3]+")"}return n},Q=function(x){if(pr(x)){for(var I=new Rb,q=x.length,s=0;q>s;s+=2)I.add({x:x[s],y:x[s+1]});x=I}return x},m=function(B,L){var e=x(B,rp);if(pr(e)){var U=e.length,$=x(B,"relative"),T=L.width,l=L.height;if(4===U)e={x:e[0],y:e[1],width:e[2],height:e[3]},$&&(e.x*=T,e.y*=l,e.width*=T,e.height*=l);else if(3===U){var j=e[0];e={width:e[1],height:e[2]},$&&(e.width*=T,e.height*=l),j=wo(j,L,e),e.x=j.x-e.width/2,e.y=j.y-e.height/2}var g=x(B,"offsetX");g&&(e.x+=g),g=x(B,"offsetY"),g&&(e.y+=g)}return e},A=function(s){return pr(s)?new Rb(s):s},H=function(O,W){if(O){var p=W.x+W.width/2,j=W.y+W.height/2;d.save(),Ei(d,p,j),vn(d,O),Ei(d,-p,-j)}},b=function(z){z&&d.restore()},h=function(M,n,w){var P=x(M,sn,Q),$=x(M,gf),e=n===sq,D=L;if(!w&&e&&(w=M.unionRect,w||(w=xd(P),M.points.func||(M.unionRect=w)),D=w),w){e?D||(D=M.unionRect,D||(D=xd(P),M.points.func||(M.unionRect=D))):D=w;var Y=Bs(D,w);if(Y)H($,D);else{var o=D.width,v=D.height,s=w.width,X=w.height,U=s/o,j=X/v;d.save(),Ei(d,w.x+s/2,w.y+X/2),d.scale(U,j),$&&vn(d,$),Ei(d,-D.x-o/2,-D.y-v/2)}var T,z,c,l,K=x(M,"borderPattern"),G=_n(d,K),Z=W(M,"background"),q=fr(x(M,"repeatImage"),f),R=W(M,"borderColor"),g=x(M,"borderWidth"),S=x(M,"segments",A),F=x(M,"gradient"),J=W(M,"gradientColor"),y=x(M,"border3d"),t=x(M,"border3dColor"),O=x(M,"border3dAccuracy"),i=x(M,"closePath"),k=d.lineJoin,u=d.lineCap;if(d.lineJoin=x(M,"borderJoin")||Ur,d.lineCap=x(M,"borderCap")||gj,e?Z||q?(q?To(d,q):Sh(d,Z,F,J,D),vf(d,P,S,i),d.fill(),G!==d&&vf(G,P,S,i)):vf(G,P,S,i):("roundRect"===n?T=x(M,"cornerRadius"):"polygon"===n?T=x(M,"polygonSide"):"arc"===n&&(T=x(M,"arcFrom"),z=x(M,"arcTo"),c=x(M,"arcClose"),l=x(M,"arcOval")),Z||q?(q?To(d,q):Sh(d,Z,F,J,D),bd(d,n,D,T,z,c,l),d.fill(),d!==G&&bd(G,n,D,T,z,c,l)):bd(G,n,D,T,z,c,l)),g&&R&&(d.lineWidth=g,d.strokeStyle=R,d.stroke(),y&&Vb(d,R,t,g,a,O)),Wp(d,K),x(M,"dash")){var V=x(M,"dashWidth")||g;if(V>0){K=x(M,"dashPattern")||cn;var G=_n(d,K,x(M,"dashOffset")),B=x(M,"dashColor")||yk;G!==d&&(e?vf(G,P,S,i):bd(G,n,D,T,z,c,l)),d.strokeStyle=B,d.lineWidth=V,d.stroke(),x(M,"dash3d")&&Vb(d,B,x(M,"dash3dColor"),V,a,x(M,"dash3dAccuracy")),Wp(d,K)}}n===rp&&Uk(d,Z,x(M,"depth"),D),d.lineJoin=k,d.lineCap=u,Y?b($):d.restore()}},P=function(X,n){var y=f,N=f||x(X,Nc),p=fr(x(X,"name"),N);p&&($g(d,p,x(X,"stretch"),n.x,n.y,n.width,n.height,G,Y,N),f=y)},F=function(H,C){var v=x(H,"text");v!=L&&Jf(d,v,x(H,"font"),W(H,Nc),C.x,C.y,C.width,C.height,x(H,"align"),x(H,"vAlign"))},r=function(J,Y){dp(d,W(J,Nc),Y.x,Y.y,Y.width,Y.height,x(J,"width"))},v=function(Z,K){var f=x(Z,Xk),v=0;if(f&&(f.forEach(function(Z){v+=Z}),v>0)){for(var p=x(Z,"colors")||eg,$=x(Z,"startAngle")||0,B=x(Z,"hollow"),o=x(Z,zm),C=x(Z,oo),M=x(Z,An),t=o?new Rb:L,T=K.x,k=K.y,h=K.width,A=K.height,y=T+h/2,e=k+A/2,i=g(h,A)/2,j=0,u=0;u<f.length;u++){var Y=f[u],c=O*Y/v,W=$+c;if(d.fillStyle=p[j++],j===p.length&&(j=0),d.beginPath(),B){var R=y+n($)*i/2,b=e+l($)*i/2,z=y+n(W)*i,U=e+l(W)*i;d.moveTo(R,b),d.arc(y,e,i/2,$,W,!1),d.lineTo(z,U),d.arc(y,e,i,W,$,!0)}else d.moveTo(y,e),d.arc(y,e,i,W,$,!0);t&&(c=($+W)/2,t.add({text:oh(o)?o(Y,u,v,G):Y,x:y+.75*n(c)*i,y:e+.75*l(c)*i})),d.closePath(),d.fill(),$=W}t&&t.each(function(q){Jf(d,q.text,C,M,q.x,q.y,0,0,qs)})}},E=function(y,i){var z=x(y,ns);if(z&&z.length>0){var s=z.length,b=x(y,zm),D=x(y,oo),I=x(y,An),J=b?new Rb:L,U=x(y,"minValue")||0,A=x(y,"maxValue");if(A==L&&(A=0,z.forEach(function(t){t.values.forEach(function(v){A=q(A,v)})})),U===A)return;for(var r=i.height/(A-U),$=i.y+A*r,T=x(z[0],Xk).length,M=i.width/(3*T+1),o=2*M/s,g=0,h=0;s>h;h++)for(var X=z[h],j=x(X,Nc),v=x(X,"colors"),B=x(X,Xk),p=0;T>p;p++){v?d.fillStyle=v[p]:j?d.fillStyle=j:(d.fillStyle=eg[g++],g===eg.length&&(g=0));var Q=B[p],w=Q*r,S=i.x+(1+3*p)*M+h*o;if(bf(d,S,$-w,o,w),J){var e=oh(b)?b(Q,p,X,G):Q,f=Ki(D,e).height;J.add({x:S,y:$-w-f,width:o,height:f,text:e})}}J&&J.each(function(J){Jf(d,J.text,D,I,J.x,J.y,J.width,J.height,qs)})}},U=function(Z,z){var U=x(Z,ns);if(U&&U.length>0){var f=U.length,F=x(U[0],Xk).length,X=z.width/(3*F+1),K=0,w=x(Z,"maxValue"),m=x(Z,zm),h=x(Z,oo),V=x(Z,An),R=m?new Rb:L;if(w==L){w=0;for(var p=0;F>p;p++){for(var v=0,B=0;f>B;B++)v+=x(U[B],Xk)[p];w=q(w,v)}}if(w>0){for(var p=0;F>p;p++)for(var b=z.y+z.height,B=0;f>B;B++){var M=U[B],E=x(M,Nc),t=x(M,Xk)[p],Y=t/w*z.height;E?d.fillStyle=E:(d.fillStyle=eg[K++],K===eg.length&&(K=0)),b-=Y;var k={x:z.x+(1+3*p)*X,y:b,width:2*X,height:Y};bf(d,k.x,k.y,k.width,k.height),R&&(k.text=oh(m)?m(t,p,M,G):t,R.add(k))}R&&R.each(function(R){Jf(d,R.text,h,V,R.x,R.y,R.width,R.height,qs)})}}},M=function(m,U){var M=x(m,ns);if(M&&M.length>0){for(var y=M.length,l=x(M[0],Xk).length,T=U.width/(3*l+1),A=0,n=x(m,zm),q=x(m,oo),X=x(m,An),Z=n?new Rb:L,v=0;l>v;v++){for(var W=0,e=0;y>e;e++)W+=x(M[e],Xk)[v];if(W>0){var t=U.y+U.height;for(e=0;y>e;e++){var r=M[e],F=x(r,Nc),Q=x(r,Xk)[v],D=Q/W*U.height;F?d.fillStyle=F:(d.fillStyle=eg[A++],A===eg.length&&(A=0)),t-=D;var N={x:U.x+(1+3*v)*T,y:t,width:2*T,height:D};bf(d,N.x,N.y,N.width,N.height),Z&&(N.text=oh(n)?n(Q,v,r,G):Q,Z.add(N))}}}Z&&Z.each(function($){Jf(d,$.text,q,X,$.x,$.y,$.width,$.height,qs)})}},$=function(g,M){var K=x(g,ns);if(K&&K.length>0){var S=K.length,p=x(g,"minValue")||0,Y=x(g,"maxValue");if(Y==L&&(Y=0,K.forEach(function(r){r.values.forEach(function(j){Y=q(Y,j)})})),p===Y)return;for(var z=M.height/(Y-p),I=M.y+Y*z,t=x(K[0],Xk).length,c=M.width/(3*t+1),E=0,l=x(g,"lineWidth")||2,$=x(g,"line3d"),C=x(g,"linePoint"),X=x(g,zm),R=x(g,oo),y=x(g,An),f=0;S>f;f++){var u=K[f],V=x(u,Nc),_=x(u,Xk);V?d.strokeStyle=V:(V=d.strokeStyle=eg[E++],E===eg.length&&(E=0)),d.beginPath();for(var U=0;t>U;U++){var F=M.x+(2+3*U)*c,i=I-_[U]*z;0===U?d.moveTo(F,i):d.lineTo(F,i)}if(d.lineWidth=l,d.stroke(),$&&Vb(d,V,L,l,a),C||X){var W,A=l/2+2;for(U=0;t>U;U++){var P=_[U];if(F=M.x+(2+3*U)*c,i=I-P*z,oh(C)?C(d,F,i,V,U,u,G):C&&(d.fillStyle=V,d.beginPath(),d.arc(F,i,A,0,O,!0),d.fill()),oh(X)?W=X(P,U,u,G):X&&(W=P),W){var r=Ki(R,W).height,e=d.shadowBlur;if(e){var Q=d.shadowOffsetX,D=d.shadowOffsetY,j=d.shadowColor;d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor=L}Jf(d,W,R,y,F,i-r-A+2,0,r,qs),e&&(d.shadowOffsetX=Q,d.shadowOffsetY=D,d.shadowColor=j,d.shadowBlur=e)}}}}}},S={border:r,image:P,text:F,pieChart:v,columnChart:E,stackedColumnChart:U,percentageColumnChart:M,lineChart:$};return function($,j,q,X,I,W,A,v,n){if(j&&I&&W){if(d=$,G=A,Y=v,a=Y?Y._zoom?Y._zoom:1:1,f=n,j.tagName)return d.drawImage(j,q,X,I,W),void 0;if(x(j,"visible")!==!1){f||(f=ki(j.color,G,Y));var e=Cf(j,G),K=Si(j,G),o={x:0,y:0,width:e,height:K},Z=x(j,"clip"),c=x(j,"opacity");d.save(),Ei(d,q,X),(e!==I||K!==W)&&d.scale(I/e,W/K),Z&&(oh(Z)?Z(d,e,K,G,Y,j):(d.beginPath(),d.rect(0,0,e,K),d.clip())),c!=L&&(d.globalAlpha*=c),x(j,"comps").forEach(function(t){if(x(t,Qi)!==!1){dq.splice(0,0,t);var O=x(t,"opacity"),e=x(t,"shadow"),g=x(t,"type"),n=m(t,o);if(O!=L){var C=d.globalAlpha;
d.globalAlpha*=O}if(e){var k=d.shadowOffsetX,D=d.shadowOffsetY,u=d.shadowBlur,J=d.shadowColor,R=x(t,"shadowOffsetX"),I=x(t,"shadowOffsetY"),T=x(t,"shadowBlur"),P=x(t,"shadowColor");d.shadowOffsetX=R==L?3:R,d.shadowOffsetY=I==L?3:I,d.shadowBlur=T==L?6:T,d.shadowColor=P||Oj}if(oh(g))g(d,n,t,G,Y);else if(y.getCompType(g))y.getCompType(g)(d,n,t,G,Y);else if(Be[g]||g===sq)h(t,g,n);else if(S[g]&&n){var X=x(t,gf);H(X,n),S[g](t,n),b(X)}e&&(d.shadowOffsetX=k,d.shadowOffsetY=D,d.shadowBlur=u,d.shadowColor=J),O!=L&&(d.globalAlpha=C),dq.splice(0,1)}}),d.restore()}}}}();y.getCurrentComp=function(){return dq[0]},y.getParentComp=function(){return dq[1]},y.getInternal=function(){return{isEnter:oq,isEsc:Kp,isSpace:Fe,isLeft:Jl,isUp:xr,isRight:rk,isDown:wc,addMethod:Th,superCall:ml,toPointsArray:Kg,translateAndScale:mk,appendArray:yl,createWorldMatrix:rl,vec3TransformMat4:Lh,setCanvas:bk,createDiv:cs,createCanvas:ll,createImage:_l,initContext:Up,layout:tg,fillRect:bf,Mat:vs,drawBorder:dp,isString:Un,setBorder:bl,getPropertyValue:hc,setPropertyValue:Oo,drawVerticalLine:qb,draw3DRect:Uk,getPinchDist:ri,isSameRect:Bs,getPosition:wo,intersectionLineRect:Fc,getNodeRect:Ik,getImageWidth:Cf,getImageHeight:Si,formatNumber:Zp,initItemElement:jj,drawPoints:vf,createG2:_n,closePopup:Pl,isH:bg,createAnim:Ub,createNormalMatrix:ob,createNormals:$q,toFloatArray:vi,glMV:Rm,batchShape:Vf,createNodeMatrix:Uq,getFaceInfo:Xi,transformAppend:Nj,drawFaceInfo:db,to3dPointsArray:Bp,setGLDebugMode:function(R){xc=R},cube:function(){return{vs:rj,is:$k,uv:jf}},ui:function(){return{DataUI:hd,NodeUI:Gk,EdgeUI:me,GroupUI:Hk,ShapeUI:Xd,GridUI:rm,Data3dUI:qk,Node3dUI:Cc,Shape3dUI:Io}},getInternalVersion:function(){return"U2FsdGVkX1+Wu1tkcsFMwG5KObgtJDpifCUPQegPmqaeP6a3p6DCBNRDuMxy6YUd"},getDragger:function(){return pl},addMSMap:function(H){Th(Kq,H)},k:I}},function(V){function d(A,B){A!=L&&(B==L&&pp!=typeof A?this._54O(A,256):this._54O(A,B))}function Z(){return new d(L)}function D(L,h,Z,q,t,a){for(;--a>=0;){var U=h*this[L++]+Z[q]+t;t=s(U/67108864),Z[q++]=67108863&U}return t}function B(_,f,i,C,Y,X){for(var n=32767&f,V=f>>15;--X>=0;){var Z=32767&this[_],U=this[_++]>>15,J=V*Z+U*n;Z=n*Z+((32767&J)<<15)+i[C]+(1073741823&Y),Y=(Z>>>30)+(J>>>15)+V*U+(Y>>>30),i[C++]=1073741823&Z}return Y}function P(F,r,S,k,A,z){for(var l=16383&r,N=r>>14;--z>=0;){var V=16383&this[F],U=this[F++]>>14,Q=N*V+U*l;V=l*V+((16383&Q)<<14)+S[k]+A,A=(V>>28)+(Q>>14)+N*U,S[k++]=268435455&V}return A}function e(A){return Qg.charAt(A)}function m(B,b){var D=Nr[B.charCodeAt(b)];return D==L?-1:D}function H(U){for(var j=this.t-1;j>=0;--j)U[j]=this[j];U.t=this.t,U.s=this.s}function i(m){this.t=1,this.s=0>m?-1:0,m>0?this[0]=m:-1>m?this[0]=m+this.DV:this.t=0}function F(N){var x=Z();return x._58O(N),x}function Y(h,p){var H,$=this;if(16==p)H=4;else if(8==p)H=3;else if(256==p)H=8;else if(2==p)H=1;else if(32==p)H=5;else{if(4!=p)return $.fromRadix(h,p),void 0;H=2}$.t=0,$.s=0;for(var L=h.length,n=!1,c=0;--L>=0;){var Z=8==H?255&h[L]:m(h,L);0>Z?"-"==h.charAt(L)&&(n=!0):(n=!1,0==c?$[$.t++]=Z:c+H>$.DB?($[$.t-1]|=(Z&(1<<$.DB-c)-1)<<c,$[$.t++]=Z>>$.DB-c):$[$.t-1]|=Z<<c,c+=H,c>=$.DB&&(c-=$.DB))}8==H&&0!=(128&h[0])&&($.s=-1,c>0&&($[$.t-1]|=(1<<$.DB-c)-1<<c)),$._57O(),n&&d.ZERO._78O($,$)}function J(){for(var j=this,n=j.s&j.DM;j.t>0&&j[j.t-1]==n;)--j.t}function N(h){var v=this;if(v.s<0)return"-"+v._85O()[hp](h);var Y;if(16==h)Y=4;else if(8==h)Y=3;else if(2==h)Y=1;else if(32==h)Y=5;else{if(4!=h)return v.toRadix(h);Y=2}var K,r=(1<<Y)-1,m=!1,Q="",S=v.t,q=v.DB-S*v.DB%Y;if(S-->0)for(q<v.DB&&(K=v[S]>>q)>0&&(m=!0,Q=e(K));S>=0;)Y>q?(K=(v[S]&(1<<q)-1)<<Y-q,K|=v[--S]>>(q+=v.DB-Y)):(K=v[S]>>(q-=Y)&r,0>=q&&(q+=v.DB,--S)),K>0&&(m=!0),m&&(Q+=e(K));return m?Q:"0"}function u(){var p=Z();return d.ZERO._78O(this,p),p}function G(){return this.s<0?this._85O():this}function h(x){var Q=this,q=Q.s-x.s;if(0!=q)return q;var P=Q.t;if(q=P-x.t,0!=q)return Q.s<0?-q:q;for(;--P>=0;)if(0!=(q=Q[P]-x[P]))return q;return 0}function C(Y){var W,c=1;return 0!=(W=Y>>>16)&&(Y=W,c+=16),0!=(W=Y>>8)&&(Y=W,c+=8),0!=(W=Y>>4)&&(Y=W,c+=4),0!=(W=Y>>2)&&(Y=W,c+=2),0!=(W=Y>>1)&&(Y=W,c+=1),c}function c(){var P=this;return P.t<=0?0:P.DB*(P.t-1)+C(P[P.t-1]^P.s&P.DM)}function X(S,p){var J;for(J=this.t-1;J>=0;--J)p[J+S]=this[J];for(J=S-1;J>=0;--J)p[J]=0;p.t=this.t+S,p.s=this.s}function x($,P){for(var p=$;p<this.t;++p)P[p-$]=this[p];P.t=q(this.t-$,0),P.s=this.s}function E(Y,f){var l,V=this,O=Y%V.DB,C=V.DB-O,$=(1<<C)-1,P=s(Y/V.DB),X=V.s<<O&V.DM;for(l=V.t-1;l>=0;--l)f[l+P+1]=V[l]>>C|X,X=(V[l]&$)<<O;for(l=P-1;l>=0;--l)f[l]=0;f[P]=X,f.t=V.t+P+1,f.s=V.s,f._57O()}function K(I,J){var g=this;J.s=g.s;var x=s(I/g.DB);if(x>=g.t)return J.t=0,void 0;var E=I%g.DB,j=g.DB-E,V=(1<<E)-1;J[0]=g[x]>>E;for(var Y=x+1;Y<g.t;++Y)J[Y-x-1]|=(g[Y]&V)<<j,J[Y-x]=g[Y]>>E;E>0&&(J[g.t-x-1]|=(g.s&V)<<j),J.t=g.t-x,J._57O()}function R(H,K){for(var C=this,V=0,T=0,q=g(H.t,C.t);q>V;)T+=C[V]-H[V],K[V++]=T&C.DM,T>>=C.DB;if(H.t<C.t){for(T-=H.s;V<C.t;)T+=C[V],K[V++]=T&C.DM,T>>=C.DB;T+=C.s}else{for(T+=C.s;V<H.t;)T-=H[V],K[V++]=T&C.DM,T>>=C.DB;T-=H.s}K.s=0>T?-1:0,-1>T?K[V++]=C.DV+T:T>0&&(K[V++]=T),K.t=V,K._57O()}function o(i,J){var l=this.abs(),x=i.abs(),V=l.t;for(J.t=V+x.t;--V>=0;)J[V]=0;for(V=0;V<x.t;++V)J[V+l.t]=l.am(0,x[V],J,V,0,l.t);J.s=0,J._57O(),this.s!=i.s&&d.ZERO._78O(J,J)}function M(Y){for(var w=this.abs(),b=Y.t=2*w.t;--b>=0;)Y[b]=0;for(b=0;b<w.t-1;++b){var H=w.am(b,w[b],Y,2*b,0,1);(Y[b+w.t]+=w.am(b+1,2*w[b],Y,2*b+1,H,w.t-b-1))>=w.DV&&(Y[b+w.t]-=w.DV,Y[b+w.t+1]=1)}Y.t>0&&(Y[Y.t-1]+=w.am(b,w[b],Y,2*b,0,1)),Y.s=0,Y._57O()}function z(u,M,l){var F=u.abs(),f=this;if(!(F.t<=0)){var W=f.abs();if(W.t<F.t)return M!=L&&M._58O(0),l!=L&&f._77O(l),void 0;l==L&&(l=Z());var k=Z(),I=f.s,$=u.s,N=f.DB-C(F[F.t-1]);N>0?(F._44O(N,k),W._44O(N,l)):(F._77O(k),W._77O(l));var B=k.t,z=k[B-1];if(0!=z){var r=z*(1<<f.F1)+(B>1?k[B-2]>>f.F2:0),K=f.FV/r,h=(1<<f.F1)/r,e=1<<f.F2,T=l.t,V=T-B,n=M==L?Z():M;for(k._59O(V,n),l._52O(n)>=0&&(l[l.t++]=1,l._78O(n,l)),d.ONE._59O(B,n),n._78O(k,k);k.t<B;)k[k.t++]=0;for(;--V>=0;){var g=l[--T]==z?f.DM:s(l[T]*K+(l[T-1]+e)*h);if((l[T]+=k.am(0,g,l,V,0,B))<g)for(k._59O(V,n),l._78O(n,l);l[T]<--g;)l._78O(n,l)}M!=L&&(l._45O(B,M),I!=$&&d.ZERO._78O(M,M)),l.t=B,l._57O(),N>0&&l._46O(N,l),0>I&&d.ZERO._78O(l,l)}}}function $(G){var w=Z();return this.abs()._49O(G,L,w),this.s<0&&w._52O(d.ZERO)>0&&G._78O(w,w),w}function t(W){this.m=W}function r(Q){return Q.s<0||Q._52O(this.m)>=0?Q.mod(this.m):Q}function U(T){return T}function v(P){P._49O(this.m,L,P)}function W(b,C,h){b._47O(C,h),this._74O(h)}function a(y,V){y._48O(V),this._74O(V)}function _(){if(this.t<1)return 0;var d=this[0];if(0==(1&d))return 0;var z=3&d;return z=15&z*(2-(15&d)*z),z=255&z*(2-(255&d)*z),z=65535&z*(2-(65535&(65535&d)*z)),z=z*(2-d*z%this.DV)%this.DV,z>0?this.DV-z:-z}function S(Y){var d=this;d.m=Y,d.mp=Y._50O(),d.mpl=32767&d.mp,d.mph=d.mp>>15,d.um=(1<<Y.DB-15)-1,d.mt2=2*Y.t}function Q(f){var S=Z();return f.abs()._59O(this.m.t,S),S._49O(this.m,L,S),f.s<0&&S._52O(d.ZERO)>0&&this.m._78O(S,S),S}function y(O){var h=Z();return O._77O(h),this._74O(h),h}function p(U){for(var K=this;U.t<=K.mt2;)U[U.t++]=0;for(var q=0;q<K.m.t;++q){var l=32767&U[q],B=l*K.mpl+((l*K.mph+(U[q]>>15)*K.mpl&K.um)<<15)&U.DM;for(l=q+K.m.t,U[l]+=K.m.am(0,B,U,q,0,K.m.t);U[l]>=U.DV;)U[l]-=U.DV,U[++l]++}U._57O(),U._45O(K.m.t,U),U._52O(K.m)>=0&&U._78O(K.m,U)}function Sh(w,L){w._48O(L),this._74O(L)}function eg(Q,A,c){Q._47O(A,c),this._74O(c)}function tk(){return 0==(this.t>0?1&this[0]:this.s)}function $b(r,h){if(r>4294967295||1>r)return d.ONE;var L=Z(),b=Z(),E=h._73O(this),Y=C(r)-1;for(E._77O(L);--Y>=0;)if(h._76O(L,b),(r&1<<Y)>0)h._75O(b,E,L);else{var f=L;L=b,b=f}return h.revert(L)}function Hj(q,x){var z;return z=256>q||x._51O()?new t(x):new S(x),this.exp(q,z)}function Vd(){var I=this;if(I.s<0){if(1==I.t)return I[0]-I.DV;if(0==I.t)return-1}else{if(1==I.t)return I[0];if(0==I.t)return 0}return(I[1]&(1<<32-I.DB)-1)<<I.DB|I[0]}function Qn(h,g){return new d(h,g)}function fh(){var j=this;j.n=L,j.e=0,j.d=L,j.p=L,j.q=L,j.dmp1=L,j.dmq1=L,j._10A=L}function Cn(L){return L._53O(this.e,this.n)}function vo(n){var F,u,b,h="",R=0;for(F=0;F<n.length&&n.charAt(F)!=Qr;++F)b=nh.indexOf(n.charAt(F)),0>b||(0==R?(h+=e(b>>2),u=3&b,R=1):1==R?(h+=e(u<<2|b>>4),u=15&b,R=2):2==R?(h+=e(u),h+=e(b>>2),u=3&b,R=3):(h+=e(u<<2|b>>4),h+=e(15&b),R=0));return 1==R&&(h+=e(u<<2)),h}function Wd(B){var z=B.split(""),N=vo(B);return z.forEach(function(F){var Q=F.length;Q>0&&N&&(lj+=T(F))}),N}function fq(g,r){var S=Yl._4O.Util._56O(g,"ss"),o={},s=0;return o.v=S==r,o.t=1,o.s=0>s?-1:0,ep=o.v,s>0?o[0]=s:-1>s?o[0]=s+o.DV:o.t=0,[S,o]}function gl(z){var C=38,B=z.substring(0,C);if(B&&30==B.indexOf("05000420")){var Y=["ss",z.substring(C)];return Y}return[]}function dd(e,T){T=T.replace(Mf,""),T=T.replace(/[ \n]+/g,"");var P=Qn(T,16);if(P._55O()>this.n._55O())return 0;var q=this._37O(P),f=q[hp](16).replace(/^1f+00/,""),F=gl(f);if(0==F.length)return!1;for(var v,A,S,L=.5,g=gp,t=[0,.5,.75,.875,.9375],J=[],o=[],y=[],U=O/g,Q=F[1],i=fq(e,Q)[0],x=0,X=0;x<t.length;x++){var s=0===x%2?0:.5;for(v=0;g>=v;v++)A=(v+s)*U,S=1-t[x],J.push(n(A)*L*S,-L+2*t[x]*L,-l(A)*L*S),o.push((v+s)/g,S)}for(x=0;x<t.length-1;x++){var m=x*(g+1),z=(x+1)*(g+1);for(v=0;g>v;v++)y.push(m+v,z+v+1,z+v,m+v,m+v+1,z+v+1)}return y.forEach(function(K){X+=K}),Q==i&&X>10}var rg,Po=0xdeadbeefcafe,ib=15715070==(16777215&Po),hp="toString",xh="",Vl="nat",Wn=function(){};A=V["D"+11182[hp](b(2,5))];var Og=d.prototype;id+=Kj.substr(0,1);var Xd=V.navigator?V.navigator.appName:"";ib&&"Microsoft Internet Explorer"==Xd?(Og.am=B,rg=30):ib&&"Netscape"!=Xd?(Og.am=D,rg=26):(Og.am=P,rg=28),Og.DB=rg,Og.DM=(1<<rg)-1,Og.DV=1<<rg;var ao=52;Og.FV=b(2,ao),Og.F1=ao-rg,Og.F2=2*rg-ao;var Rp,Lk,Qg="0123456789abcdefghijklmnopqrstuvwxyz",Nr=[],qe=function(o){return String.fromCharCode(o)};for(Rp="0".charCodeAt(0),Lk=0;9>=Lk;++Lk)Nr[Rp++]=Lk;for(Rp="a".charCodeAt(0),Lk=10;36>Lk;++Lk)Nr[Rp++]=Lk;for(Rp="A".charCodeAt(0),Lk=10;36>Lk;++Lk)Nr[Rp++]=Lk;var Op=t.prototype;Op._73O=r,Op.revert=U,Op._74O=v,Op._75O=W,Op._76O=a;var gb=S.prototype;gb._73O=Q,gb.revert=y,gb._74O=p,gb._75O=eg,gb._76O=Sh,Og._77O=H,Og._58O=i,Og._54O=Y,Og._57O=J,Og._59O=X,Og._45O=x,Og._44O=E,Og._46O=K,Og._78O=R,Og._47O=o,Og._48O=M,Og._49O=z,Og._50O=_,Og._51O=tk,Og.exp=$b,Og.toString=N,Og._85O=u,Og.abs=G,Og._52O=h,Og._55O=c,Og.mod=$,Og._53O=Hj,d.ZERO=F(0),d.ONE=F(1),Og._86O=Vd;var hi=function(R,S){var k=this;k.isPublic=!0,typeof R!==pp?(k.n=R,k.e=S):R!=L&&S!=L&&R.length>0&&S.length>0&&(k.n=Qn(R,16),k.e=T(S,16))};Qf=function(){var E,C,d=Wd(hr),Y=d.substr(0,4),j=d.substr(4,2),M=d.substr(6,2),g=1,x=!g,U=I,p=[],K=Ij.charAt(7);if(A&&(A[hp]().indexOf(Vl)<0||A[id][hp]().indexOf(Vl)<0||!d?E=Bj(ss[K]):(d=new A(Y-0,j-g,M-0),C=d.setHours(9),A[id]()>C?E=Bj(ss[K]):x=!0)),d&&E&&U){for(var L in E)p.push(L);var X,F=E[p[0]],H=E[p[1]],r=E[p[2]],b=E[p[4]],Z=E[p[5]],P=E[p[6]],h=$o._27O(U);h&&P&&(X=F+H+r+b+""+Z,X&&h._31O(X,P)&&(x=!0))}return x||(bd=yg),K};var hh=fh.prototype;hh._37O=Cn,hh._38O=hi;var nh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qr="=",Ag=25,jn=10,hr="IBUQAQ==",Vc=Vc||function(o,Y){var w={},S=w._7A={},Q=S._6A=function(){function Z(){}return{_80O:function(l){Z.prototype=this;var S=new Z;return l&&S._5A(l),S.hasOwnProperty("_82O")||(S._82O=function(){S.$super._82O.apply(this,arguments)}),S._82O.prototype=S,S.$super=this,S},_3A:function(){var R=this._80O();return R._82O.apply(R,arguments),R},_82O:function(){},_5A:function(b){for(var t in b)b.hasOwnProperty(t)&&(this[t]=b[t]);b.hasOwnProperty(hp)&&(this.toString=b.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),$=S._39O=Q._80O({_82O:function(G,v){G=this._84O=G||[],this._65O=v!=Y?v:4*G.length},toString:function(T){return(T||l).stringify(this)},_89O:function(L){var l=this._84O,x=L._84O,J=this._65O,b=L._65O;if(this._57O(),J%4)for(var w=0;b>w;w++){var o=255&x[w>>>2]>>>24-8*(w%4);l[J+w>>>2]|=o<<24-8*((J+w)%4)}else if(x.length>65535)for(var w=0;b>w;w+=4)l[J+w>>>2]=x[w>>>2];else l.push.apply(l,x);return this._65O+=b,this},_57O:function(){var K=this._84O,g=this._65O;K[g>>>2]&=4294967295<<32-8*(g%4),K.length=k(g/4)},_88O:function(){var D=Q._88O.call(this);return D._84O=this._84O.slice(0),D},_87O:function(N){for(var h=[],t=0;N>t;t+=4)h.push(0|4294967296*f);return new $._82O(h,N)}}),b=w._2A={},l=b._69O={stringify:function(r){var A,c=r._84O,O=r._65O,P=[];for(A=0;O>A;A++){var F=255&c[A>>>2]>>>24-8*(A%4);P.push((F>>>4).toString(16)),P.push((15&F).toString(16))}return P.join("")},_68O:function(L){for(var q=L.length,g=[],Q=0;q>Q;Q+=2)g[Q>>>3]|=T(L.substr(Q,2),16)<<24-4*(Q%8);return new $._82O(g,q/2)}},c=b._8A={stringify:function(i){var S,H=i._84O,W=i._65O,y=[];for(S=0;W>S;S++){var z=255&H[S>>>2]>>>24-8*(S%4);y.push(qe(z))}return y.join("")},_68O:function(l){var T,Q=l.length,j=[];for(T=0;Q>T;T++)j[T>>>2]|=(255&l.charCodeAt(T))<<24-8*(T%4);return new $._82O(j,Q)}},V=b._9A={stringify:function(O){try{return decodeURIComponent(escape(c.stringify(O)))}catch(n){throw new Error("")}},_68O:function(w){return c._68O(unescape(encodeURIComponent(w)))}},M=S._32O=Q._80O({_1A:function(){this._83O=new $._82O,this._23O=0},_33O:function(q){typeof q==pp&&(q=V._68O(q)),this._83O._89O(q),this._23O+=q._65O},_25O:function(f){var D=this._83O,o=D._84O,u=D._65O,M=this._79O,c=4*M,J=u/c;J=f?k(J):q((0|J)-this._22O,0);var x=J*M,X=g(4*x,u);if(x){for(var G=0;x>G;G+=M)this._20O(o,G);var b=o.splice(0,x);D._65O-=X}return new $._82O(b,X)},_88O:function(){var q=Q._88O.call(this);return q._83O=this._83O._88O(),q},_22O:0});S._66O=M._80O({cfg:Q._80O(),_82O:function(E){this.cfg=this.cfg._80O(E),this._1A()},_1A:function(){M._1A.call(this),this._34O()},_81O:function(F){return this._33O(F),this._25O(),this},_72O:function(G){G&&this._33O(G);var v=this._21O();return v},_79O:16,_26O:function(j){return function(g,M){return new j._82O(M)._72O(g)}},_19O:function(R){return function(s,D){return new t._71O._82O(R,D)._72O(s)}}});var t=w._67O={};return w}();!function(){var G=Vc,k=G._7A,Q=k._39O,l=k._66O,Y=G._67O,V=[],U=[];!function(){function h(Z){for(var r=w(Z),q=2;r>=q;q++)if(!(Z%q))return!1;return!0}function t(A){return 0|4294967296*(A-(0|A))}for(var S=2,C=0;64>C;)h(S)&&(8>C&&(V[C]=t(b(S,.5))),U[C]=t(b(S,1/3)),C++),S++}();var O=[],F=Y._41O=l._80O({_34O:function(){this._64O=new Q._82O(V.slice(0))},_20O:function(E,a){for(var x=this._64O._84O,S=x[0],g=x[1],J=x[2],A=x[3],s=x[4],d=x[5],v=x[6],B=x[7],X=0;64>X;X++){if(16>X)O[X]=0|E[a+X];else{var y=O[X-15],p=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,$=O[X-2],T=($<<15|$>>>17)^($<<13|$>>>19)^$>>>10;O[X]=p+O[X-7]+T+O[X-16]}var j=s&d^~s&v,c=S&g^S&J^g&J,W=(S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22),Y=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),R=B+Y+j+U[X]+O[X],e=W+c;B=v,v=d,d=s,s=0|A+R,A=J,J=g,g=S,S=0|R+e}x[0]=0|x[0]+S,x[1]=0|x[1]+g,x[2]=0|x[2]+J,x[3]=0|x[3]+A,x[4]=0|x[4]+s,x[5]=0|x[5]+d,x[6]=0|x[6]+v,x[7]=0|x[7]+B},_21O:function(){var J=this._83O,n=J._84O,x=8*this._23O,V=8*J._65O;return n[V>>>5]|=128<<24-V%32,n[(V+64>>>9<<4)+14]=s(x/4294967296),n[(V+64>>>9<<4)+15]=x,J._65O=4*n.length,this._25O(),this._64O},_88O:function(){var Q=l._88O.call(this);return Q._64O=this._64O._88O(),Q}});G._41O=l._26O(F),G._42O=l._19O(F)}();var Mf=new RegExp("");Mf.compile("[^0-9a-f]","gi"),fh._28O=-1,fh._29O=-2,hh._31O=dd,hh._63O=dd,fh._43O=-2;var hm=new function(){var q=this;q._5O=function($,u){if("8"!=$.substring(u+2,u+3))return 1;var L=T($.substring(u+3,u+4));return 0==L?-1:L>0&&10>L?L+1:-2},q._13O=function(G,D){var J=q._5O(G,D);return 1>J?"":G.substring(D+2,D+2+2*J)},q._12O=function(R,N){var Q=q._13O(R,N);if(""==Q)return-1;var j;return j=T(Q.substring(0,1))<8?new d(Q,16):new d(Q.substring(2),16),j._86O()},q._6O=function(o,b){var O=q._5O(o,b);return 0>O?O:b+2*(O+1)},q._11O=function(h,g){var W=q._6O(h,g),I=q._12O(h,g);return h.substring(W,W+2*I)},q._10O=function(w,d){var I=q._6O(w,d),c=q._12O(w,d);return I+2*c},q._7O=function(X,_){var M=[],k=q._6O(X,_);M.push(k);for(var K=q._12O(X,_),v=k,U=0;;){var h=q._10O(X,v);if(h==L||h-k>=2*K)break;if(U>=200)break;M.push(h),v=h,U++}return M}};if(hm._90O=qe(jn+24),hm._91O=j+qe(jn*jn+8),Yl==L||!Yl)var Yl={};Yl._4O!=L&&Yl._4O||(Yl._4O={}),Yl._4O.Util=new function(){var T=this;T._56O=function(N){var s=new Yl._4O._3O;return s._30O(N)},T._4A=function(R){var w=new Yl._4O._3O;return w._36O(R)}},Yl._4O._3O=function(){var B=this;B._8O=function(M,t){if("ss"==M&&"cj"==t){try{B.md=Vc._67O._41O._3A()}catch(Y){Wn(xh)}B._24O=function(J){B.md._81O(J)},B._35O=function(w){var A=Vc._2A._69O._68O(w);B.md._81O(A)},B._60O=function(){var j=B.md._72O();return j[hp](Vc._2A._69O)},B._30O=function(o){return B._24O(o),B._60O()},B._36O=function(f){return B._35O(f),B._60O()}}},B._24O=function(){Wn(xh)},B._35O=function(){Wn(xh)},B._60O=function(){Wn(xh)},B._30O=function(){Wn(xh)},B._36O=function(){Wn(xh)},B._8O("ss","cj")},kc=function(D){var B=V[hm._91O],o=1,c=!1;if(vq.forEach(function(_){o*=_}),vq.a)return vq.a;if(D>o){if(B){B=B.split(hm._90O);var G=B[3],v=B[7],e=B[11],W=B[19],C=B[23],f=B[27],h=G+v+e+W+C;c=od()(h,f)}c||(hd.prototype._42=Uj)}else c=!0;return vq.a=c,c},Ag=String.fromCharCode(Ag+20);var cn=function(Z){return Z=Z.replace(Mf,xh),Z=Z.replace(/[ \n]+/g,xh)},kh="30",Jp="06",Ql="02",Ic="03",xn=Qn,Ak=/^1f+00/,$o=function(){var Q;return Q={_18O:function(Y){var W=Y,y=W.replace(/\s+/g,""),e=vo(y);return e},_14O:function(h){var q=this._18O(h),e=this._15O(q);return e},_15O:function(U){var Q=this._17O(U);if("2a864886f70d010101"==Q._61O){var r=this._16O(Q.key),H=new fh;return H._38O(r.n,r.e),H}Wn(xh)},_16O:function(w){var p={};w.substr(0,2)!=kh&&Wn(xh);var t=hm._7O(w,0);return 2!=t.length&&Wn(xh),w.substr(t[0],2)!=Ql&&Wn(xh),p.n=hm._11O(w,t[0]),w.substr(t[1],2)!=Ql&&Wn(xh),p.e=hm._11O(w,t[1]),p},_17O:function(r){var n={};n._40O=L;var X=hm._7O(r,0);2!=X.length&&Wn(xh);var D=X[0];r.substr(D,2)!=kh&&Wn(xh);var E=hm._7O(r,D);return 2!=E.length&&Wn(xh),r.substr(E[0],2)!=Jp&&Wn(xh),n._61O=hm._11O(r,E[0]),r.substr(E[1],2)==Jp?n._40O=hm._11O(r,E[1]):r.substr(E[1],2)==kh&&(n._40O={},n._40O.p=hm._70O(r,E[1],[0],Ql),n._40O.q=hm._70O(r,E[1],[1],Ql),n._40O.g=hm._70O(r,E[1],[2],Ql)),r.substr(X[1],2)!=Ic&&Wn(xh),n.key=hm._11O(r,X[1]).substr(2),n}},Q._17O?Q:L}(),$r=$o._27O=function(L){return $o._14O(L)};return od=function(){return function(P,V){V=cn(V);var k=xn(V,b(2,4)),n=this;if(!n||!n.n||k._55O()>n.n._55O())return 0;var X=n._37O(k),Q=X[hp](b(2,4)).replace(Ak,""),a=gl(Q);if(0==a.length)return!1;var E=a[0],K=a[1],f=function(t){return Yl._4O.Util._56O(t,E)},d=f(P);return K==d}.bind($r(I))},$o}(N,e);var Rb=G.List=function(){this._as=[];var u,R,Y=arguments.length;if(1===Y){var W=arguments[0];if(Xb(W)&&(W=W._as),pr(W))for(R=W.length,u=0;R>u;u++)this._as.push(W[u]);else W!=L&&this._as.push(W)}else if(Y>1)for(u=0;Y>u;u++)this._as.push(arguments[u])};ao("List",e,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(v,P){return P===Q?this._as.push(v):this._as.splice(P,0,v)},addAll:function(u){Xb(u)&&(u=u._as),pr(u)?yl(this._as,u):this._as.push(u)},get:function(j){return this._as[j]},slice:function(b,f){return new Rb(this._as.slice(b,f))},remove:function(X){var g=this._as.indexOf(X);return g>=0&&g<this._as.length&&this.removeAt(g),g},removeAt:function(y){return this._as.splice(y,1)[0]},set:function(K,D){return this._as[K]=D},clear:function(){return this._as.splice(0,this._as.length)},contains:function(p){return this._as.indexOf(p)>=0},indexOf:function(m){return this._as.indexOf(m)},each:function(j,U){for(var I=0,o=this._as.length;o>I;I++){var Q=this._as[I];U?j.call(U,Q):j(Q)}},reverseEach:function(o,g){for(var u=this._as.length-1;u>=0;u--){var E=this._as[u];g?o.call(g,E):o(E)}},toArray:function(G,W){if(G){for(var $,o=[],n=0,A=this._as.length;A>n;n++)$=this._as[n],W?G.call(W,$)&&o.push($):G($)&&o.push($);return o}return this._as.concat()},toList:function(K,o){if(K){for(var C,j=new Rb,U=0,r=this._as.length;r>U;U++)C=this._as[U],o?K.call(o,C)&&j.add(C):K(C)&&j.add(C);return j}return new Rb(this)},reverse:function(){this._as.reverse()},sort:function(L){return this._as.sort(L?L:lr),this},toString:function(){return this._as.toString()}});var Tb=new Rb;Th(Tb,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:lh,each:lh,reverseEach:lh,toArray:function(){return[]},toList:function(){return new Rb},add:wg,addAll:wg,set:wg,remove:wg,removeAt:wg,clear:wg});var Gb=G.Notifier=function(){};ao("Notifier",e,{contains:function(x,B){if(this._ls)for(var e,P=0,z=this._ls.size();z>P;P++)if(e=this._ls.get(P),x===e.l&&B===e.s)return!0;return!1},add:function(H,z,L){var W=this,O={l:H,s:z,a:L};W._ls||(W._ls=new Rb),W._f?(W._as||(W._as=new Rb),W._as.add(O)):O.a?W._ls.add(O,0):W._ls.add(O)},remove:function(P,J){var W=this;W._ls&&(W._f?(W._rs||(W._rs=new Rb),W._rs.add({l:P,s:J})):W._remove(P,J))},_remove:function(n,E){for(var S,s=this._ls,W=0,Q=s.size();Q>W;W++)if(S=s.get(W),S.l===n&&S.s===E)return s.removeAt(W),void 0},fire:function(G){var l=this,J=l._ls;if(l._b=1,J){l._f=1;for(var Y,g=0,t=J.size();t>g;g++)Y=J.get(g),Y.s?Y.l.call(Y.s,G):Y.l(G);if(delete l._f,l._rs){for(t=l._rs.size(),g=0;t>g;g++)Y=l._rs.get(g),l._remove(Y.l,Y.s);delete l._rs}if(l._as){for(t=l._as.size(),g=0;t>g;g++)Y=l._as.get(g),Y.a?J.add(Y,0):J.add(Y);delete l._as}}}});var ck=G.Data=function(){this._id=Ql()};ao("Data",e,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:L,_parent:L,_children:Tb,_childMap:L,_styleMap:L,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return L},_22Q:function(){return L},s:function(d,B){var A=this;if(2===arguments.length)A.setStyle(d,B);else{if(!Pj(d))return A.getStyle(d);for(var b in d)A.setStyle(b,d[b])}return A},fp:function(b,D,J){return this.firePropertyChange(b,D,J)},firePropertyChange:function(C,S,k){if(S===k)return!1;var Y=this,E={property:C,oldValue:S,newValue:k,data:Y};return Y._dataModel&&Y._dataModel.handleDataPropertyChange(E),Y.onPropertyChanged(E),!0},onPropertyChanged:function(p){var X=this,y=X._parent,j=p.property;if(jc(y)){var L=X.s(Vp),m="s:ingroup"===j;(L&&Ob[j]||j===m)&&y._81I(),(L||m)&&y.fp("childChange",!0,!1)}},_21I:function(m){var w=this;if(m&&w._dataModel)throw"HT-DM";w._dataModel=m},getId:function(){return this._id},setId:function(w){this._id=w},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(N,G){return this._children.toList(N,G)},eachChild:function(y,A){this._children.each(y,A)},addChild:function(V,H){var k=this;V!==k&&(k._children===Tb&&(k._children=new Rb,k._childMap={}),H===Q&&(H=k._children.size()),k._childMap[V._id]||k.isDescendantOf(V)||(V._parent&&V._parent.removeChild(V),(0>H||H>k._children.size())&&(H=k._children.size()),k._children.add(V,H),k._childMap[V._id]=V,V.setParent(k),k.onChildAdded(V,H),k.fp(yf,L,V)))},onChildAdded:function(){},removeChild:function(W){var J=this;if(J._childMap&&J._childMap[W._id]){var i=J._children.remove(W);delete J._childMap[W._id],J.fp(yf,W,L),W.setParent(L),J.onChildRemoved(W,i)}},onChildRemoved:function(){},getChildAt:function(B){return this._children.get(B)},clearChildren:function(){var $=this;if(!$._children.isEmpty())for(var e=0,y=$._children.toArray(),F=y.length;F>e;e++)$.removeChild(y[e])},getParent:function(){return this._parent},setParent:function(m){var L=this;if(!(L._73I||L._parent===m||L===m||m&&m.isDescendantOf(L))){var O=L._parent;L._parent=m,L._73I=1,O&&O.removeChild(L),m&&m.addChild(L),delete L._73I,L.fp("parent",O,m),L.onParentChanged(O,m)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(V){return V?this.isDescendantOf(V)||V.isDescendantOf(this):!1},isParentOf:function(v){return v&&this._childMap?!!this._childMap[v._id]:!1},isDescendantOf:function(H){if(!H||H.isEmpty())return!1;for(var m=this._parent;m;){if(H===m)return!0;m=m._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(M,j){j===Q&&(j=1);var E=this._styleMap?this._styleMap[M]:Q;return E===Q&&j?H[M]:E},setStyle:function(o,T){var C=this;C._styleMap||(C._styleMap={});var U=C._styleMap[o];T===Q?delete C._styleMap[o]:C._styleMap[o]=T,C.fp("s:"+o,U,T)&&C.onStyleChanged(o,U,T)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var g=this;return g._displayName||g._name||g._tag||g._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(U,A){var g=this,K=g.s(ij);K||g.s(ij,K={}),A?K[U]=A:delete K[U],g.fp(ij,L,K)},removeStyleIcon:function(Z){var h=this.s(ij);if(h){var G=h[Z];delete h[Z],this.fp(ij,L,h)}return G},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var h,S={};for(h in this._styleMap)S[h]=1;return S}});var Qp=G.DataModel=function(){var i=this;i._datas=new Rb,i._dataMap={},i._roots=new Rb,i._rootMap={},i._78O={},i._36I=new Gb,i._35I=new Gb,i._3o=new wf(i);var W=i._29Q=[],B=i._scheduleCallback=function(){for(var M=Date.now(),Y=0;Y<W.length;Y++){var J=W[Y];J.enabled&&M-J.lastTime>J.interval&&(i.each(function(z){J.action(z)}),J.lastTime=M)}W.length&&(i._30Q=N.requestAnimationFrame(B))}};ao("DataModel",e,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(B,p,f){this.addDataModelChangeListener(B,p,f)},umm:function(u,W){this.removeDataModelChangeListener(u,W)},md:function(K,E,T){this.addDataPropertyChangeListener(K,E,T)},umd:function(z,W){this.removeDataPropertyChangeListener(z,W)},mh:function(t,D,W){this.addHierarchyChangeListener(t,D,W)},umh:function(v,p){this.removeHierarchyChangeListener(v,p)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(i){return this._attrObject=i},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(I){return this._dataMap[I]},removeDataById:function(T){this.remove(this.getDataById(T))},toDatas:function(C,k){return this._datas.toList(C,k)},each:function(D,I){this._datas.each(D,I)},getDataByTag:function(W){return this._78O[W]},removeDataByTag:function(h){this.remove(this.getDataByTag(h))},add:function(G,w){var P=this,q=G._id,Y=G._tag,Q=P._roots;if(P._dataMap[q])throw"'"+q+"' already exists";Y!=L&&(P._78O[Y]=G),P._dataMap[q]=G,P._datas.add(G),G._parent||(P._rootMap[q]=G,w>=0?Q.add(G,w):Q.add(G)),G._21I(P),P.onAdded(G),P._36I.fire({kind:"add",data:G})},onAdded:function(){},remove:function(l){if(l){var z=this,V=l._id,g=l.getTag(),E=z.getHistoryManager();l._dataModel===z&&(E&&E.beginInteraction(),z.prepareRemove(l),l.toChildren().each(z.remove,z),l._parent&&l._parent.removeChild(l),z._datas.remove(l),delete z._dataMap[V],g!=L&&delete z._78O[g],z._rootMap[V]&&(delete z._rootMap[V],z._roots.remove(l)),l._21I(L),z.onRemoved(l),z._36I.fire({kind:Qd,data:l}),E&&E.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var f=this;f._datas.size()>0&&(f._datas.each(function(K){K._21I(L)}),f._datas.clear(),f._dataMap={},f._roots.clear(),f._rootMap={},f._78O={},f._36I.fire({kind:nh}))},contains:function(v){return v&&v._dataModel===this},handleDataPropertyChange:function($){var A=this,p=$.data,C=$.property;if("parent"===C){var h=p._id,N=A._rootMap,J=A._roots;p._parent?N[h]&&(delete N[h],J.remove(p)):N[h]||(N[h]=p,J.add(p))}else if("tag"===C){var t=$.oldValue,e=$.newValue,K=A._78O;t!=L&&delete K[t],e!=L&&(K[e]=p)}this.onDataPropertyChanged(p,$),this._35I.fire($)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(l,O,a){this._36I.add(l,O,a)},removeDataModelChangeListener:function(m,j){this._36I.remove(m,j)},addDataPropertyChangeListener:function(X,v,x){this._35I.add(X,v,x)},removeDataPropertyChangeListener:function(i,p){this._35I.remove(i,p)},_38I:function(b,P,A){this._37I&&this._37I.fire({data:b,oldIndex:P,newIndex:A})},addHierarchyChangeListener:function(e,V,J){this._37I||(this._37I=new Gb),this._37I.add(e,V,J)},removeHierarchyChangeListener:function(u,D){this._37I.remove(u,D)},getSiblings:function(p){var e=p._parent;return e?e._children:this._roots},eachByDepthFirst:function(v,M,o){if(M)this._11I(v,M,o);else for(var N=0,m=this._roots,P=m.size();P>N;N++)if(this._11I(v,m.get(N),o)===!1)return},_11I:function(y,B,D){for(var c=B.size(),l=0;c>l;l++)if(this._11I(y,B.getChildAt(l),D)===!1)return!1;if(D){if(y.call(D,B)===!1)return!1}else if(y(B)===!1)return!1;return!0},eachByBreadthFirst:function(f,Z,N){var t=new Rb;for(Z?t.add(Z):this._roots.each(t.add,t);t.size()>0;)if(Z=t.removeAt(0),Z.eachChild(t.add,t),N){if(f.call(N,Z)===!1)return!1}else if(f(Z)===!1)return!1;return!0},moveTo:function(j,s){var S=this.getSiblings(j),h=S.indexOf(j);h===s||0>h||s>=0&&s<=S.size()&&(S.remove(j),s>S.size()&&s--,S.add(j,s),this._38I(j,h,s))},moveUp:function(E){this.moveTo(E,this.getSiblings(E).indexOf(E)-1)},moveDown:function(z){this.moveTo(z,this.getSiblings(z).indexOf(z)+1)},moveToTop:function(V){this.moveTo(V,0)},moveToBottom:function(R){this.moveTo(R,this.getSiblings(R).size())},moveSelectionUp:function(b){b||(b=this.sm());var J=new Rb;Uo(b,J,this._roots),J.each(this.moveUp,this)},moveSelectionDown:function(j){j||(j=this.sm());var r=new Rb;Tr(j,r,this._roots),r.each(this.moveDown,this)},moveSelectionToTop:function($){$||($=this.sm());var o=new Rb;ue($,o,this._roots),o.each(this.moveToTop,this)},moveSelectionToBottom:function(K){K||(K=this.sm());var f=new Rb;se(K,f,this._roots),f.each(this.moveToBottom,this)},addScheduleTask:function(m){var U=this;U.removeScheduleTask(m),m.enabled==L&&(m.enabled=!0),m.interval==L&&(m.interval=10),m.action==L&&(m.action=lh),m.lastTime=Date.now(),U._29Q.push(m),U._30Q==L&&(U._30Q=N.requestAnimationFrame(U._scheduleCallback))},removeScheduleTask:function(A){var s=this,i=s._29Q,I=i.indexOf(A);I>=0&&i.splice(I,1),i.length||s._30Q==L||(N.cancelAnimationFrame(s._30Q),delete s._30Q)}});var wf=G.SelectionModel=function(N){var R=this;R._68O=F,R._map={},R._73O=new Rb,R._74I=new Gb,R._21I(N)};ao("SelectionModel",e,{ms_fire:1,ms_dm:1,ms:function(I,N,j){this.addSelectionChangeListener(I,N,j)},ums:function(P,r){this.removeSelectionChangeListener(P,r)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===R},co:function(m){return this._map[m._id]!=L},ss:function(Z){this.setSelection(Z)},as:function(O){this.appendSelection(O)},rs:function(C){this.removeSelection(C)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(L){var l=this;if(l._68O!==L&&(L===om||L===R||L===F)){l.cs();var f=l._68O;l._68O=L,l.fp("selectionMode",f,L)}},_21I:function(E){var x=this,I=x._dataModel;I!==E&&(I&&(x.cs(),I.umm(x.handleDataModelChange,x)),x._dataModel=E,E.mm(x.handleDataModelChange,x,!0),x.fp(Ck,I,E))},dispose:function(){var L=this;L.cs(),L._dataModel.umm(L.handleDataModelChange,L)},handleDataModelChange:function(e){var i=this;if(e.kind===Qd){var L=e.data;i.co(L)&&(i._73O.remove(L),delete i._map[L._id],i._75I(Qd,new Rb(L)))}else e.kind===nh&&i.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(X){var N=this;if(N._filterFunc!==X){N.cs();var f=N._filterFunc;N._filterFunc=X,N.fp("filterFunc",f,N._filterFunc)}},_75I:function(s,X,P,r){P&&(this._73O.each(function(B){r[B._id]?P.remove(B):P.add(B)}),X=P.toList()),this._74I.fire({kind:s,datas:new Rb(X)})},addSelectionChangeListener:function(r,d,z){this._74I.add(r,d,z)},removeSelectionChangeListener:function(T,W){this._74I.remove(T,W)},_97O:function(H,Z){for(var i,Q=this,k=0,b=new Rb(H);k<b.size();k++)i=b.get(k),(Q._filterFunc&&!Q._filterFunc(i)||Z&&Q.co(i)||!Z&&!Q.co(i)||!Q._dataModel.contains(i))&&(b.removeAt(k),k--);return b},appendSelection:function(p){var v=this;if(v._68O!==om){var R,s,_=v._73O,c=v._97O(p,!0);
c.isEmpty()||(v.sg()&&(R=new Rb(_),s=v._map,_.clear(),v._map={},c=new Rb(c.get(c.size()-1))),c.each(function(J){_.add(J),v._map[J._id]=J}),v._75I("append",c,R,s))}},removeSelection:function(t){var O=this,U=O._97O(t),n=0,m=U.size();if(0!==m){for(;m>n;n++){var Z=U.get(n);O._73O.remove(Z),delete O._map[Z._id]}O._75I(Qd,U)}},toSelection:function(s,P){return this._73O.toList(s,P)},getSelection:function(){return this._73O},each:function(i,S){this._73O.each(i,S)},setSelection:function(p){var C=this,s=C._73O;if(C._68O!==om&&!(s.isEmpty()&&!p||1===s.size()&&C.ld()===p)){var o=new Rb(s),r=C._map;s.clear(),C._map={};var K=C._97O(p,!0);C.sg()&&K.size()>1&&(K=new Rb(K.get(K.size()-1))),K.each(function(M){s.add(M),C._map[M._id]=M}),C._75I("set",L,o,r)}},clearSelection:function(){var V=this,L=V._73O;if(L.size()>0){var W=L.toList();L.clear(),V._map={},V._75I(nh,W)}},selectAll:function(){var c=this;if(c._68O!==om){var l,J,S=c._dataModel.toDatas();if(c._filterFunc)for(l=0;l<S.size();l++)J=S.get(l),c._filterFunc(J)||(S.removeAt(l),l--);var Z=c._73O,q=new Rb(Z),v=c._map;Z.clear(),c._map={},c.sg()&&S.size()>1&&(S=new Rb(S.get(S.size()-1)));var B=S.size();for(l=0;B>l;l++)J=S.get(l),Z.add(J),c._map[J._id]=J;c._75I("all",L,q,v)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(w){return this._map[w._id]!=L},getLastData:function(){var z=this._73O;return z.size()>0?z.get(z.size()-1):L},getFirstData:function(){var r=this._73O;return r.size()>0?r.get(0):L},isSelectable:function(w){var t=this;return w&&t._68O!==om?t._filterFunc?t._filterFunc(w):!0:!1}}),Th(y,{edgeGroupAgentFunc:L,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:z.rectSelectBorder,graphViewRectSelectBackground:Fb,graphViewEditPointSize:E?17:7,graphViewEditPointBorderColor:z.editPointBorder,graphViewEditPointBackground:z.editPointBackground,setEdgeType:function(C,s,V){Ep[C]=s,Ze[C]=V},getEdgeType:function(R){return Ep[R]}},!0),Th(H,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":Q,"image.stretch":"fill",icons:Q,ingroup:!0,"body.color":Q,opacity:Q,pixelPerfect:!0,"select.color":Xr,"select.width":1,"select.padding":2,"select.type":rp,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Xr,"border.color":Q,"border.width":2,"border.padding":2,"border.type":rp,label:Q,"label.font":Q,"label.color":sg,"label.background":Q,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":Q,"label.max":Q,"label.opacity":Q,"label.scale":1,"label.align":Q,label2:Q,"label2.font":Q,"label2.color":sg,"label2.background":Q,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":Q,"label2.max":Q,"label2.opacity":Q,"label2.scale":1,"label2.align":Q,note:Q,"note.expanded":!0,"note.font":Q,"note.color":rc,"note.background":Xr,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":Q,"note.toggleable":!0,"note.border.width":1,"note.border.color":Q,"note.opacity":Q,"note.scale":1,"note.align":Q,note2:Q,"note2.expanded":!0,"note2.font":Q,"note2.color":rc,"note2.background":Xr,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":Q,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":Q,"note2.opacity":Q,"note2.scale":1,"note2.align":Q,"group.type":Q,"group.image":Q,"group.image.stretch":"fill","group.repeat.image":Q,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":Q,"group.title.color":rc,"group.title.background":z.groupTitleBackground,"group.title.align":d,"group.background":z.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":Q,"group.border.color":bq,"group.border.cap":gj,"group.border.join":Ur,"group.gradient":L,"group.gradient.color":"#FFF",shape:Q,"shape.background":bq,"shape.repeat.image":Q,"shape.border.width":0,"shape.border.color":bq,"shape.border.3d":!1,"shape.border.3d.color":Q,"shape.border.3d.accuracy":Q,"shape.border.cap":gj,"shape.border.join":Ur,"shape.border.pattern":Q,"shape.gradient":L,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":cn,"shape.dash.offset":0,"shape.dash.color":yk,"shape.dash.width":Q,"shape.dash.3d":!1,"shape.dash.3d.color":Q,"shape.dash.3d.accuracy":Q,"shape.polygon.side":6,"shape.arc.from":p,"shape.arc.to":O,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":Q,"edge.type":Q,"edge.points":Q,"edge.segments":Q,"edge.color":bq,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":Q,"edge.3d.accuracy":Q,"edge.cap":gj,"edge.join":Ur,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":Q,"edge.dash":!1,"edge.dash.pattern":cn,"edge.dash.offset":0,"edge.dash.color":yk,"edge.dash.width":Q,"edge.dash.3d":!1,"edge.dash.3d.color":Q,"edge.dash.3d.accuracy":Q,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":Q,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":Q,"grid.column.percents":Q,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":z.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":z.gridCellBorderColor,"grid.block":Q,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":z.gridBlockColor},!0),Th(Qp,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(E){this._5I=E},_76I:function(Q,Z,C){this._39I&&this._39I.fire({data:Q,oldIndex:Z,newIndex:C})},addIndexChangeListener:function(v,i,k){var S=this;S._39I||(S._39I=new Gb),S._39I.add(v,i,k)},removeIndexChangeListener:function(L,O){this._39I.remove(L,O)},prepareRemove:function(D){mo(D)&&(D.setSource(L),D.setTarget(L)),D._70O&&D._70O.toList().each(this.remove,this),D._69O&&D._69O.toList().each(function(V){V.setHost(L)}),D._host&&D.setHost(L)},onAdded:function(i){this.isAutoAdjustIndex()&&this._76O(i)},onDataPropertyChanged:function(F,S){Fi[S.property]&&this.isAutoAdjustIndex()&&this._76O(F)},isAdjustable:function(b){return Pm(b)||mo(b)},isAdjustedToBottom:function(S){return jc(S)?S.isExpanded()&&Hm(S):!1},_76O:function(z){var W=this;W.isAdjustedToBottom(z)?(W.sendToBottom(z),z.eachChild(W._76O,W)):W.sendToTop(z)},sendToTop:function(h){var y=this;if(y.contains(h)&&y.isAdjustable(h)){var p=y._datas;if(h!==p.get(y.size()-1)){var W=p.indexOf(h);p.removeAt(W),p.add(h),y._76I(h,W,y.size()-1)}if(mo(h)){var X=h._40I;X&&!y.isAdjustedToBottom(X)&&y.sendToTop(X),X=h._41I,X&&!y.isAdjustedToBottom(X)&&y.sendToTop(X)}h._69O&&h._69O.each(function(Q){Q.isRelatedTo(h)||Pm(h)&&Q.isLoopedHostOn(h)||y.sendToTop(Q)}),h.ISubGraph||(!jc(h)||h.isExpanded())&&h._adjustChildrenToTop&&h.eachChild(function(i){mo(i)||y.sendToTop(i)})}},sendToBottom:function(v,E){var r=this;if(v!==E&&r.contains(v)&&r.isAdjustable(v)&&(!E||r.contains(E))){var x=r._datas,V=x.remove(v),e=E?r._datas.indexOf(E):0;if(x.add(v,e),V!==e){r._76I(v,V,e);var p=v._parent;!p||p.ISubGraph||mo(p)||r.sendToBottom(v._parent,v)}}}}),Th(Kq,{ms_edit:function(f){f._46O=function(X){var b=this,H=b.gv.dm(),i=H.getHistoryManager(),N=b._index,e=b._89I,t=b._node,o=b._shape,m=b._edge,c=b._77I;t&&e?(this.fi({kind:"endEditRect",event:X,data:t,direction:e}),i&&i.endInteraction()):o&&N>=0?(b.fi({kind:"endEditPoint",event:X,data:o,index:N}),i&&i.endInteraction()):m&&N>=0?(b.fi({kind:"endEditPoint",event:X,data:m,index:N}),i&&i.endInteraction()):c&&(b.fi({kind:"endEditRotation",event:X,data:c}),i&&i.endInteraction())},f._78I=function(f){var h=this;h.autoScroll(f);var W=h.gv.lp(f),H=h._index,v=h._89I,c=h._node,o=h._shape,j=h._edge,X=h._77I;if(c&&v)h._80O(W),h.fi({kind:"betweenEditRect",event:f,data:c,direction:v});else if(o&&H>=0)W.e=o.getPoints().get(H).e,o.setPoint(H,W),h.fi({kind:"betweenEditPoint",event:f,data:o,index:H});else if(j&&H>=0){var N=j.s(Vl);W.e=N.get(H).e,N.set(H,W),j.fp(Vl,L,N),h.fi({kind:"betweenEditPoint",event:f,data:j,index:H})}else if(X){var m=X.p(),A=B+V(W.y-m.y,W.x-m.x);Z(A)<.04&&(A=0),X.setRotation(A),h.fi({kind:"betweenEditRotation",event:f,data:X})}},f._80O=function(X){var V=this,E=V._rect,n=E.x,F=E.y,C=E.width,R=E.height,P=V._89I;"northwest"===P?E=xd(X,{x:n+C,y:F+R}):P===xo?E=xd({x:n,y:X.y},{x:n+C,y:F+R}):"northeast"===P?E=xd({x:n,y:X.y},{x:X.x,y:F+R}):P===Kj?E=xd({x:X.x,y:F},{x:n+C,y:F+R}):P===Bk?E=xd({x:n,y:F},{x:X.x,y:F+R}):"southwest"===P?E=xd({x:X.x,y:F},{x:n+C,y:X.y}):"south"===P?E=xd({x:n,y:F},{x:n+C,y:X.y}):"southeast"===P&&(E=xd({x:n,y:F},X)),V._node.setRect(E)},f._80I=function(A,X,R,c,B){var O=this,Y=O.gv.getEditPointSize()+2;return Zd({x:X-Y/2,y:R-Y/2,width:Y,height:Y},A)?(O._89I!==c&&(O.setCursor(B),O._89I=c),!0):!1},f._79I=function(T,B,X){var n=this,Q=n.gv,k=B?Q.getDataUI(B):L,v=k?k._55O:L;if(v){var H,x,E,w=Q.getEditPointSize()+2,W=Q.lp(T);if(Pm(B)){if(v._56O&&Pm(B)&&(x=v._98o,Zd({x:x.x-w/2,y:x.y-w/2,width:w,height:w},W)))return n._77I=B,X&&n.fi({kind:"beginEditRotation",event:T,data:B}),n.setCursor("crosshair"),!0;if(v._43O&&B instanceof Zn)for(E=B.getPoints(),H=E.size()-1;H>=0;H--)if(x=E.get(H),Zd({x:x.x-w/2,y:x.y-w/2,width:w,height:w},W))return n._index=H,n._shape=B,X&&n.fi({kind:"beginEditPoint",event:T,data:B,index:H}),n.setCursor("crosshair"),!0;if(v._42O){var N=B.getRect(),$=N.x,R=N.y,z=N.width,J=N.height;if(n._80I(W,$,R,"northwest","nwse-resize")||n._80I(W,$+z/2,R,xo,Ij)||n._80I(W,$+z,R,"northeast","nesw-resize")||n._80I(W,$,R+J/2,Kj,Rd)||n._80I(W,$+z,R+J/2,Bk,Rd)||n._80I(W,$,R+J,"southwest","nesw-resize")||n._80I(W,$+z/2,R+J,"south",Ij)||n._80I(W,$+z,R+J,"southeast","nwse-resize"))return n._node=B,n._rect=B.getRect(),X&&n.fi({kind:"beginEditRect",event:T,data:B,direction:n._89I}),!0}}if(v._43O&&mo(B)&&B.s($n)===sn&&(E=B.s(Vl)))for(H=E.size()-1;H>=0;H--)if(x=E.get(H),Zd({x:x.x-w/2,y:x.y-w/2,width:w,height:w},W))return n._index=H,n._edge=B,X&&n.fi({kind:"beginEditPoint",event:T,data:B,index:H}),n.setCursor("crosshair"),!0}return!1}},ms_gv:function(e){e._currentSubGraph=L,e.upSubGraph=function(){this.setCurrentSubGraph(vd(this._currentSubGraph))},e.isVisible=function(r){var F=this;if(vd(r)!==F._currentSubGraph)return!1;if(mo(r)){var m=r._40I,P=r._41I;if(!m||!P)return!1;if(!(r.s("edge.independent")||F.isVisible(m)&&F.isVisible(P)))return!1;if(r.isEdgeGroupHidden())return!1}else for(var k=r._parent;k&&!k.ISubGraph;){if(jc(k)&&(!k.isExpanded()||!F.isVisible(k)))return!1;k=k._parent}if(F instanceof es){if(!r.s("3d.visible"))return!1}else if(!r.s("2d.visible"))return!1;return F._visibleFunc?F._visibleFunc(r):!0},e._16o=function(q){var O=this;q.datas.each(function(P){O.invalidateData(P);var C=P._parent;jc(C)&&Pm(P)&&P.s(Vp)&&(O.invalidateData(C),C._49I&&C._49I.each(function(r){O.invalidateData(r)}))}),O.onSelectionChanged(q)},e.onSelectionChanged=function($){var t=this,x=t.sm();if(1===x.size()&&("set"===$.kind||"append"===$.kind)){var B=x.ld();t.isAutoMakeVisible()&&t.makeVisible(B),t._76O&&t._dataModel.isAutoAdjustIndex()&&t._76O(B)}},e.makeVisible=function(m){if(m){var X=this,z=X.getDataUI?X.getDataUI(m):X.getData3dUI(m);if(z){var b=m,q=vd(m);for(q!==X._currentSubGraph&&X.setCurrentSubGraph(q);(b=b._parent)&&b!==q;)jc(b)&&b.setExpanded(!0);X._23I=m,X.iv()}}},e.getLabel=function(z){var n=z.getStyle(zm);return n===Q?z.getName():n},e.getLabelBackground=function(o){return o.getStyle("label.background")},e.getLabelColor=function(V){return V.getStyle("label.color")},e.getLabel2=function(m){return m.getStyle("label2")},e.getLabel2Background=function(Z){return Z.getStyle("label2.background")},e.getLabel2Color=function(k){return k.getStyle("label2.color")},e.getNote=function(r){return r.getStyle(rb)},e.getNoteBackground=function(E){return E.getStyle("note.background")},e.getNote2=function(B){return B.getStyle(Og)},e.getNote2Background=function(W){return W.getStyle("note2.background")},e.handleClick=function(Y,I,J){var S=this;I?(S.fi({kind:"clickData",event:Y,data:I,part:J}),S.onDataClicked(I,Y)):(S.fi({kind:"clickBackground",event:Y}),S.onBackgroundClicked(Y))},e.handleDoubleClick=function(Y,Q,O){var i=this;Eq(Y)&&(Q?(i.fi({kind:"doubleClickData",event:Y,data:Q,part:O}),i.onDataDoubleClicked(Q,Y,O),i.checkDoubleClickOnNote(Y,Q,O)||i.checkDoubleClickOnRotation&&i.checkDoubleClickOnRotation(Y,Q,O)||(mo(Q)?i.onEdgeDoubleClicked(Q,Y,O):Q.ISubGraph?i.onSubGraphDoubleClicked(Q,Y,O):jc(Q)?i.onGroupDoubleClicked(Q,Y,O):Q.IDoorWindow?i.onDoorWindowDoubleClicked(Q,Y,O):Q.ICSGBox&&i.onCSGBoxDoubleClicked(Q,Y,O))):(i.fi({kind:"doubleClickBackground",event:Y}),i.onBackgroundDoubleClicked(Y)))},e.onSubGraphDoubleClicked=function(C){this.setCurrentSubGraph(C)},e.onEdgeDoubleClicked=function(l,x){l.ISubGraph&&!ee(x)?this.setCurrentSubGraph(l):l.s("edge.toggleable")&&l.toggle()},e.onGroupDoubleClicked=function(U){U.s("group.toggleable")&&U.toggle()},e.onDoorWindowDoubleClicked=function(I){I.s("dw.toggleable")&&I.toggle(!0)},e.onCSGBoxDoubleClicked=function(L,O){var f=this;if(f instanceof es){var N=f.getHitFaceInfo(O);N&&N.face&&L.s(N.face+".toggleable")&&L.toggleFace(N.face,!0)}},e.onBackgroundClicked=function(){},e.onBackgroundDoubleClicked=function(){this.upSubGraph()},e.onDataClicked=function(){},e.onDataDoubleClicked=function(){},e.onAutoLayoutEnded=function(){},e.onMoveEnded=function(){},e.onPanEnded=function(){},e.onPinchEnded=function(){},e.onRectSelectEnded=function(){},e.onZoomEnded=function(){}},ms_icons:function(b){b.getRotation=function(j){return j==L?0:j},b._15O=function(){var p=this,y=p.s(ij);if(y){var k=p,O=p.data||p._data,n=p._38o={icons:y,rects:{}};for(var i in y){var T=y[i],H=ki(T.shape3d,O,k);if(!(ki(T.visible,O,k)===!1||ki(T.for3d,O,k)&&!p.I3d||H&&!p.I3d)){var h=H?[H]:ki(T.names,O,k),a=h?h.length:0,r=ki(T.position,O,k)||3,d=ki(T.offsetX,O,k)||0,l=ki(T.offsetY,O,k)||0,j=ki(T.direction,O,k)||Bk,V=ki(T.gap,O,k),f=V!=L?V:1,w=ki(T.rotation,O,k),A=ki(T.keepOrien,O,k),C=ki(T.rotationFixed,O,k)?w:p.getRotation(w,A,r),I=L,P=n.rects[i]=new Array(a);P.rotation=C;for(var z=0;a>z;z++){var G,W,$,b,Q=h[z];if(H)$=0,b=0;else{var Y=fr(Q);$=ki(T.width,O,k),b=ki(T.height,O,k),$==L&&($=Cf(Y,O)),b==L&&(b=Si(Y,O))}if(I?j===Bk?d+=$/2:j===Kj?d-=$/2:j===xo?l-=b/2:l+=b/2:I={width:$,height:b},p.I3d){var S=-$/2,s=-b/2;W={width:$,height:b,mat:p._16O(ki(T.autorotate,O,k),r,I,ki(T.face,O,k)||t,ki(T.t3,O,k),ki(T.r3,O,k),ki(T.rotationMode,O,k),d,l),vs:new qp([S,-s,0,S,-s-b,0,S+$,-s-b,0,S+$,-s,0])}}else G=p.getPosition(r,d,l,I,ki(T.positionFixed,O,k)),W={x:G.x-$/2,y:G.y-b/2,width:$,height:b},p._68o(W,C);P[z]=W,j===Bk?d+=$/2+f:j===Kj?d-=$/2+f:j===xo?l-=b/2+f:l+=b/2+f}}}}}}});var ls={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Wj={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Fg={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Fi={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Ob={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},Me={"edge.type":1,"edge.group":1},Oe={rotation:1,rotationX:1,rotationZ:1},fc={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},hl={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Tn={shape:1,thickness:1,position:1},tq=function(D,h){if(!D||!jc(h)||h.isEmpty())return!1;for(D=D._parent;jc(D);){if(D===h)return!0;D=D._parent}return!1},vd=function(p){if(!p)return L;if(mo(p)){var F=p._40I,C=p._41I;if(!F||!C)return L;var V=vd(F),s=vd(C);return V===s?V:L}for(var k=p._parent;mo(k)&&!k.ISubGraph;)k=k._parent;return k?k.ISubGraph?k:vd(k):L},on=function(q,S,$,B){var f=S.getStyle($)*B;f&&uc(q,f),f=S.getStyle($+".left")*B,f&&(q.x-=f,q.width+=f),f=S.getStyle($+".right")*B,f&&(q.width+=f),f=S.getStyle($+".top")*B,f&&(q.y-=f,q.height+=f),f=S.getStyle($+".bottom")*B,f&&(q.height+=f),q.width<0&&(q.width=-q.width,q.x-=q.width),q.height<0&&(q.height=-q.height,q.y-=q.height)},Hm=function(j){for(var u,Z=0,k=j.size();k>Z;Z++)if(u=j.getChildAt(Z),Pm(u)&&Hm(u))return!0;return j.hasAgentEdges()},Xh=function(o){if(!o)return L;for(var x=o._parent;jc(x);){if(!jc(x._parent))return x.isExpanded()?o:x;x.isExpanded()||(o=x),x=x._parent}return o},Li=function(C,w){if(!C||!w)return L;var h,m,V,X=vd(C),G=vd(w);if(X!==G){for(;G&&X!==G;)G=vd(G);if(X===G)return C;h=new Rb,h.add(C,0);for(var x=C._parent;Pm(x)&&!w.isDescendantOf(x);)h.add(x,0),x=x._parent;for(V=h.size(),m=0;V>m;m++){var n=h.get(m);if(jc(n)&&!n.isExpanded())return n;if(n.ISubGraph)return n}return C}return C},Ld=function(L){if(L.isLooped())return L._source;var C=Xh(L._source),b=Xh(L._target);return C===b?L._source:Li(C,b)},Lr=function(S){if(S.isLooped())return S._target;var p=Xh(S._source),i=Xh(S._target);return p===i?S._target:Li(i,p)},Ik=function(w,u){var d;if(jc(u)&&u.isExpanded()){var I=w.getDataUI(u);I&&I._88I&&(d=I._88I.rect)}return d?d:u.getRect()},yn=function(p,f,Y,x,k){return f?(Y=wo(Y,Ik(p,f)),Y.x+=x,Y.y+=k,Y):L},qm=function(N,n){if(!N||!n)return L;var Q,g,Y,X,A,s;if(N===n){if(X=N.getLoopedEdges(),!X)return L;X=new Rb(X)}else{if(A=N.getAgentEdges(),s=n.getAgentEdges(),!A||!s)return L;for(g=A.size(),Q=0;g>Q;Q++)Y=A.get(Q),s.contains(Y)&&(X||(X=new Rb),X.add(Y))}if(X)for(Q=0;Q<X.size();Q++)Y=X.get(Q),Y.getStyle($n)===sn&&(Y._22I(L),X.removeAt(Q),Q--);return X},Ln=function(E,D){var z=qm(E,D);if(z&&!z.isEmpty()){if(1===z.size())return z.get(0)._22I(L),void 0;var _=new Rb,X=new Rb;z.each(function(k){var V=k.s("edge.group");_.contains(V)||_.add(V)}),_.sort(),_.each(function(J){X.add(new G.EdgeGroup(z.toList(function(S){return J===S.s("edge.group")}),X))}),X.each(function(n){n.each(function(j){j._22I(n)})})}},lo=function(g,f){if(f){var y=f.rect,q=f.color,S=f.rotation,c=f.labelWidth,$=f.background,d=f.opacity,r=f.scale,j=r!=L&&1!==r;if(d!=L){var H=g.globalAlpha;g.globalAlpha*=d}if(S||j){g.save();var Y=y.x+y.width/2,s=y.y+y.height/2;Ei(g,Y,s),S&&vn(g,S),j&&g.scale(r,r),Ei(g,-Y,-s)}if($&&bf(g,y.x,y.y,y.width,y.height,$),c){var F=y.width,N=g.createLinearGradient(y.x,y.y,y.x+F,y.y);N.addColorStop(0,q),N.addColorStop(.9,q),N.addColorStop(1,lq),q=N,y.width=c}Pf(g,f.ss,y,f.font,q,f.align),c&&(y.width=F),(S||j)&&g.restore(),d!=L&&(g.globalAlpha=H)}},kn=function(G,e){if(e){var C=e.rect,W=C.x,H=C.y,N=C.width,s=C.height,R=e.background,n=e.borderWidth,Y=e.borderColor,Q=e.labelWidth,t=e.opacity,$=e.scale,h=$!=L&&1!==$;if(t!=L){var o=G.globalAlpha;G.globalAlpha*=t}if(h){G.save();var F=C.x+C.width/2,M=C.y+C.height/2;Ei(G,F,M),G.scale($,$),Ei(G,-F,-M)}if(e.expanded){var q=g(8,N/4),v=H+s-8;if(G.fillStyle=R,G.beginPath(),G.moveTo(W,H),G.lineTo(W,v),G.lineTo(W+N/2,v),G.lineTo(W+N/2,H+s),G.lineTo(W+N/2+q,v),G.lineTo(W+N,v),G.lineTo(W+N,H),G.closePath(),G.fill(),n&&(G.lineWidth=n,G.lineJoin="round",G.lineCap="round",G.strokeStyle=Y?Y:Bb(R),G.beginPath(),G.moveTo(W+N,H),G.lineTo(W+N,v),G.lineTo(W+N/2+q,v),G.lineTo(W+N/2,H+s),G.stroke(),G.strokeStyle=Y?Y:Sd(R),G.beginPath(),G.moveTo(W+N,H),G.lineTo(W,H),G.lineTo(W,v),G.lineTo(W+N/2,v),G.lineTo(W+N/2,H+s),G.stroke()),C.height-=8,R=e.color,Q){var d=N,I=G.createLinearGradient(W,H,W+d,H);I.addColorStop(0,R),I.addColorStop(.9,R),I.addColorStop(1,lq),R=I,C.width=Q}Pf(G,e.ss,C,e.font,R,e.align),Q&&(C.width=d),C.height+=8}else{var u=N/2;n&&(G.lineWidth=n,G.lineJoin="round",G.lineCap="round",G.strokeStyle=Y?Y:Bb(R),G.beginPath(),G.arc(W+u,H+u,u,B,1.6*p,!0),G.moveTo(W+u,H+s),G.lineTo(W+N-u/5,H+u),G.stroke(),G.strokeStyle=Y?Y:Sd(R),G.beginPath(),G.arc(W+u,H+u,u,1.6*p,B,!0),G.moveTo(W+u,H+s),G.lineTo(W+u/5,H+u),G.stroke()),G.fillStyle=R,G.beginPath(),G.arc(W+u,H+u,u,0,O,!0),G.moveTo(W+u,H+s),G.lineTo(W+N-u/5,H+u),G.lineTo(W+u/5,H+u),G.closePath(),G.fill(),G.fillStyle=e.color,G.beginPath(),G.arc(W+u,H+u,u/3,0,O,!0),G.fill()}h&&G.restore(),t!=L&&(G.globalAlpha=o)}},cl=function(C,Q){return Q>2*C?C:Q/2},Rf=function(E,K,T,D){if(!E||!K)return 0;var P=V(K.y-E.y,K.x-E.x);return T||(P=K.x<E.x?P+p:P),P+D},Xm=function(E,b,y,e,I,l,c){c&&(E.x>b.x||E.x===b.x&&E.y>b.y)&&(y=Il[y],I=-I);var j=wo(y,{x:0,y:0,width:el(E,b),height:0},l);return j.x+=e,j.y+=I,j=new vs(V(b.y-E.y,b.x-E.x)).tf(j),j.x+=E.x,j.y+=E.y,j},Mi=function(i,m,c,B,n){if(i._19Q=!0,!c.getEdgeGroup())return B?c.s("edge.gap"):0;var F,O=0,q=0,l=0;if(c.getEdgeGroup().getSiblings().each(function(Q){Q.each(function(E){if(m.isVisible(E)&&E.s($n)==n){var I=E.s("edge.gap");F?(q+=l/2+I/2,l=I):(F=E,l=I),E===c&&(O=q)}})}),B)return q-O+l;var L=O-q/2;return F&&c._40I!==F._40I&&(i._19Q=!1),L},Ag=function(){var r=function(k){var w=[];return k.forEach(function(A){w.push({x:A.x,y:A.y}),w.push({x:A.x+A.width,y:A.y+A.height}),w.push({x:A.x+A.width,y:A.y}),w.push({x:A.x,y:A.y+A.height})}),w};return function(s,k,h){if("oval"===s){var p=0,X=h.height/h.width,x=X*X,v=h.x+h.width/2,Q=h.y+h.height/2,V=r(k);V.forEach(function(z){var P=z.x-v,F=z.y-Q,A=P*P+F*F/x;A>p&&(p=A)}),p=w(p);var W=X*p;return{x:v-p,y:Q-W,width:2*p,height:2*W}}if("circle"===s){var Y=0,v=h.x+h.width/2,Q=h.y+h.height/2,V=r(k);return V.forEach(function(I){var T=I.x-v,L=I.y-Q,V=T*T+L*L;V>Y&&(Y=V)}),Y=w(Y),{x:v-Y,y:Q-Y,width:2*Y,height:2*Y}}return"roundRect"===s?(uc(h,g(h.width,h.height)/16),h):h}}(),Aj=G.graph={},Se=function(R,S,P){th(j+".graph."+R,S,P)};G.layout={};var Dn={comps:[{type:sq,points:[85,50,70,115,100,71,86,107,88,49,56,120,68,116,50,100,52,51,90,89,101,51,88,112,116,85,87,84,79,53,122,108,97,88,103,67,81,106,112,43,82,83,73,68,100,78,86,83,86,65,51,85,70,116,76,107,75,100,108,79,104,50,50,122],borderWidth:1,borderColor:L}]};Dn[Qo]=Dn[Te]=160,Nf("node_image",_l(30,30,[{type:rp,rect:[4,5,22,16],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[2,3,26,20],borderWidth:1,borderColor:bq},{type:rp,rect:[11,23,8,4],background:bq},{type:rp,rect:[6,27,18,2],background:bq}])),Nf("node_icon",_l(16,16,[{type:rp,rect:[2,2,12,10],gradient:Xc,gradientColor:pk,background:bq},{type:ve,rect:[2,2,12,10],width:1,color:bq},{type:rp,rect:[6,12,4,2],background:bq},{type:rp,rect:[4,14,8,1],background:bq}])),Nf("group_image",_l(66,39,[{type:rp,rect:[44.3,18,18.1,12.8],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[3.3,17.8,18.1,12.8],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:bq,gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[26.2,29.4,12.8,4.2],background:bq},{type:rp,rect:[21.3,33.5,22.5,2.3],background:bq},{type:rp,rect:[5.3,32.7,14.1,2.1],background:bq},{type:rp,rect:[9,30.4,6.7,2.4],background:bq},{type:rp,rect:[50,30.7,6.7,2.4],background:bq},{type:rp,rect:[46.3,33,14.1,2.1],background:bq}])),Nf("group_icon",_l(16,16,[{type:rp,rect:[4,12,4,2],background:bq},{type:rp,rect:[2,13,8,1],background:bq},{type:rp,rect:[12,12,2,1],background:bq},{type:rp,rect:[11,13,4,1],background:bq},{type:rp,rect:[10,7,6,5],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[1,2,10,10],gradient:Xc,gradientColor:pk,background:bq},{type:ve,rect:[1,2,10,10],width:1,color:bq}])),Nf("edge_icon",_l(16,16,[{type:rp,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[10.8,1,4,4],background:bq},{type:rp,rect:[1,11,4,4],background:bq}])),Nf("subGraph_image",_l(72,45,[{type:sq,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[29.6,30.7,3.6,1.8],background:bq},{type:rp,rect:[28.4,32.3,6,1.2],background:bq},{type:rp,rect:[37.3,32,10.8,1.8],background:bq},{type:rp,rect:[39.1,29.9,7.2,2.3],background:bq},{type:rp,rect:[26.6,23.7,9.6,7.2],gradient:Xc,gradientColor:pk,background:bq},{type:rp,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:bq,gradient:Xc,gradientColor:pk,background:bq}])),Nf("subGraph_icon",_l(17,17,[{type:sq,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Xc,gradientColor:pk,background:bq}])),Nf("shape_icon",_l(16,16,[{type:sq,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:bq}])),Nf("polyline_icon",_l(16,16,[{type:sq,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:bq},ap(7.5,.4),ap(7.5,6.3),ap(13.6,6.3),ap(13.6,14),ap(.7,13.9),ap(.7,.3)])),Nf("grid_icon",_l(16,16,[{type:rp,rect:[1,1,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[6,1,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[11,1,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[11,6,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[6,6,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[1,6,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[11,11,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[6,11,4,4],background:bq,gradient:Xc,gradientColor:pk},{type:rp,rect:[1,11,4,4],background:bq,gradient:Xc,gradientColor:pk}])),Nf("light_icon",_l(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:bq},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:bq,gradient:Xc,gradientColor:pk,background:{func:function(R){var n=R?R.s(Ek):L;return pr(n)?"rgb("+T(255*n[0])+","+T(255*n[1])+","+T(255*n[2])+")":n||bq}}}]));var Kl=function(b,Y){for(var z=b.vertices,_=0;_<z.length;_++){var r=z[_],P=r.y;r.y=r.z,r.z=-P,Y&&(r.y+=Y)}},Wc=function(w){for(var p,F,M,b,e,t,g=[],W=[],H=[],D=w.faces,i=0,h=0,L=0,R=D.length;R>i;i++,h+=6,L+=9){var Q=D[i];1===Q.i?(p||(p=[],F=[],M=[]),$h(Q,i,h,L,w,p,M,F)):2===Q.i?(b||(b=[],e=[],t=[]),$h(Q,i,h,L,w,b,t,e)):$h(Q,i,h,L,w,g,H,W)}return{vs:g,uv:W,ns:H,top_vs:p,top_uv:F,top_ns:M,bottom_vs:b,bottom_uv:e,bottom_ns:t}},$h=function(U,Z,W,n,J,l,E,m){var h=J.vertices,t=J.faceVertexUvs,q=h[U.a],B=h[U.b],g=h[U.c];l[n]=q.x,l[n+1]=q.y,l[n+2]=q.z,l[n+3]=B.x,l[n+4]=B.y,l[n+5]=B.z,l[n+6]=g.x,l[n+7]=g.y,l[n+8]=g.z;var o=U.vertexNormals;if(3===o.length){var v=o[0],D=o[1],V=o[2];E[n]=v.x,E[n+1]=v.y,E[n+2]=v.z,E[n+3]=D.x,E[n+4]=D.y,E[n+5]=D.z,E[n+6]=V.x,E[n+7]=V.y,E[n+8]=V.z}else{var R=U.normal;E[n]=R.x,E[n+1]=R.y,E[n+2]=R.z,E[n+3]=R.x,E[n+4]=R.y,E[n+5]=R.z,E[n+6]=R.x,E[n+7]=R.y,E[n+8]=R.z}var O=t[0][Z][0],f=t[0][Z][1],y=t[0][Z][2];m[W]=O.x,m[W+1]=O.y,m[W+2]=f.x,m[W+3]=f.y,m[W+4]=y.x,m[W+5]=y.y},Md=function(m,V,l,x,g,M,w,I,P){l==L&&(l=!0),x==L&&(x=!0),w==L&&(w=1),I==L&&(I=0);var S=new Jh;return vf(S,m,V,P),Wc(new ld(S,{top:l,bottom:x,curveSegments:g,amount:w,repeatUVLength:M},-w/2+I))},hh=function(g,a){this.x=g||0,this.y=a||0};hh.prototype={constructor:hh,add:function(x){return this.x+=x.x,this.y+=x.y,this},sub:function(W){return this.x-=W.x,this.y-=W.y,this},equals:function(Q){return Q.x===this.x&&Q.y===this.y},multiplyScalar:function(y){return this.x*=y,this.y*=y,this},distanceTo:function(L){return w(this.distanceToSquared(L))},distanceToSquared:function(O){var u=this.x-O.x,V=this.y-O.y;return u*u+V*V},clone:function(){return new hh(this.x,this.y)}};var Am=function(I,c,U){this.x=I||0,this.y=c||0,this.z=U||0};Am.prototype={constructor:Am,set:function(t,N,C){return this.x=t,this.y=N,this.z=C,this},setY:function(e){return this.y=e,this},copy:function(D){return this.x=D.x,this.y=D.y,this.z=D.z,this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this},addVectors:function(f,j){return this.x=f.x+j.x,this.y=f.y+j.y,this.z=f.z+j.z,this},sub:function(R){return this.x-=R.x,this.y-=R.y,this.z-=R.z,this},subVectors:function(_,N){return this.x=_.x-N.x,this.y=_.y-N.y,this.z=_.z-N.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},applyMatrix4:function(S){var s=this.x,x=this.y,_=this.z,J=S.elements;return this.x=J[0]*s+J[4]*x+J[8]*_+J[12],this.y=J[1]*s+J[5]*x+J[9]*_+J[13],this.z=J[2]*s+J[6]*x+J[10]*_+J[14],this},divideScalar:function(L){if(0!==L){var W=1/L;this.x*=W,this.y*=W,this.z*=W}else this.x=0,this.y=0,this.z=0;return this},dot:function(F){return this.x*F.x+this.y*F.y+this.z*F.z},length:function(){return w(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(d){var e=this.x,B=this.y,x=this.z;return this.x=B*d.z-x*d.y,this.y=x*d.x-e*d.z,this.z=e*d.y-B*d.x,this},crossVectors:function(O,i){var N=O.x,n=O.y,w=O.z,h=i.x,Z=i.y,a=i.z;return this.x=n*a-w*Z,this.y=w*h-N*a,this.z=N*Z-n*h,this},distanceTo:function(f){return w(this.distanceToSquared(f))},distanceToSquared:function(d){var b=this.x-d.x,$=this.y-d.y,Z=this.z-d.z;return b*b+$*$+Z*Z},clone:function(){return new Am(this.x,this.y,this.z)}};var Np=function(){this.elements=new Float32Array(16)};Np.prototype={constructor:Np,set:function(y,r,N,d,U,h,$,q,w,s,z,b,u,e,o,f){var O=this.elements;return O[0]=y,O[4]=r,O[8]=N,O[12]=d,O[1]=U,O[5]=h,O[9]=$,O[13]=q,O[2]=w,O[6]=s,O[10]=z,O[14]=b,O[3]=u,O[7]=e,O[11]=o,O[15]=f,this},makeRotationAxis:function(x,C){var G=n(C),B=l(C),X=1-G,s=x.x,m=x.y,v=x.z,r=X*s,I=X*m;return this.set(r*s+G,r*m-B*v,r*v+B*m,0,r*m+B*v,I*m+G,I*v-B*s,0,r*v-B*m,I*v+B*s,X*v*v+G,0,0,0,0,1),this}};var Yi=function(T){this.repeatUVLength=T};Yi.prototype={generateTopUV:function(r,x,t,W,h,X,U){var G,b,z,L,q=r.vertices,w=q[W].x,K=q[W].y,n=q[h].x,y=q[h].y,p=q[X].x,$=q[X].y,j=this.repeatUVLength;if(j)G=0,b=0,z=j,L=j;else{this._bb||(this._bb=x.getBoundingBox());var f=this._bb;G=f.minX,b=f.minY,z=f.maxX-G,L=f.maxY-b}return U?[new hh((w-G)/z,(K-b)/L),new hh((n-G)/z,(y-b)/L),new hh((p-G)/z,($-b)/L)]:[new hh((w-G)/z,1-(K-b)/L),new hh((n-G)/z,1-(y-b)/L),new hh((p-G)/z,1-($-b)/L)]},generateBottomUV:function(j,Y,g,b,y,I){return this.generateTopUV(j,Y,g,b,y,I,!0)},generateSideWallUV:function(l,Y,x,B,C,e,p,T,N,F,c,$){if(!this._cl){for(var o,v,a=[],k=0,m=x.length,_=0;m>_;_++){o=x[_],v=x[(_+1)%m];var d=o.x-v.x,t=o.y-v.y,M=w(d*d+t*t);a.push(k),k+=M}for(var _=0;m>_;_++)a[_]/=k;this._cl=a}var a=this._cl,E=1-N/F,Q=1-(N+1)/F,P=a[c],f=a[$];return f>P&&(P+=1),[new hh(P,E),new hh(f,E),new hh(f,Q),new hh(P,Q)]}};var Xg=function(K,n,X,g,k,P){this.a=K,this.b=n,this.c=X,this.i=P,this.normal=g instanceof Am?g:new Am,this.vertexNormals=g instanceof Array?g:[]};Xg.prototype={constructor:Xg};var Iq=function(){},Wm=Iq.prototype;Wm.getPointAt=function(C){var x=this.getUtoTmapping(C);return this.getPoint(x)},Wm.getPoints=function(u){u||(u=5);var B,c=[];for(B=0;u>=B;B++)c.push(this.getPoint(B/u));return c},Wm.getSpacedPoints=function(h){h||(h=5);var y,H=[];for(y=0;h>=y;y++)H.push(this.getPointAt(y/h));return H},Wm.getLength=function(){var O=this.getLengths();return O[O.length-1]},Wm.getLengths=function(O){if(O||(O=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==O+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var z,W,n=[],p=this.getPoint(0),T=0;for(n.push(0),W=1;O>=W;W++)z=this.getPoint(W/O),T+=z.distanceTo(p),n.push(T),p=z;return this.cacheArcLengths=n,n},Wm.getUtoTmapping=function(t,D){var N,g=this.getLengths(),O=0,_=g.length;N=D?D:t*g[_-1];for(var C,$=0,f=_-1;f>=$;)if(O=s($+(f-$)/2),C=g[O]-N,0>C)$=O+1;else{if(!(C>0)){f=O;break}f=O-1}if(O=f,g[O]==N){var z=O/(_-1);return z}var h=g[O],d=g[O+1],j=d-h,k=(N-h)/j,z=(O+k)/(_-1);
return z},Wm.getTangent=function(q){var L=1e-4,e=q-L,j=q+L;0>e&&(e=0),j>1&&(j=1);var Z=this.getPoint(e),x=this.getPoint(j),E=x.clone().sub(Z);return E.normalize()},Wm.getTangentAt=function(i){var k=this.getUtoTmapping(i);return this.getTangent(k)},Iq.create=function(m,k){return m.prototype=jh(Iq.prototype),m.prototype.getPoint=k,m};var Fl=function(){this.curves=[],this.autoClose=!1},_j=Fl.prototype=jh(Wm);_j.add=function(X){this.curves.push(X)},_j.closePath=function(){var H=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);H.equals(i)||this.curves.push(new Jj(i,H))},_j.getPoint=function(c){for(var p,y,k=c*this.getLength(),i=this.getCurveLengths(),Z=0;Z<i.length;){if(i[Z]>=k){p=i[Z]-k,y=this.curves[Z];var d=1-p/y.getLength();return y.getPointAt(d)}Z++}return null},_j.getLength=function(){var i=this.getCurveLengths();return i[i.length-1]},_j.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var A,p=[],$=0,C=this.curves.length;for(A=0;C>A;A++)$+=this.curves[A].getLength(),p.push($);return this.cacheLengths=p,p},_j.getTransformedPoints=function(m){return this.getPoints(m)},_j.getBoundingBox=function(){var w,F,d,f,G,H,y=this.getPoints();w=F=Number.NEGATIVE_INFINITY,f=G=Number.POSITIVE_INFINITY;var Y,l,b,X,E=y[0]instanceof Am;for(X=E?new Am:new hh,l=0,b=y.length;b>l;l++)Y=y[l],Y.x>w&&(w=Y.x),Y.x<f&&(f=Y.x),Y.y>F&&(F=Y.y),Y.y<G&&(G=Y.y),E&&(Y.z>d&&(d=Y.z),Y.z<H&&(H=Y.z)),X.add(Y);var W={minX:f,minY:G,maxX:w,maxY:F};return E&&(W.maxZ=d,W.minZ=H),W};var ei=function(s){Fl.call(this),this.actions=[],s&&this.fromPoints(s)},zn=ei.prototype=jh(Fl.prototype),eo="moveTo",oi="lineTo",Bg="quadraticCurveTo",Ue="bezierCurveTo",vo="arc",_d="ellipse";zn.fromPoints=function(z){this.moveTo(z[0].x,z[0].y);for(var w=1,c=z.length;c>w;w++)this.lineTo(z[w].x,z[w].y)},zn.moveTo=function(){var U=Array.prototype.slice.call(arguments);this.actions.push({action:eo,args:U})},zn.lineTo=function(j,y){var S=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,i=n[n.length-2],l=n[n.length-1],$=new Jj(new hh(i,l),new hh(j,y));this.curves.push($),this.actions.push({action:oi,args:S})},zn.quadraticCurveTo=function(P,Z,M,g){var K=Array.prototype.slice.call(arguments),R=this.actions[this.actions.length-1].args,W=R[R.length-2],m=R[R.length-1],O=new Nq(new hh(W,m),new hh(P,Z),new hh(M,g));this.curves.push(O),this.actions.push({action:Bg,args:K})},zn.bezierCurveTo=function(T,r,a,U,p,E){var D=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,$=o[o.length-2],c=o[o.length-1],W=new Ak(new hh($,c),new hh(T,r),new hh(a,U),new hh(p,E));this.curves.push(W),this.actions.push({action:Ue,args:D})},zn.arc=function(x,c,e,k,S,V){var i=this.actions[this.actions.length-1].args,X=i[i.length-2],E=i[i.length-1];this.absarc(x+X,c+E,e,k,S,V)},zn.absarc=function(X,q,H,b,i,p){this.absellipse(X,q,H,H,b,i,p)},zn.ellipse=function(J,e,A,h,R,p,r){var x=this.actions[this.actions.length-1].args,G=x[x.length-2],d=x[x.length-1];this.absellipse(J+G,e+d,A,h,R,p,r)},zn.absellipse=function(t,m,U,V,q,j,$){var W=Array.prototype.slice.call(arguments),H=new $p(t,m,U,V,q,j,$);this.curves.push(H);var R=H.getPoint(1);W.push(R.x),W.push(R.y),this.actions.push({action:_d,args:W})},zn.getSpacedPoints=function(Y){Y||(Y=40);for(var $=[],k=0;Y>k;k++)$.push(this.getPoint(k/Y));return $},zn.getPoints=function(z,r){z=z||12;var w,S,R,V,s,P,W,I,x,B,A,Y,E,f,i,g,d,_,u=[];for(w=0,S=this.actions.length;S>w;w++)switch(R=this.actions[w],V=R.action,s=R.args,V){case eo:u.push(new hh(s[0],s[1]));break;case oi:u.push(new hh(s[0],s[1]));break;case Bg:for(P=s[2],W=s[3],B=s[0],A=s[1],u.length>0?(f=u[u.length-1],Y=f.x,E=f.y):(f=this.actions[w-1].args,Y=f[f.length-2],E=f[f.length-1]),i=1;z>=i;i++)g=i/z,d=xk.b2(g,Y,B,P),_=xk.b2(g,E,A,W),u.push(new hh(d,_));break;case Ue:for(P=s[4],W=s[5],B=s[0],A=s[1],I=s[2],x=s[3],u.length>0?(f=u[u.length-1],Y=f.x,E=f.y):(f=this.actions[w-1].args,Y=f[f.length-2],E=f[f.length-1]),i=1;z>=i;i++)g=i/z,d=xk.b3(g,Y,B,I,P),_=xk.b3(g,E,A,x,W),u.push(new hh(d,_));break;case vo:var F,U=s[0],J=s[1],L=s[2],Q=s[3],v=s[4],o=!!s[5],e=v-Q,K=2*z;for(i=1;K>=i;i++)g=i/K,o||(g=1-g),F=Q+g*e,d=U+L*n(F),_=J+L*l(F),u.push(new hh(d,_));break;case _d:var F,U=s[0],J=s[1],H=s[2],y=s[3],Q=s[4],v=s[5],o=!!s[6],e=v-Q,K=2*z;for(i=1;K>=i;i++)g=i/K,o||(g=1-g),F=Q+g*e,d=U+H*n(F),_=J+y*l(F),u.push(new hh(d,_))}var T=u[u.length-1],O=1e-10;return Z(T.x-u[0].x)<O&&Z(T.y-u[0].y)<O&&u.splice(u.length-1,1),r&&u.push(u[0]),u},zn.toShapes=function(P,u){function V(B){var T,p,z,J,y,G=[],u=new ei;for(T=0,p=B.length;p>T;T++)z=B[T],y=z.args,J=z.action,J==eo&&0!=u.actions.length&&(G.push(u),u=new ei),u[J].apply(u,y);return 0!=u.actions.length&&G.push(u),G}function $(p){for(var u=[],m=0,o=p.length;o>m;m++){var d=p[m],G=new Jh;G.actions=d.actions,G.curves=d.curves,u.push(G)}return u}function d(S,j){for(var E=1e-10,p=j.length,t=!1,X=p-1,z=0;p>z;X=z++){var O=j[X],F=j[z],B=F.x-O.x,M=F.y-O.y;if(Z(M)>E){if(0>M&&(O=j[z],B=-B,F=j[X],M=-M),S.y<O.y||S.y>F.y)continue;if(S.y==O.y){if(S.x==O.x)return!0}else{var k=M*(S.x-O.x)-B*(S.y-O.y);if(0==k)return!0;if(0>k)continue;t=!t}}else{if(S.y!=O.y)continue;if(F.x<=S.x&&S.x<=O.x||O.x<=S.x&&S.x<=F.x)return!0}}return t}var O=V(this.actions);if(0==O.length)return[];if(u===!0)return $(O);var N,D,W,e=[];if(1==O.length)return D=O[0],W=new Jh,W.actions=D.actions,W.curves=D.curves,e.push(W),e;var f=!Jh.Utils.isClockWise(O[0].getPoints());f=P?!f:f;var z,v=[],t=[],o=[],l=0;t[l]=Q,o[l]=[];var y,R;for(y=0,R=O.length;R>y;y++)D=O[y],z=D.getPoints(),N=xk.isClockWise(z),N=P?!N:N,N?(!f&&t[l]&&l++,t[l]={s:new Jh,p:z},t[l].s.actions=D.actions,t[l].s.curves=D.curves,f&&l++,o[l]=[]):o[l].push({h:D,p:z[0]});if(!t[0])return $(O);if(t.length>1){for(var g=!1,j=[],c=0,m=t.length;m>c;c++)v[c]=[];for(var c=0,m=t.length;m>c;c++){t[c];for(var X=o[c],k=0;k<X.length;k++){for(var h=X[k],L=!0,Y=0;Y<t.length;Y++)d(h.p,t[Y].p)&&(c!=Y&&j.push({froms:c,tos:Y,hole:k}),L?(L=!1,v[Y].push(h)):g=!0);L&&v[c].push(h)}}j.length>0&&(g||(o=v))}var q,p,H;for(y=0,R=t.length;R>y;y++)for(W=t[y].s,e.push(W),q=o[y],p=0,H=q.length;H>p;p++)W.holes.push(q[p].h);return e};var Jh=function(){ei.apply(this,arguments),this.holes=[]},mc=Jh.prototype=jh(zn);mc.getPointsHoles=function(j){var L,D=this.holes.length,E=[];for(L=0;D>L;L++)E[L]=this.holes[L].getTransformedPoints(j);return E},mc.extractAllPoints=function(E){return{shape:this.getTransformedPoints(E),holes:this.getPointsHoles(E)}},mc.extractPoints=function(Z){return this.extractAllPoints(Z)};var xk={triangulateShape:function(G,l){function N(B,F,I){return B.x!=F.x?B.x<F.x?B.x<=I.x&&I.x<=F.x:F.x<=I.x&&I.x<=B.x:B.y<F.y?B.y<=I.y&&I.y<=F.y:F.y<=I.y&&I.y<=B.y}function B(T,k,A,F,V){var q=1e-10,u=k.x-T.x,h=k.y-T.y,Y=F.x-A.x,B=F.y-A.y,W=T.x-A.x,d=T.y-A.y,b=h*Y-u*B,y=h*W-u*d;if(Z(b)>q){var t;if(b>0){if(0>y||y>b)return[];if(t=B*W-Y*d,0>t||t>b)return[]}else{if(y>0||b>y)return[];if(t=B*W-Y*d,t>0||b>t)return[]}if(0==t)return!V||0!=y&&y!=b?[T]:[];if(t==b)return!V||0!=y&&y!=b?[k]:[];if(0==y)return[A];if(y==b)return[F];var O=t/b;return[{x:T.x+O*u,y:T.y+O*h}]}if(0!=y||B*W!=Y*d)return[];var g=0==u&&0==h,z=0==Y&&0==B;if(g&&z)return T.x!=A.x||T.y!=A.y?[]:[T];if(g)return N(A,F,T)?[T]:[];if(z)return N(T,k,A)?[A]:[];var j,m,v,f,E,C,H,R;return 0!=u?(T.x<k.x?(j=T,v=T.x,m=k,f=k.x):(j=k,v=k.x,m=T,f=T.x),A.x<F.x?(E=A,H=A.x,C=F,R=F.x):(E=F,H=F.x,C=A,R=A.x)):(T.y<k.y?(j=T,v=T.y,m=k,f=k.y):(j=k,v=k.y,m=T,f=T.y),A.y<F.y?(E=A,H=A.y,C=F,R=F.y):(E=F,H=F.y,C=A,R=A.y)),H>=v?H>f?[]:f==H?V?[]:[E]:R>=f?[E,m]:[E,C]:v>R?[]:v==R?V?[]:[j]:R>=f?[j,m]:[j,C]}function r(L,i,A,D){var u=1e-10,Y=i.x-L.x,z=i.y-L.y,g=A.x-L.x,Q=A.y-L.y,o=D.x-L.x,e=D.y-L.y,q=Y*Q-z*g,E=Y*e-z*o;if(Z(q)>u){var y=o*Q-e*g;return q>0?E>=0&&y>=0:E>=0||y>=0}return E>0}function M(d,t){function u(j,y){var Z=g.length-1,d=j-1;0>d&&(d=Z);var w=j+1;w>Z&&(w=0);var Y=r(g[j],g[d],g[w],$[y]);if(!Y)return!1;var b=$.length-1,_=y-1;0>_&&(_=b);var p=y+1;return p>b&&(p=0),Y=r($[y],$[_],$[p],g[j]),Y?!0:!1}function V(G,m){var k,j,x;for(k=0;k<g.length;k++)if(j=k+1,j%=g.length,x=B(G,m,g[k],g[j],!0),x.length>0)return!0;return!1}function H(I,v){var e,b,E,Q,K;for(e=0;e<n.length;e++)for(b=t[n[e]],E=0;E<b.length;E++)if(Q=E+1,Q%=b.length,K=B(I,v,b[E],b[Q],!0),K.length>0)return!0;return!1}for(var $,A,p,L,h,b,v,i,m,f,W,g=d.concat(),n=[],U=[],E=0,a=t.length;a>E;E++)n.push(E);for(var w=0,k=2*n.length;n.length>0&&(k--,!(0>k));)for(p=w;p<g.length;p++){L=g[p],A=-1;for(var E=0;E<n.length;E++)if(b=n[E],v=L.x+":"+L.y+":"+b,U[v]===Q){$=t[b];for(var q=0;q<$.length;q++)if(h=$[q],u(p,q)&&!V(L,h)&&!H(L,h)){A=q,n.splice(E,1),i=g.slice(0,p+1),m=g.slice(p),f=$.slice(A),W=$.slice(0,A+1),g=i.concat(f).concat(W).concat(m),w=p;break}if(A>=0)break;U[v]=!0}if(A>=0)break}return g}for(var f,H,m,b,y,X,I={},j=G.concat(),h=0,i=l.length;i>h;h++)Array.prototype.push.apply(j,l[h]);for(f=0,H=j.length;H>f;f++)y=j[f].x+":"+j[f].y,I[y]!==Q,I[y]=f;var o=M(G,l),$=Hl.Triangulate(o,!1);for(f=0,H=$.length;H>f;f++)for(b=$[f],m=0;3>m;m++)y=b[m].x+":"+b[m].y,X=I[y],X!==Q&&(b[m]=X);return $.concat()},isClockWise:function(X){return Hl.Triangulate.area(X)<0},b2p0:function(q,u){var T=1-q;return T*T*u},b2p1:function(e,M){return 2*(1-e)*e*M},b2p2:function(j,A){return j*j*A},b2:function(X,o,R,f){return this.b2p0(X,o)+this.b2p1(X,R)+this.b2p2(X,f)},b3p0:function(E,R){var Q=1-E;return Q*Q*Q*R},b3p1:function(Z,s){var p=1-Z;return 3*p*p*Z*s},b3p2:function(r,u){var J=1-r;return 3*J*r*r*u},b3p3:function(I,F){return I*I*I*F},b3:function(L,T,$,G,M){return this.b3p0(L,T)+this.b3p1(L,$)+this.b3p2(L,G)+this.b3p3(L,M)}},Hl={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(r){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(r){var i=r.familyName.toLowerCase(),C=this;return C.faces[i]=C.faces[i]||{},C.faces[i][r.cssFontWeight]=C.faces[i][r.cssFontWeight]||{},C.faces[i][r.cssFontWeight][r.cssFontStyle]=r,C.faces[i][r.cssFontWeight][r.cssFontStyle]=r,r},drawText:function(r){var H,V=this.getFace(),j=this.size/V.resolution,L=0,b=String(r).split(""),w=b.length,K=[];for(H=0;w>H;H++){var T=new ei,F=this.extractGlyphPoints(b[H],V,j,L,T);L+=F.offset,K.push(F.path)}var v=L/2;return{paths:K,offset:v}},extractGlyphPoints:function(W,L,G,t,j){var $,Q,H,z,e,T,s,E,b,Z,g,U,Y,a,x,q,B,p,R,o=[],S=L.glyphs[W]||L.glyphs["?"];if(S){if(S.o)for(z=S._cachedOutline||(S._cachedOutline=S.o.split(" ")),T=z.length,s=G,E=G,$=0;T>$;)switch(e=z[$++]){case"m":b=z[$++]*s+t,Z=z[$++]*E,j.moveTo(b,Z);break;case"l":b=z[$++]*s+t,Z=z[$++]*E,j.lineTo(b,Z);break;case"q":if(g=z[$++]*s+t,U=z[$++]*E,x=z[$++]*s+t,q=z[$++]*E,j.quadraticCurveTo(x,q,g,U),R=o[o.length-1])for(Y=R.x,a=R.y,Q=1,H=this.divisions;H>=Q;Q++){var N=Q/H;xk.b2(N,Y,x,g),xk.b2(N,a,q,U)}break;case"b":if(g=z[$++]*s+t,U=z[$++]*E,x=z[$++]*s+t,q=z[$++]*E,B=z[$++]*s+t,p=z[$++]*E,j.bezierCurveTo(x,q,B,p,g,U),R=o[o.length-1])for(Y=R.x,a=R.y,Q=1,H=this.divisions;H>=Q;Q++){var N=Q/H;xk.b3(N,Y,x,B,g),xk.b3(N,a,q,p,U)}}return{offset:S.ha*G,path:j}}}};Hl.generateShapes=function(o,P){P=P||{};var U=P.size!==Q?P.size:100,i=P.curveSegments!==Q?P.curveSegments:4,G=P.font!==Q?P.font:"helvetiker",e=P.weight!==Q?P.weight:"normal",u=P.style!==Q?P.style:"normal";Hl.size=U,Hl.divisions=i,Hl.face=G,Hl.weight=e,Hl.style=u;for(var K=Hl.drawText(o),n=K.paths,y=[],x=0,$=n.length;$>x;x++)Array.prototype.push.apply(y,n[x].toShapes());return y},function(D){var $=1e-10,u=function(Q,j){var O=Q.length;if(3>O)return null;var D,b,T,i=[],Y=[],r=[];if(N(Q)>0)for(b=0;O>b;b++)Y[b]=b;else for(b=0;O>b;b++)Y[b]=O-1-b;var W=O,C=2*W;for(b=W-1;W>2;){if(C--<=0)return j?r:i;if(D=b,D>=W&&(D=0),b=D+1,b>=W&&(b=0),T=b+1,T>=W&&(T=0),l(Q,D,b,T,W,Y)){var g,p,$,V,s;for(g=Y[D],p=Y[b],$=Y[T],i.push([Q[g],Q[p],Q[$]]),r.push([Y[D],Y[b],Y[T]]),V=b,s=b+1;W>s;V++,s++)Y[V]=Y[s];W--,C=2*W}}return j?r:i},N=function(c){for(var i=c.length,N=0,h=i-1,O=0;i>O;h=O++)N+=c[h].x*c[O].y-c[O].x*c[h].y;return.5*N},l=function(q,W,i,H,L,F){var w,j,o,Y,_,Z,y,p,X;if(j=q[F[W]].x,o=q[F[W]].y,Y=q[F[i]].x,_=q[F[i]].y,Z=q[F[H]].x,y=q[F[H]].y,$>(Y-j)*(y-o)-(_-o)*(Z-j))return!1;var g,U,E,T,b,v,C,Q,I,N,R,J,D,s,h;for(g=Z-Y,U=y-_,E=j-Z,T=o-y,b=Y-j,v=_-o,w=0;L>w;w++)if(p=q[F[w]].x,X=q[F[w]].y,!(p===j&&X===o||p===Y&&X===_||p===Z&&X===y)&&(C=p-j,Q=X-o,I=p-Y,N=X-_,R=p-Z,J=X-y,h=g*N-U*I,D=b*Q-v*C,s=E*J-T*R,h>=-$&&s>=-$&&D>=-$))return!1;return!0};return D.Triangulate=u,D.Triangulate.area=N,D}(Hl),N._typeface_js={faces:Hl.faces,loadFace:Hl.loadFace};var gb=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Ti=gb.prototype={constructor:gb,computeFaceNormals:function(){for(var k=new Am,A=new Am,J=0,c=this.faces.length;c>J;J++){var e=this.faces[J],O=this.vertices[e.a],o=this.vertices[e.b],x=this.vertices[e.c];k.subVectors(x,o),A.subVectors(O,o),k.cross(A),k.normalize(),e.normal.copy(k)}},computeVertexNormals:function(l){var W,u,n,g,S,P;for(P=new Array(this.vertices.length),W=0,u=this.vertices.length;u>W;W++)P[W]=new Am;if(l){var L,N,K,Z=new Am,E=new Am;for(n=0,g=this.faces.length;g>n;n++)S=this.faces[n],L=this.vertices[S.a],N=this.vertices[S.b],K=this.vertices[S.c],Z.subVectors(K,N),E.subVectors(L,N),Z.cross(E),P[S.a].add(Z),P[S.b].add(Z),P[S.c].add(Z)}else for(n=0,g=this.faces.length;g>n;n++)S=this.faces[n],P[S.a].add(S.normal),P[S.b].add(S.normal),P[S.c].add(S.normal);for(W=0,u=this.vertices.length;u>W;W++)P[W].normalize();for(n=0,g=this.faces.length;g>n;n++)S=this.faces[n],S.vertexNormals[0]=P[S.a].clone(),S.vertexNormals[1]=P[S.b].clone(),S.vertexNormals[2]=P[S.c].clone()},mergeVertices:function(){var p,$,L,X,K,e,I,B,N={},h=[],s=[],Z=4,g=b(10,Z);for(L=0,X=this.vertices.length;X>L;L++)p=this.vertices[L],$=u(p.x*g)+"_"+u(p.y*g)+"_"+u(p.z*g),N[$]===Q?(N[$]=L,h.push(this.vertices[L]),s[L]=h.length-1):s[L]=s[N[$]];var H=[];for(L=0,X=this.faces.length;X>L;L++){K=this.faces[L],K.a=s[K.a],K.b=s[K.b],K.c=s[K.c],e=[K.a,K.b,K.c];for(var D=0;3>D;D++)if(e[D]==e[(D+1)%3]){H.push(L);break}}for(L=H.length-1;L>=0;L--){var o=H[L];for(this.faces.splice(o,1),I=0,B=this.faceVertexUvs.length;B>I;I++)this.faceVertexUvs[I].splice(o,1)}var z=this.vertices.length-h.length;return this.vertices=h,z}},$p=function(t,d,i,R,w,$,n){this.aX=t,this.aY=d,this.xRadius=i,this.yRadius=R,this.aStartAngle=w,this.aEndAngle=$,this.aClockwise=n};$p.prototype=jh(Wm),$p.prototype.getPoint=function(r){var R,Q=this.aEndAngle-this.aStartAngle;0>Q&&(Q+=O),Q>O&&(Q-=O),R=this.aClockwise===!0?this.aEndAngle+(1-r)*(O-Q):this.aStartAngle+r*Q;var s=this.aX+this.xRadius*n(R),V=this.aY+this.yRadius*l(R);return new hh(s,V)};var Jj=function(N,e){this.v1=N,this.v2=e},Om=Jj.prototype=jh(Wm);Om.getPoint=function(T){var c=this.v2.clone().sub(this.v1);return c.multiplyScalar(T).add(this.v1),c},Om.getPointAt=function(C){return this.getPoint(C)},Om.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};var Nq=function(n,I,R){this.v0=n,this.v1=I,this.v2=R};Nq.prototype=jh(Wm),Nq.prototype.getPoint=function(V){var s,r;return s=xk.b2(V,this.v0.x,this.v1.x,this.v2.x),r=xk.b2(V,this.v0.y,this.v1.y,this.v2.y),new hh(s,r)};var Ak=function(l,j,M,q){this.v0=l,this.v1=j,this.v2=M,this.v3=q};Ak.prototype=jh(Wm),Ak.prototype.getPoint=function(x){var C,E;return C=xk.b3(x,this.v0.x,this.v1.x,this.v2.x,this.v3.x),E=xk.b3(x,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new hh(C,E)},Iq.create(function(Q,B){this.v1=Q,this.v2=B},function(q){var A=new Am;return A.subVectors(this.v2,this.v1),A.multiplyScalar(q),A.add(this.v1),A});var Kd=Iq.create(function(g,h,x){this.v0=g,this.v1=h,this.v2=x},function(Z){var D,J,j;return D=xk.b2(Z,this.v0.x,this.v1.x,this.v2.x),J=xk.b2(Z,this.v0.y,this.v1.y,this.v2.y),j=xk.b2(Z,this.v0.z,this.v1.z,this.v2.z),new Am(D,J,j)}),Mj=Iq.create(function(b,M,J,c){this.v0=b,this.v1=M,this.v2=J,this.v3=c},function(F){var O,n,R;return O=xk.b3(F,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=xk.b3(F,this.v0.y,this.v1.y,this.v2.y,this.v3.y),R=xk.b3(F,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Am(O,n,R)}),_b=function(G,S,a,C,r,d,y,V){gb.call(this),C=C!==Q?C:.5,r=r!==Q?r:.5,V=V!==Q?V:1,G=G||8,d=d||0,y=y||O;var F,c,j=1,s=V/2,e=[],P=[],H=this.vertices,B=this.faces,M=this.faceVertexUvs;for(c=0;j>=c;c++){var Y=[],x=[],$=c/j,q=$*(r-C)+C;for(F=0;G>=F;F++){var D=F/G,f=new Am,E=-(D*y+d);f.z=q*l(E),f.y=-$*V+s,f.x=q*n(E),H.push(f),Y.push(H.length-1),x.push(new hh(D,$))}e.push(Y),P.push(x)}var K,W,U=(r-C)/V;for(F=0;G>F;F++)for(0!==C?(K=H[e[0][F]].clone(),W=H[e[0][F+1]].clone()):(K=H[e[1][F]].clone(),W=H[e[1][F+1]].clone()),K.setY(w(K.x*K.x+K.z*K.z)*U).normalize(),W.setY(w(W.x*W.x+W.z*W.z)*U).normalize(),c=0;j>c;c++){var L=e[c][F],T=e[c+1][F],I=e[c+1][F+1],v=e[c][F+1],h=K.clone(),g=K.clone(),k=W.clone(),t=W.clone(),R=P[c][F].clone(),Z=P[c+1][F].clone(),m=P[c+1][F+1].clone(),p=P[c][F+1].clone();B.push(new Xg(L,T,v,[h,g,t])),M[0].push([R,Z,p]),B.push(new Xg(T,I,v,[g.clone(),k,t.clone()])),M[0].push([Z.clone(),m,p.clone()])}if(S&&C>0)for(this.vertices.push(new Am(0,s,0)),F=0;G>F;F++){var L=e[0][F],T=e[0][F+1],I=this.vertices.length-1,h=new Am(0,1,0),g=new Am(0,1,0),k=new Am(0,1,0),R=P[0][F].clone(),Z=P[0][F+1].clone(),m=new hh(Z.x,0);B.push(new Xg(L,T,I,[h,g,k],null,1));var z=F/G*O,o=n(z),_=l(z),X=(F+1)/G*O,u=n(X),i=l(X);M[0].push([new hh(.5+.5*o,.5+.5*_),new hh(.5+.5*u,.5+.5*i),new hh(.5,.5)])}if(a&&r>0)for(this.vertices.push(new Am(0,-s,0)),F=0;G>F;F++){var L=e[c][F+1],T=e[c][F],I=H.length-1,h=new Am(0,-1,0),g=new Am(0,-1,0),k=new Am(0,-1,0),R=P[c][F+1].clone(),Z=P[c][F].clone();B.push(new Xg(L,T,I,[h,g,k],null,2));var z=F/G*O,o=n(z),_=l(z),X=(F+1)/G*O,u=n(X),i=l(X);M[0].push([new hh(.5+.5*u,.5-.5*i),new hh(.5+.5*o,.5-.5*_),new hh(.5,.5)])}};_b.prototype=jh(Ti);var ar=function($,t,i,U,m,z,A){gb.call(this),A=A||.5,$=$||16,t=t||16,i=(i!==Q?i:0)-p,U=U!==Q?U:O,m=m!==Q?m:0,z=z!==Q?z:p;var k,V,j=[],x=[],D=this.vertices,v=this.faces,d=this.faceVertexUvs;for(V=0;t>=V;V++){var b=[],r=[];for(k=0;$>=k;k++){var F=k/$,y=V/t,h=new Am;h.x=-A*n(i+F*U)*l(m+y*z),h.y=A*n(m+y*z),h.z=A*l(i+F*U)*l(m+y*z),D.push(h),b.push(D.length-1),r.push(new hh(F,y))}j.push(b),x.push(r)}for(V=0;t>V;V++)for(k=0;$>k;k++){var G=j[V][k+1],u=j[V][k],X=j[V+1][k],J=j[V+1][k+1],S=D[G].clone().normalize(),s=D[u].clone().normalize(),H=D[X].clone().normalize(),N=D[J].clone().normalize(),Y=x[V][k+1].clone(),C=x[V][k].clone(),I=x[V+1][k].clone(),M=x[V+1][k+1].clone();Z(D[G].y)===A?(Y.x=(Y.x+C.x)/2,v.push(new Xg(G,X,J,[S,H,N])),d[0].push([Y,I,M])):Z(D[X].y)===A?(I.x=(I.x+M.x)/2,v.push(new Xg(G,u,X,[S,s,H])),d[0].push([Y,C,I])):(v.push(new Xg(G,u,J,[S,s,N])),d[0].push([Y,C,M]),v.push(new Xg(u,X,J,[s.clone(),H,N.clone()])),d[0].push([C.clone(),I,M.clone()]))}};ar.prototype=jh(Ti);var Ch=function(k,Y,R,J,G,r){gb.call(this),k=k||.33,Y=Y||.17,J=J||8,R=R||6,G=G||0,r=r||O;for(var U=new Am,m=[],c=[],T=0;J>=T;T++)for(var x=T/J*O+p,i=0;R>=i;i++){var I=i/R*r+G;U.x=k*n(I),U.z=-k*l(I);var h=new Am,H=k+Y*n(x);h.x=H*n(I),h.z=-H*l(I),h.y=Y*l(x),this.vertices.push(h),m.push(new hh(i/R,1-T/J)),c.push(h.clone().sub(U).normalize())}for(var T=1;J>=T;T++)for(var i=1;R>=i;i++){var z=(R+1)*T+i-1,F=(R+1)*(T-1)+i-1,b=(R+1)*(T-1)+i,u=(R+1)*T+i,B=new Xg(z,F,u,[c[z].clone(),c[F].clone(),c[u].clone()]);this.faces.push(B),this.faceVertexUvs[0].push([m[z].clone(),m[F].clone(),m[u].clone()]),B=new Xg(F,b,u,[c[F].clone(),c[b].clone(),c[u].clone()]),this.faces.push(B),this.faceVertexUvs[0].push([m[F].clone(),m[b].clone(),m[u].clone()])}this.computeFaceNormals()};Ch.prototype=jh(Ti);var ld=function(C,B,q){return C?(gb.call(this),C=C instanceof Array?C:[C],this.addShapeList(C,B),Kl(this,q),this.computeFaceNormals(),void 0):(C=[],void 0)},Ab=ld.prototype=jh(gb.prototype);Ab.addShapeList=function(Y,I){for(var B=Y.length,X=0;B>X;X++){var q=Y[X];this.addShape(q,I)}},Ab.addShape=function($,X){function P(){if(X.bottom)for(var W=0;a>W;W++)i=I[W],w(i[2],i[1],i[0],!0);if(X.top)for(W=0;a>W;W++)i=I[W],w(i[0]+o*A,i[1]+o*A,i[2]+o*A,!1)}function U(){var l=0;for(j(O,l),l+=O.length,v=0,t=C.length;t>v;v++)M=C[v],j(M,l),l+=M.length}function j(P,z){for(var E,J,k=P.length;--k>=0;){E=k,J=k-1,0>J&&(J=P.length-1);var V=0,N=A;for(V=0;N>V;V++){var e=o*V,l=o*(V+1),X=z+E+e,p=z+J+e,q=z+J+l,B=z+E+l;x(X,p,q,B,P,V,N,E,J)}}}function Y(V,A,J){F.vertices.push(new Am(V,A,J))}function w(z,p,c,L){z+=b,p+=b,c+=b,F.faces.push(new Xg(z,p,c,null,null,L?2:1));var D=L?K.generateBottomUV(F,$,X,z,p,c):K.generateTopUV(F,$,X,z,p,c);F.faceVertexUvs[0].push(D)}function x(j,y,h,q,D,R,s,c,t){j+=b,y+=b,h+=b,q+=b,F.faces.push(new Xg(j,y,q)),F.faces.push(new Xg(y,h,q));var l=K.generateSideWallUV(F,$,D,X,j,y,h,q,R,s,c,t);F.faceVertexUvs[0].push([l[0],l[1],l[3]]),F.faceVertexUvs[0].push([l[1],l[2],l[3]])}var G,g,m,c,h,T=X.amount,H=X.curveSegments||Gf,A=X.steps||1,E=X.extrudePath,n=!1,K=new Yi(X.repeatUVLength);E&&(G=E.getSpacedPoints(A),n=!0,g=X.frames!==Q?X.frames:new _o.FrenetFrames(E,A,!1),m=new Am,c=new Am,h=new Am);var M,v,t,F=this,b=this.vertices.length,S=$.extractPoints(H),_=S.shape,C=S.holes,f=!xk.isClockWise(_);if(f){for(_=_.reverse(),v=0,t=C.length;t>v;v++)M=C[v],xk.isClockWise(M)&&(C[v]=M.reverse());f=!1}var I=xk.triangulateShape(_,C),O=_;for(v=0,t=C.length;t>v;v++)M=C[v],_=_.concat(M);for(var l,i,o=_.length,a=I.length,B=0;o>B;B++)l=_[B],n?(c.copy(g.normals[0]).multiplyScalar(l.x),m.copy(g.binormals[0]).multiplyScalar(l.y),h.copy(G[0]).add(c).add(m),Y(h.x,h.y,h.z)):Y(l.x,l.y,0);var z;for(z=1;A>=z;z++)for(B=0;o>B;B++)l=_[B],n?(c.copy(g.normals[z]).multiplyScalar(l.x),m.copy(g.binormals[z]).multiplyScalar(l.y),h.copy(G[z]).add(c).add(m),Y(h.x,h.y,h.z)):Y(l.x,l.y,T/A*z);P(),U()};var _o=function(b,o,P,d,M){function X(B,s,Z){return A.vertices.push(new Am(B,s,Z))-1}gb.call(this),o=o||64,P=P||1,d=d||8,M=M||!1;var Z,D,y,C,i,N,w,R,I,g,r,V,W,F,f,a,z,Q,e,G,B=[],A=this,m=o+1,q=new Am,h=new _o.FrenetFrames(b,o,M),$=h.tangents,T=h.normals,s=h.binormals;for(this.tangents=$,this.normals=T,this.binormals=s,I=0;m>I;I++)for(B[I]=[],C=I/(m-1),R=b.getPointAt(C),Z=$[I],D=T[I],y=s[I],g=0;d>g;g++)i=g/d*O,N=-P*n(i),w=P*l(i),q.copy(R),q.x+=N*D.x+w*y.x,q.y+=N*D.y+w*y.y,q.z+=N*D.z+w*y.z,B[I][g]=X(q.x,q.y,q.z);for(I=0;o>I;I++)for(g=0;d>g;g++)r=M?(I+1)%o:I+1,V=(g+1)%d,W=B[I][g],F=B[r][g],f=B[r][V],a=B[I][V],z=new hh(I/o,g/d),Q=new hh((I+1)/o,g/d),e=new hh((I+1)/o,(g+1)/d),G=new hh(I/o,(g+1)/d),this.faces.push(new Xg(W,F,a)),this.faceVertexUvs[0].push([z,Q,G]),this.faces.push(new Xg(F,f,a)),this.faceVertexUvs[0].push([Q.clone(),e,G.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};_o.prototype=jh(Ti),_o.FrenetFrames=function(N,S,i){function c(){f[0]=new Am,v[0]=new Am,G=Number.MAX_VALUE,q=Z(W[0].x),z=Z(W[0].y),t=Z(W[0].z),G>=q&&(G=q,I.set(1,0,0)),G>=z&&(G=z,I.set(0,1,0)),G>=t&&I.set(0,0,1),L.crossVectors(W[0],I).normalize(),f[0].crossVectors(W[0],L),v[0].crossVectors(W[0],f[0])}var l,G,q,z,t,w,F,I=new Am,W=[],f=[],v=[],L=new Am,k=new Np,U=S+1,u=1e-4;for(this.tangents=W,this.normals=f,this.binormals=v,w=0;U>w;w++)F=w/(U-1),W[w]=N.getTangentAt(F),W[w].normalize();for(c(),w=1;U>w;w++)f[w]=f[w-1].clone(),v[w]=v[w-1].clone(),L.crossVectors(W[w-1],W[w]),L.length()>u&&(L.normalize(),l=X(Sg(W[w-1].dot(W[w]),-1,1)),f[w].applyMatrix4(k.makeRotationAxis(L,l))),v[w].crossVectors(W[w],f[w]);if(i)for(l=X(Sg(f[0].dot(f[U-1]),-1,1)),l/=U-1,W[0].dot(L.crossVectors(f[0],f[U-1]))>0&&(l=-l),w=1;U>w;w++)f[w].applyMatrix4(k.makeRotationAxis(W[w],l*w)),v[w].crossVectors(W[w],f[w])};var Sk=function(p,Q,s,c){gb.call(this),Q=Q||18,s=s||0,c=c==L?O:c;for(var y=1/(p.length-1),u=1/Q,M=0,N=Q;N>=M;M++)for(var A=s+M*u*c,o=n(A),U=l(A),W=0,G=p.length;G>W;W++){var e=p[W],D=new Am;D.x=o*e.x-U*e.y,D.y=U*e.x+o*e.y,D.z=e.z,this.vertices.push(D)}for(var R=p.length,M=0,N=Q;N>M;M++)for(var W=0,G=p.length-1;G>W;W++){var Z=W+R*M,P=Z,a=Z+R,o=Z+1+R,B=Z+1,S=M*u,r=W*y,I=S+u,h=r+y;this.faces.push(new Xg(P,B,a)),this.faceVertexUvs[0].push([new hh(S,r),new hh(S,h),new hh(I,r)]),this.faces.push(new Xg(a,B,o)),this.faceVertexUvs[0].push([new hh(I,r),new hh(S,h),new hh(I,h)])}this.mergeVertices(),Kl(this),this.computeFaceNormals(),this.computeVertexNormals()};Sk.prototype=jh(Ti);var fe=function(O,w){w=w||{};var G=Hl.generateShapes(O,w);w.amount=w.height!==Q?w.height:50,ld.call(this,G,w)};fe.prototype=jh(Ab);var mr=G.Node=function(){ml(mr,this)},ig={X:xj,Y:zk,Z:Yo},mn={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Ng="xzy",md=function(W,M,L){if(M){var D=M[0],J=M[1],k=M[2];"xzy"===L?(zk(W,J),Yo(W,k),xj(W,D)):"xyz"===L?(Yo(W,k),zk(W,J),xj(W,D)):"yxz"===L?(Yo(W,k),xj(W,D),zk(W,J)):"yzx"===L?(xj(W,D),Yo(W,k),zk(W,J)):"zxy"===L?(zk(W,J),xj(W,D),Yo(W,k)):"zyx"===L?(xj(W,D),zk(W,J),Yo(W,k)):(zk(W,J),Yo(W,k),xj(W,D))}};ao("Node",ck,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Ng,_64O:0,_rotationX:0,_53O:0,_host:L,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return Gk},_22Q:function(){return Cc},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(V,z){Lh(V,rl(L,L,this.r3(),this.getRotationMode())),this.translate3d(V[0]*z,V[1]*z,V[2]*z)},translateFront:function(b){this.translate3dBy([0,0,1],b)},translateBack:function(_){this.translate3dBy([0,0,-1],_)},translateLeft:function(L){this.translate3dBy([-1,0,0],L)},translateRight:function(w){this.translate3dBy([1,0,0],w)},translateTop:function(I){this.translate3dBy([0,1,0],I)},translateBottom:function(Y){this.translate3dBy([0,-1,0],Y)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(s,T,H){1===arguments.length&&(T=s[1],H=s[2],s=s[0]),this.p(s,H),this.setElevation(T)},translate3d:function(q,V,m){1===arguments.length&&(V=q[1],m=q[2],q=q[0]),this.translate(q,m),this.setElevation(this._54O+V)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(y,Y,C){1===arguments.length&&(Y=y[1],C=y[2],y=y[0]),this.setSize(y,C),this.setTall(Y)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(F,Y,U){1===arguments.length&&(Y=F[1],U=F[2],F=F[0]),this.setRotationX(F),this.setRotation(-Y),this.setRotationZ(U)},setRotationY:function(L){this.setRotation(-L)},getRotationY:function(){return-this._64O},lookAt:function(s,g){g=g||t;var I=this,X=Of(s,I.p3()),k=el(X);g===t?(I.r3([-M(X[1]/k),-V(X[2],X[0])+B,0]),I.setRotationMode("xzy")):g===S?(I.r3(0,-V(X[2],X[0]),M(X[1]/k)),I.setRotationMode("zyx")):g===d?(I.r3(0,-V(X[2],X[0])+p,-M(X[1]/k)),I.setRotationMode("zyx")):g===Tg?(I.r3([-M(X[1]/k)+B,-V(X[2],X[0])+B,0]),I.setRotationMode("xzy")):g===Po&&(I.r3([-M(X[1]/k)-B,-V(X[2],X[0])+B,0]),I.setRotationMode("xzy")),g===_&&(I.r3([-M(X[1]/k)+p,-V(X[2],X[0])+B,p]),I.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(n){var o=this;if(o!==n&&o._host!==n){var t=o._host;t&&t._removeAttach(o),o._host=n,o._host&&o._host._addAttach(o),o.fp("host",t,n),o.onHostChanged(t,n)}},getAttaches:function(){return this._69O},_addAttach:function(g){var A=this;A._69O||(A._69O=new Rb),A._69O.add(g),A.fp("attaches",L,g)},_removeAttach:function(G){var N=this;N._69O.remove(G),N._69O.isEmpty()&&delete N._69O,N.fp("attaches",G,L)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(d){var L=this;L._44I||(L._44I=new Rb),L._42I||(L._42I=new Rb),L._44I.add(d),L._42I.add(d),L._20I()},_4I:function(Q){var g=this;g._44I||(g._44I=new Rb),g._43I||(g._43I=new Rb),g._44I.add(Q),g._43I.add(Q),g._20I()},_16I:function(Y){var i=this;i._44I.remove(Y),i._42I.remove(Y),i._44I.isEmpty()&&delete i._44I,i._42I.isEmpty()&&delete i._42I,i._20I()},_18I:function(M){var T=this;T._44I.remove(M),T._43I.remove(M),T._44I.isEmpty()&&delete T._44I,T._43I.isEmpty()&&delete T._43I,T._20I()},_20I:function(){var f=this;if(delete f._45I,!f._44I||f._44I.isEmpty())return delete f._70O,void 0;var d;f._44I.each(function(u){u.isLooped()&&(d||(d={}),d[u._id]||(f._45I||(f._45I=new Rb),f._45I.add(u),d[u._id]=u))}),d?(f._70O=new Rb,f._44I.each(function(e){d[e._id]?"A"===d[e._id]||(d[e._id]="A",f._70O.add(e)):f._70O.add(e)})):f._70O=f._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(v){var D=this;D._46I||(D._46I=new Rb),D._48I||(D._48I=new Rb),D._46I.add(v),D._48I.add(v),D._19I()},_3I:function(r){var R=this;R._47I||(R._47I=new Rb),R._48I||(R._48I=new Rb),R._47I.add(r),R._48I.add(r),R._19I()},_15I:function(y){var v=this;v._46I.remove(y),v._48I.remove(y),v._46I.isEmpty()&&delete v._46I,v._48I.isEmpty()&&delete v._48I,v._19I()},_17I:function(j){var O=this;O._47I.remove(j),O._48I.remove(j),O._47I.isEmpty()&&delete O._47I,O._48I.isEmpty()&&delete O._48I,O._19I()},_19I:function(){var U=this;delete U._49I;var R=U._48I;if(R&&!R.isEmpty()){var C={};R.each(function(g){C[g._id]?U._49I||(U._49I=new Rb):C[g._id]=g}),U._49I?R.each(function(d){C[d._id]&&(U._49I.add(d),delete C[d._id])}):U._49I=R}},getImage:function(){return this._image},setImage:function(W){var x=this,V=x._image,v=x.getWidth(),t=x.getHeight();x._image=W,x.fp("image",V,W),x.fp(Qo,v,x.getWidth()),x.fp(Te,t,x.getHeight())},getElevation:function(){return this._54O},setElevation:function(Q){var i=this;if(!i._50O){i._50O=1;var G=i._54O;i._54O=Q,i.fp(Yb,G,Q),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(e){var P=this;if(!P._49O){P._49O=1;var O=P._64O;P._64O=e,P.fp(gf,O,e),delete P._49O}},getRotationX:function(){return this._rotationX},setRotationX:function($){var B=this;if(!B._51O){B._51O=1;var w=B._rotationX;B._rotationX=$,B.fp("rotationX",w,$),delete B._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(Z){var d=this;if(!d._52O){d._52O=1;var T=d._53O;d._53O=Z,d.fp("rotationZ",T,Z),delete d._52O}},getPosition:function(){return this._position},setPosition:function(P,u){var K=this;if(!K._50I){K._50I=1;var I;if(I=2===arguments.length?{x:P,y:u}:P,I.x!==K._position.x||I.y!==K._position.y){var V=K._position;K._position=I,K.fp(hm,V,I)}delete K._50I}},translate:function(G,Q){var n=this._position;this.p(n.x+G,n.y+Q)},getWidth:function(){var D=this;if(D._width>=0)return D._width;var a=fr(D._image);return a?Cf(a,D):20},setWidth:function($){var U=this,i=U._width;U._width=$,U.fp(Qo,i,$)},getHeight:function(){var Z=this;if(Z._height>=0)return Z._height;var i=fr(Z._image);return i?Si(i,Z):20},setHeight:function(m){var N=this,Y=N._height;N._height=m,N.fp(Te,Y,m)},setSize:function(m,B){var D=this;2===arguments.length?(D.setWidth(m),D.setHeight(B)):(D.setWidth(m.width),D.setHeight(m.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(z,A,t,F){var c=this;1===arguments.length?(c.p(z.x+z.width/2,z.y+z.height/2),c.setWidth(z.width),c.setHeight(z.height)):(c.p(z+t/2,A+F/2),c.setWidth(t),c.setHeight(F))},getRect:function(){var x=this,I=x.getWidth(),_=x.getHeight();return tk({x:x._position.x-I/2,y:x._position.y-_/2,width:I,height:_},x._64O)},getCorners:function(e,M){e==L&&(e=0),M==L&&(M=e);var F=this,z=F._position,B=F.getWidth()/2+e,g=F.getHeight()/2+M,r=new vs(F._64O,z.x,z.y);return[r.tf(-B,-g),r.tf(B,-g),r.tf(B,g),r.tf(-B,g)]},rotateAt:function(x,K,S){var Y=this,J=Y._position,u=Y._64O,g=new vs(u,J.x,J.y).tf(x,K),G=w(x*x+K*K),v=V(J.y-g.y,J.x-g.x)+S;Y.setRotation(u+S),Y.p(g.x+G*n(v),g.y+G*l(v))},onParentChanged:function(){mr.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(V){V._7I()
})},onPropertyChanged:function(A){var V=this;mr.superClass.onPropertyChanged.call(V,A),V._69O&&V._69O.each(function(v){v.handleHostPropertyChange(A)}),V._49I&&V._49I.each(function(m){m.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(h){this.updateAttach(h)},onStyleChanged:function(I){mr.superClass.onStyleChanged.apply(this,arguments),hl[I]&&this.updateAttach()},updateAttach:function(h){var e=this;e._51I||qh||(e._51I=1,e._71O(h),delete e._51I)},_71O:function(u){var C,W,w,E,K,T,g=this,c=g._host,q=u?u.property:L,a=u?u.oldValue:L,I=u?u.newValue:L;if(c instanceof mf){if(q===Yb)g.setElevation(g._54O+I-a);else if(!u||fc[q]){if(C=g.s("attach.row.index"),W=g.s("attach.column.index"),w=c.getCellRect(C,W),!w)return;E=g.s("attach.row.span"),K=g.s("attach.column.span"),(1!==E||1!==K)&&(w=wb(w,c.getCellRect(C+E-1,W+K-1))),on(w,g,"attach.padding",1),g.setRect(w)}}else if(c instanceof Zn&&(T=g.s("attach.index"))>=0&&(!u||Tn[q])){var y=g.s("attach.thickness");y!=L&&g.setHeight(c.getThickness()*y);var m=g.s("attach.offset"),d=c.getPoints(),O=d.size();if(O>T){var X=d.get(T),Y=O===T+1?d.get(0):d.get(T+1),N=[Y.x-X.x,Y.y-X.y],U=el(N);if(U){g.s("attach.offset.relative")&&(m*=U),g.s("attach.offset.opposite")&&(m=U-m);var B={x:X.x+N[0]/U*m,y:X.y+N[1]/U*m},j=g.s("attach.gap");j&&(g.s("attach.gap.relative")&&(j*=c.getThickness()),B=Gn(L,B,Y,j)),g.p(B),g.setRotation(V(N[1],N[0]))}}}else u&&(q===hm?g.translate(I.x-a.x,I.y-a.y):q===Yb?g.setElevation(g._54O+I-a):Oe[q]&&g._11Q(c,q,I-a))},_11Q:function(x,n,i){var G=this,z=x.p3(),D=Of(G.p3(),z),O=Jp(),J=mn[G.getRotationMode()],K=J[0],t=J[1],L=J[2],B=ig[K],r=ig[t],c=ig[L];n===gf&&(n="rotationY",i=-i),n===gf+K?(c(O,x[Ph+L]()),r(O,x[Ph+t]()),B(O,i),r(O,-x[Ph+t]()),c(O,-x[Ph+L]()),G[gh+K](G[Ph+K]()+i)):n===gf+t?(c(O,x[Ph+L]()),r(O,i),c(O,-x[Ph+L]()),G[gh+t](G[Ph+t]()+i)):n===gf+L&&(c(O,i),G[gh+L](G[Ph+L]()+i)),Lh(D,O),G.p3(z[0]+D[0],z[1]+D[1],z[2]+D[2])},isHostOn:function(x){var D=this;if(D._host&&x&&x._69O)for(var H={},T=D._host;T&&T!==D&&!H[T._id];){if(T===x)return!0;H[T._id]=T,T=T._host}return!1},isLoopedHostOn:function(O){return this.isHostOn(O)&&O.isHostOn(this)},getSerializableProperties:function(){var f=mr.superClass.getSerializableProperties.call(this);return Th(f,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),f}});var Ih=G.Edge=function(U,P){var E=this;ml(Ih,E),E.setSource(U),E.setTarget(P)};ao("Edge",ck,{_icon:"edge_icon",getUIClass:function(){return me},_22Q:function(){return Cp},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(c){var g=this;if(g._source!==c){var Q=g._source;g._source=c,Q&&Q._16I(g),c&&c._2I(g),g._7I(),g.fp("source",Q,c)}},setTarget:function(B){var z=this;if(z._target!==B){var p=z._target;z._target=B,p&&p._18I(z),B&&B._4I(z),z._7I(),z.fp("target",p,B)}},isLooped:function(){var h=this;return h._source===h._target&&!!h._source&&!!h._target},_7I:function(){var K,c=this,$=Ld(c);c._40I!==$&&(K=this._40I,K&&K._15I(c),c._40I=$,$&&$._1I(c),c.fp("sourceAgent",K,$),Ln(K,c._41I),Ln($,c._41I));var m=Lr(c);c._41I!==m&&(K=c._41I,K&&K._17I(c),c._41I=m,m&&m._3I(c),c.fp("targetAgent",K,m),Ln(K,c._40I),Ln(m,c._40I))},_22I:function(F){this._52I=F,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var z=this;return z._52I&&z._52I.get(0)!==z&&!z.getStyle(sr)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var Y=this,z=Y._52I;return z&&!Y.getStyle(sr)&&z.size()>1&&Y===z.get(0)},toggle:function(){var j=this._52I,q=!this.s(sr);j&&j.size()>1&&(j.each(function(T){T.s(sr,q)}),j.getSiblings().each(function(F){F!==j&&F.each(function(R){R.fp("edgeGroup",L,F)})}))},setStyle:function(Z,k){(Z===Vl||"edge.segments"===Z)&&(k=fk(k)),Ih.superClass.setStyle.call(this,Z,k)},onStyleChanged:function(G){Ih.superClass.onStyleChanged.apply(this,arguments),Me[G]&&Ln(this._41I,this._40I)},getSerializableProperties:function(){var p=Ih.superClass.getSerializableProperties.call(this);return Th(p,{source:1,target:1}),p}});var fb=G.Group=function(){ml(fb,this)};ao("Group",mr,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Hk},onChildAdded:function(){fb.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){fb.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var U=this;if(!U._54I&&!qh){var q=U.getChildrenRect();q&&(U._53I=1,U.p(wo(U.s("group.position"),q,U.getSize())),delete U._53I)}},getChildrenRect:function(){var f,V=this;return V.eachChild(function(M){f=wb(f,V.getChildRect(M))}),f},getChildRect:function(P){var J;return Pm(P)&&P.s(Vp)&&(jc(P)&&P.isExpanded()&&P.eachChild(function(f){J=wb(J,P.getChildRect(f))}),!J&&P.getRect&&(J=P.getRect())),J},setPosition:function(m,X){var r=this;if(!r._54I){var W;W=2===arguments.length?{x:m,y:X}:m,qh||r._53I||(r._54I=1,he(r._children,W.x-r._position.x,W.y-r._position.y),delete r._54I),fb.superClass.setPosition.call(this,W)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(E){var r=this;if(r._57O!==E){var C=r._57O;r._57O=E,r.fp("expanded",C,r._57O),r._8I()}},_8I:function(){fb.superClass._8I.call(this),this.eachChild(function(F){Pm(F)&&F._8I()})},onStyleChanged:function(H){fb.superClass.onStyleChanged.apply(this,arguments),"group.position"===H&&this._81I()},getSerializableProperties:function(){var I=fb.superClass.getSerializableProperties.call(this);return I.expanded=1,I}});var mf=G.Grid=function(){ml(mf,this)};ao("Grid",mr,{IRotatable:!1,_icon:"grid_icon",_image:L,getUIClass:function(){return rm},setRotation:function(){},getCellRect:function(g,q){var i=this,V=i.s("grid.row.count"),s=i.s("grid.column.count");if(0>=V||0>=s||0>g||g>=V||0>q||q>=s)return L;var Z,M,T,G=i.getRect(),K=i.s("grid.row.percents"),b=i.s("grid.column.percents");if(on(G,i,"grid.border",-1),K&&K._as&&(K=K._as),b&&b._as&&(b=b._as),K&&K.length===V){for(T=0,Z=0;g>Z;Z++)T+=G.height*K[Z];G.y+=T,G.height=G.height*K[g]}else G.height=G.height/V,G.y+=G.height*g;if(b&&b.length===s){for(M=0,Z=0;q>Z;Z++)M+=G.width*b[Z];G.x+=M,G.width=G.width*b[q]}else G.width=G.width/s,G.x+=G.width*q;return uc(G,-i.s("grid.gap")),G}});var Zn=G.Shape=function(){ml(Zn,this),this._59O=new Rb};Zn.__de__=Dn,ao("Shape",mr,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Xd},_22Q:function(){return Io},getLength:function(I){return Pg(Kg(this._59O,this._58O,I,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var z=this._58O;return z?new Rb(z._as.slice(0)):z},setSegments:function(O){var N=this._58O;O=O?pr(O)?new Rb(O.slice(0)):new Rb(O._as.slice(0)):new Rb,(N&&O&&N._as.join(",")!==O._as.join(",")||N!==O)&&(this._58O=O,this.fp("segments",N,O))},getPoints:function(){return this._59O},toPoints:function(){var s=this._59O;return new Rb(s._as.slice(0))},setPoints:function(T){var C=this._59O;T=T?pr(T)?new Rb(T.slice(0)):new Rb(T._as.slice(0)):new Rb,(C&&T&&C._as.join(",")!==T._as.join(",")||C!==T)&&(this._59O=T,this.fs(),this.fp("points",C,T))},addPoint:function(Y,P){var r=this.toPoints();r.add(Y,P),this.setPoints(r)},setPoint:function(I,A){var Q=this.toPoints();Q.set(I,A),this.setPoints(Q)},removePointAt:function(j){var C=this.toPoints();C.removeAt(j),this.setPoints(C)},setWidth:function(R){var a=this;if(1>R&&(R=1),!a._55I&&!qh&&a.getWidth()){a._55I=1;var Q=a._position.x,E=R/a.getWidth(),p=a.toPoints(),I=new Rb;p.each(function(a){I.add({x:(a.x-Q)*E+Q,y:a.y,e:a.e})}),a.setPoints(I),a.fs(),delete a._55I}Zn.superClass.setWidth.call(a,R)},setHeight:function(g){var a=this;if(1>g&&(g=1),!a._55I&&!qh&&a.getHeight()){a._55I=1;var e=a._position.y,m=g/a.getHeight(),o=a.toPoints(),X=new Rb;o.each(function(x){X.add({x:x.x,y:(x.y-e)*m+e,e:x.e})}),a.setPoints(X),a.fs(),delete a._55I}Zn.superClass.setHeight.call(a,g)},setPosition:function(o,m){var Q,N=this;if(!N._28Q){if(N._28Q=1,!N._55I&&!qh){Q=2===arguments.length?{x:o,y:m}:o;var a=Q.x-N._position.x,p=Q.y-N._position.y;if(0===a&&0===p)return delete N._28Q,void 0;N._55I=1;var s=N.toPoints(),l=new Rb;s.each(function(T){l.add({x:T.x+a,y:T.y+p,e:T.e})}),N.setPoints(l),N.fs(),delete N._55I}Zn.superClass.setPosition.apply(N,arguments),delete N._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var c=this;if(!c._55I&&!qh){var Y=xd(c._59O);Y&&(c._55I=1,c.setRect(Y),delete c._55I)}c.fp(sq,!1,!0)},getSerializableProperties:function(){var $=Zn.superClass.getSerializableProperties.call(this);return $.segments=1,$.points=1,$.thickness=1,$.closePath=1,$}});var lp=G.Polyline=function(){ml(lp,this),this.s({"shape.background":null,"shape.border.width":2})};ao("Polyline",Zn,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Le},getUIClass:function(){return Jn},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(U){var p=this;if(!p._24Q&&!qh&&p.getTall()){p._24Q=1;var o=p._54O,i=U/p.getTall();p._59O.each(function(t){t.e=t.e==L?o:(t.e-o)*i+o}),p.fs(),delete p._24Q}lp.superClass.setTall.call(p,U)},setElevation:function(t){var c=this;if(!c._24Q&&!qh){c._24Q=1;var Z=t-c._54O;c._59O.each(function($){$.e==L?$.e=t:$.e+=Z}),c.fs(),delete c._24Q}lp.superClass.setElevation.apply(c,arguments)},fireShapeChange:function(){var Q=this,o=Q._59O;if(!Q._24Q&&!qh){var N=o.size();if(N){var d=1,w=o.get(0),z=Q._54O;w.e==L&&(w.e=z);for(var h=w.e,f=0;N>d;d++){w=o.get(d),w.e==L&&(w.e=z);var j=g(h,w.e),Y=q(h+f,w.e);h=j,f=Y-j}Q._24Q=1,Q.setTall(f),Q.setElevation(h+f/2),delete Q._24Q}}lp.superClass.fireShapeChange.apply(Q,arguments)}});var Xn=G.SubGraph=function(){ml(Xn,this)};ao("SubGraph",mr,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Xn.superClass._8I.call(this),this.eachChild(function(R){Pm(R)&&R._8I()})}}),G.EdgeGroup=function($,j){this._70O=$,this._siblings=j;for(var w,Y,s=0,m=$.size(),g=H[sr];m>s;s++)if(w=$.get(s).getStyle(sr,!1),w!=L){g=w;break}g==L&&(g=!0);var Q=y.edgeGroupAgentFunc;for(Q&&(Y=Q($),Y&&Y!==$.get(0)&&($.remove(Y),$.add(Y,0))),s=0;m>s;s++)$.get(s).s(sr,g)},ao("EdgeGroup",e,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(b){return this._70O.get(b)},indexOf:function(A){return this._70O.indexOf(A)},each:function(Z,V){this._70O.each(Z,V)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(x,u){this._siblings.each(function(j){j._70O.each(x,u)})}});var Al=G.JSONSerializer=function(M,b){this.dm=this._dataModel=M,this._hierarchical=!!b};ao("JSONSerializer",e,{ms_ac:["hierarchical"],serialize:function(Y){return JSON.stringify(this.toJSON(),function(l,r){return aq(r)?Zp(r):r},Y==L?2:Y)},toJSON:function(){var k=this,B=k.dm,w=B.getRoots(),S=k.json={v:y.getVersion(),d:[],a:{}},J=B.getSerializableAttrs();for(var h in J){var A=B.a(h);A!==Q&&k[Co](h,A,S.a)}return Jo(S.a)&&delete S.a,k._hierarchical?w.each(k.serializeData,this):B.each(function(c){k.serializeData(c)}),S},isSerializable:function(){return!0},getProperties:function(j){return j.getSerializableProperties()},getStyles:function(Q){return Q.getSerializableStyles()},getAttrs:function(h){return h.getSerializableAttrs()},serializeData:function(O){var t=this;if(t.isSerializable(O)){var s,W,h,I,Q=O.getClass(),x=new Q,R={c:O.getClassName(),i:O.getId(),p:{},s:{},a:{}};t.json.d.push(R),s=t.getProperties(O);for(W in s)I=rn(W),O[I]&&(h=O[I](),h!==x[I]()&&t[Co](W,h,R.p));s=t.getStyles(O);for(W in s)h=O.s(W),h!==x.s(W)&&t[Co](W,h,R.s);s=t.getAttrs(O);for(W in s)h=O.a(W),h!==x.a(W)&&t[Co](W,h,R.a);Jo(R.p)&&delete R.p,Jo(R.s)&&delete R.s,Jo(R.a)&&delete R.a}t._hierarchical&&O.getChildren().each(t.serializeData,t)},serializeValue:function(h,$,H){Xb($)?$={__a:$._as}:$ instanceof ck&&($={__i:$.getId()}),H[h]=$},deserialize:function(y,g,w){qh=!0;var f=this;y=f.json=Un(y)?JSON.parse(y):y,f._82I={};for(var x=f.dm,b=new Rb,A=new Rb,O=0,J=y.d.length;J>O;O++){var s=y.d[O],e=zo(s.c),z=new e,j=s.i;w&&j!=L&&(z._id=j),f._82I[j]=z,b.add(z),A.add(s)}for(O=0;J>O;O++)f.deserializeData(b.get(O),A.get(O));b.each(function(p){g&&!p.getParent()&&p.setParent(g),x.add(p)});for(var R in y.a)x.a(R,f[to](y.a[R]));return qh=!1,b},deserializeData:function(C,d){for(var Y in d.p)C[Yn(Y)](this[to](d.p[Y]));for(Y in d.s)C.s(Y,this[to](d.s[Y]));for(Y in d.a)C.a(Y,this[to](d.a[Y]))},deserializeValue:function(d){if(Pj(d)){var P=d.__i;if(P!=L)return this._82I[P];if(P=d.__a,pr(P))return new Rb(P)}return d}}),Th(Qp,{serialize:function(c,P){return new Al(this,P).serialize(c)},toJSON:function(p){return new Al(this,p).toJSON()},deserialize:function(R,z,N){return new Al(this).deserialize(R,z,N)}}),Aj.GraphView=function(l){var E=this;E._24I={},E._34I=new Rb,E._25I={},E._56I={},E._view=cs(1),E._canvas=ll(E._view),E.dm(l?l:new Qp),E.setEditable(!1),E.setScrollBarVisible(y.graphViewScrollBarVisible)},Se("GraphView",e,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",Cr,Bm,Nl,Hg,"resettable","editInteractor",ch,"pannable","rectSelectable","autoScrollZone",iq,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground"],_resettable:y.graphViewResettable,_pannable:y.graphViewPannable,_rectSelectable:y.graphViewRectSelectable,_autoScrollZone:y.graphViewAutoScrollZone,_rectSelectBackground:y.graphViewRectSelectBackground,_rectSelectBorderColor:y.graphViewRectSelectBorderColor,_editPointSize:y.graphViewEditPointSize,_editPointBorderColor:y.graphViewEditPointBorderColor,_editPointBackground:y.graphViewEditPointBackground,_scrollBarColor:Db,_scrollBarSize:wn,_autoHideScrollBar:Ri,_autoMakeVisible:Kh,setEditable:function(Y){var p=this,X=Aj.XEditInteractor;Y?p.setInteractors([new mj(p),X?new X(p):new mm(p),new Gp(p),new gs(p),new Pd(p,{editable:!X})]):p.setInteractors([new mj(p),new Gp(p),new gs(p),new Pd(p,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(C){var v=C.getUIClass();return v?new v(this,C):L},getDataUI:function(I){var x=this,n=x._25I[I._id];return n===Q&&(n=x._33I(I),x._25I[I._id]=n),n},invalidateAll:function(J){var B=this;if(J){for(var b in B._25I){var _=B._25I[b];_&&_.dispose()}B._25I={},B._56I={},B._24I={},B._34I.clear(),B.redraw()}else B.dm().each(function(N){B.invalidateData(N)})},invalidateSelection:function(){var B=this;B.sm().each(function(I){B.invalidateData(I)})},invalidateData:function(w){var C=this;C._24I[w._id]=w,C._21Q(w),C.iv()},_21Q:function(F){var _=this,i=_._24I;if(mo(F)&&Ze[F.s($n)]){var m=F.getSourceAgent();m&&m.getAgentEdges().each(function(T){i[T._id]=T}),m=F.getTargetAgent(),m&&m.getAgentEdges().each(function(C){i[C._id]=C}),_.iv()}},redraw:function(L){var R=this;R._32I||(L?R._34I.add(L):(R._32I=1,R._34I.clear()),R.iv())},each:function(l,N){var Y,e,C,K=0,h=this._layers,U=this._dataModel._datas._as,z=U.length;if(h)for(var x=h.length;x>K;K++){C=h[K];for(var f=0;z>f;f++)if(Y=U[f],Y._layer===C&&(e=N?l.call(N,Y):l(Y),e===!1))return}else for(;z>K;K++)if(Y=U[K],e=N?l.call(N,Y):l(Y),e===!1)return},reverseEach:function(K,S){var q,s,E,O,I=this._layers,z=this._dataModel._datas._as,J=z.length;if(I)for(q=I.length-1;q>=0;q--){O=I[q];for(var C=J-1;C>=0;C--)if(s=z[C],s._layer===O&&(E=S?K.call(S,s):K(s),E===!1))return}else for(q=J-1;q>=0;q--)if(s=z[q],E=S?K.call(S,s):K(s),E===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var Z=this,c=Z._84I;return c||(Z.each(function(r){Z.isVisible(r)&&(c=wb(c,Z.getDataUIBounds(r)))}),Z._84I=c?c:Mb),Z._84I},getScrollRect:function(){return wb(this.getContentRect(),this._29I)},fitData:function(D,Y,k,w,q){var l=this;if(!l.getWidth()||!l.getHeight())return q||xn(l.fitData,l,[D,Y,k,w,!0],200),void 0;l.makeVisible(D),l.validate();var b=l.getDataUIBounds(D);b&&(b=je(b),uc(b,k==L?20:k),l.fitRect(b,Y,w))},fitContent:function($,d,t,U){var l=this;if(!l.getWidth()||!l.getHeight())return U||xn(l.fitContent,l,[$,d,t,!0],200),void 0;l.validate();var _=je(l.getContentRect());uc(_,d==L?20:d),l.fitRect(_,$,t)},fitRect:function(L,k,i){var P=this,$=P.getWidth(),A=P.getHeight(),b=L.x+L.width/2,K=L.y+L.height/2,T=g($/L.width,A/L.height),S=P._zoom,U=-b*S+$/2,R=-K*S+A/2;0===T||isNaN(T)||(i&&(T=g(1,T)),k?P.setTranslate(U,R,{finishFunc:function(){P.setZoom(T,k)}}):(P.setTranslate(U,R),P.setZoom(T)))},toCanvas:function(M){this.validateImpl();var D=this,Z=D.getContentRect(),e=ll(),P=D._zoom,t=Z.x*P,c=Z.y*P,a=Z.width*P,I=Z.height*P;bk(e,a,I,1);var j=Up(e);return M&&bf(j,0,0,a,I,M),Ei(j,-t,-c),j.scale(P,P),D._42(j),j.restore(),e},toDataURL:function(s,C){return this.toCanvas(s).toDataURL(C||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(M,o){var x,j,D=this;D._93db(M,o),D.each(function(H){D._56I[H._id]&&(x=D.getDataUI(H),x&&(j=x._79o(),G.HtmlNode&&H instanceof G.HtmlNode?x._42(M):(!o||Im(o,j))&&x._42(M)))}),D._92db(M,o)},validateImpl:function(){var y,B,K,V,H,$=this,F=$.tx(),G=$.ty(),L=$._zoom,r=$._canvas,P=this.getWidth(),n=this.getHeight(),z=$._29I,X={x:-F/L,y:-G/L,width:P/L,height:n/L},j={},i=$._34I,e=$._24I,S=$._32I,Y=$._23I;(P!==r.clientWidth||n!==r.clientHeight)&&(bk(r,P,n),S=1),S||Bs(X,z)||(S=1),$._29I=X,$.each(function(z){B=z._id;var C=j[B]=$.isVisible(z);C!==$._56I[B]&&(e[B]=z,K=$.getDataUI(e[B]),K&&K._84o(C),$._84o(z,C))},$);for(B in e)K=$.getDataUI(e[B]),K&&(!S&&$._56I[B]&&(H=K._79o(),H&&i.add(H)),K.invalidate()),$._83I=1;if($._56I=j,!S)for(B in e)j[B]&&(K=$.getDataUI(e[B]),K&&(H=K._79o(),H&&i.add(H)));if(S?V=X:(i.each(function(y){Im(X,y)&&(V=wb(V,y))}),V&&(uc(V,q(1,1/L)),V.x=s(V.x*L)/L,V.y=s(V.y*L)/L,V.width=k(V.width*L)/L,V.height=k(V.height*L)/L,V=No(X,V))),$._74O=V,V&&(y=Up(r),mk(y,F,G,L),y.beginPath(),y.rect(V.x,V.y,V.width,V.height),y.clip(),y.clearRect(V.x,V.y,V.width,V.height),$._42(y,V),y.restore(),delete $._74O),$._24I={},i.clear(),delete $._32I,Y&&P>0&&n>0){var K=$.getDataUI(Y);if(K){var H=K._79o(),W=$._29I,f=W.x,Z=W.y,o=W.width,M=W.height,L=$._zoom;H&&!Im(H,W)&&(H.x+H.width<f&&$.tx(-H.x*L),H.x>f+o&&$.tx(-(H.x+H.width-o)*L),H.y+H.height<Z&&$.ty(-H.y*L),H.y>Z+M&&$.ty(-(H.y+H.height-M)*L))}delete $._23I}$._83I&&(delete $._83I,delete $._84I),$._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(C){var k=this;C!==k.isScrollBarVisible()&&(C?(Ah(k._view,k._79O=cs()),Ah(k._79O,k._27I=cs()),Ah(k._79O,k._28I=cs())):(Wn(k._79O),delete k._79O,delete k._27I,delete k._28I),k.fp("scrollBarVisible",!C,C))},showScrollBar:function(){var $=this;$._79O&&($._85I||(x(function(){$._86I()},Ie),$.iv()),$._85I=new Date)},_86I:function(){var f=this;if(f._85I){var c=new Date,p=c.getTime();p-f._85I.getTime()>=Ie?(delete f._85I,f.iv()):x(function(){f._86I()},Ie)}},_98O:function(){var z=this,$=this._27I,i=this._28I;if(z._79O){if(z._autoHideScrollBar&&!z._85I)return $.style.visibility=vg,i.style.visibility=vg,void 0;var E=z.getScrollBarColor(),b=z._zoom,L=z.getScrollBarSize(),K=z.getViewRect(),H=z.getScrollRect(),k=K.height*b,S=H.height*b,V=K.width*b-L-2,G=k*((K.y-H.y)*b/S),Q=k*(k/S),n=$.style;S-.5>k?(Eo>Q&&(G=G+Q/2-Eo/2,0>G&&(G=0),G+Eo>k&&(G=k-Eo),Q=Eo),tg($,V,G,L,Q),n.visibility=Qi,n.background=E,n.borderRadius=L/2+Lo):n.visibility=vg;var Y=K.width*b,s=H.width*b,G=K.height*b-L-2,V=Y*((K.x-H.x)*b/s),t=Y*(Y/s),n=i.style;s-.5>Y?(Eo>t&&(V=V+t/2-Eo/2,0>V&&(V=0),V+Eo>Y&&(V=Y-Eo),t=Eo),tg(i,V,G,t,L),n.visibility=Qi,n.background=E,n.borderRadius=L/2+Lo):n.visibility=vg}},setDataModel:function($){var O=this,p=O._dataModel,y=O._3o;p!==$&&(p&&(p.umm(O.handleDataModelChange,O),p.umd(O.handleDataPropertyChange,O),p.removeIndexChangeListener(O._75O,O),y||p.sm().ums(O._16o,O)),O._dataModel=$,$.mm(O.handleDataModelChange,O),$.md(O.handleDataPropertyChange,O),$.addIndexChangeListener(O._75O,O),y?y._21I($):$.sm().ms(O._16o,O),O.invalidateAll(!0),O.fp(Ck,p,$))},handleDataPropertyChange:function(J){this.invalidateData(J.data)},onPropertyChanged:function(s){var d=this,L=s.property;d.redraw(),Fg[L]?d.showScrollBar():L===ch&&d.onCurrentSubGraphChanged(s)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(Q){var O=this,y=Q.kind,A=Q.data;if(O._83I=1,"add"===y)O.invalidateData(A),mo(A)&&A.getEdgeGroup()&&A.getEdgeGroup().eachSiblingEdge(O.invalidateData,O);else if(y===Qd){O._21Q(A);var d=A._id,t=O._25I[d];if(t){if(O._56I[d]){var F=t._79o();F&&O.redraw(F)}t.dispose(),delete O._25I[d],delete O._24I[d],delete O._56I[d]}A===O._currentSubGraph&&O.setCurrentSubGraph(L)}else y===nh&&(O.invalidateAll(!0),O.setCurrentSubGraph(L))},_75O:function(p){this.invalidateData(p.data)},_76O:function(U){var $=this;if($.isVisible(U)){for(var L=U;L._parent&&$.isVisible(L._parent);)L=L._parent;L&&L!==U&&$._dataModel._76O(L),$._dataModel._76O(U)}},isMovable:function(X){var S=this;return mo(X)&&X.getStyle($n)!==sn?!1:X.s("2d.movable")?S._movableFunc?S._movableFunc(X):!0:!1},isSelectable:function(G){return G.s("2d.selectable")&&this.sm().isSelectable(G)},isEditable:function(i){var e=this;if(!e._editInteractor||!e.isSelected(i))return!1;if(jc(i)){var Q=e.getDataUI(i);if(!Q||Q._88I)return!1}return mo(i)&&i.getStyle($n)!==sn?!1:i.s("2d.editable")?e._editableFunc?e._editableFunc(i):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(P){return Pm(P)&&0!==P.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(P):!0},isRectEditable:function(H){return Pm(H)&&0!==H.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(H):!0},isRotationEditable:function(A){return A.setRotation&&A.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(A):!0:!1},getRotationPoint:function(l){var H=zb(l.getRotation(),0,-l.getHeight()/2-(E?32:16)),Y=l.p();return H.x+=Y.x,H.y+=Y.y,H},getLogicalPoint:function(m){var K=this;return nn(m,K._canvas,K.tx(),K.ty(),K._zoom,K._zoom)},getSelectedDataAt:function(L){var h=this;return this.getDataAt(L,function(R){return h.isSelected(R)})},getDataAt:function(w,t,b){w.target&&(w=this.lp(w));var j;return this.reverseEach(function(y){return(t?t(y):this.isSelectable(y))&&this.rectIntersects(y,sm(w.x,w.y,b))?(j=y,!1):void 0},this),j},getIconInfoAt:function(t,j){var N=this;if(t.target&&(t=N.lp(t)),j||(j=N.getDataAt(t)),j){var e=N.getDataUI(j);if(e&&e._38o){var $,R=e._38o,o=new Rb;for($ in R.icons)o.add($);for(var Y=o.size()-1;Y>=0;Y--){$=o.get(Y);for(var W=R.rects[$],M=W.rotation,a=W.length-1;a>=0;a--){var g=W[a],i=g.width,m=g.height,r={x:t.x-g.x-i/2,y:t.y-g.y-m/2};M!=L&&(r=zb(-M,r.x,r.y));var g={x:-i/2,y:-m/2,width:i,height:m};if(Zd(g,r))return{key:$,index:a,name:R.icons[$].names[a],rect:W[a],point:t,rotation:M,relativeRect:g,relativePoint:r,data:j}}}}}return L},getDatasInRect:function(j,N,K){K===Q&&(K=1);var R=this,x=new Rb;return R.reverseEach(function(D){K&&!R.isSelectable(D)||(N?R.rectIntersects(D,j):R.rectContains(D,j))&&x.add(D)}),x},moveSelection:function(y,F){var C,Q=this,v=Q.dm();v&&(C=v.getHistoryManager()),C&&C.beginInteraction(),he(Q.sm().toSelection(Q.isMovable,Q),y,F),C&&C.endInteraction()},getDataUIBounds:function(Y){var W=this.getDataUI(Y);return W?W._79o():L},getBoundsForGroup:function(m){return m.s(Vp)?this.getDataUIBounds(m):L},rectIntersects:function(q,f){this.validate();var i=L;if(this._56I[q._id]){var E=this._25I[q._id];if(E){var C=E._79o();if(dk(f,C))i=!0;else if((f=No(f,C))&&(E.rectIntersects&&(i=E.rectIntersects(f)),i==L)){if(!q.s("pixelPerfect"))return!0;var D=f.x,T=f.y,j=f.width,N=f.height,P=1,W=y.hitMaxArea,V=j*N;V>W&&(P=W/V);var p=jp(j*P,N*P);Ei(p,-D*P,-T*P),p.scale(P,P),E._42(p);try{for(var B=0,k=p.getImageData(0,0,j*P,N*P).data;B<k.length;B+=4)if(0!==k[B+3]){i=!0;break}p.restore()}catch(K){Hh=L,i=!0}}}}return i?!0:!1},rectContains:function(l,Z){if(this._56I[l._id]){var p=this._25I[l._id];if(p)return dk(Z,p._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(f){var X=this,C=X._focusData,t=C&&X._25I[C._id],Z=0,z=X._dataModel._datas;C&&C._enabled&&C._editable&&t&&t.onKeyDown&&t.onKeyDown(f)===!0||(9===f.keyCode&&(C&&(Z=z.indexOf(C),Af(f)?-1===--Z&&(Z=0):++Z===z.size()&&(Z=0)),X._focusData=C=z.get(Z),X.sm().setSelection(C)),Ce(f)?X.selectAll():Fe(f)&&X.isResettable()&&X.reset(),X.sm().isEmpty()||(_q(f)&&X.handleDelete(f),Jl(f)&&(X.moveSelection(-1,0),X.fi({kind:"moveLeft"})),xr(f)&&(X.moveSelection(0,-1),X.fi({kind:"moveUp"})),rk(f)&&(X.moveSelection(1,0),X.fi({kind:"moveRight"})),wc(f)&&(X.moveSelection(0,1),X.fi({kind:"moveDown"}))))},handleScroll:function(U,r){tj(U);var S=this.lp(U);r>0?this.scrollZoomIn(S):0>r&&this.scrollZoomOut(S)},handlePinch:function(V,X,r){X>r?this.pinchZoomIn(V):this.pinchZoomOut(V)},checkDoubleClickOnNote:function(D,C){var W=this,n=W.lp(D),Z=W.getDataUI(C),u=Z.note2Info;return u&&C.s("note2.toggleable")&&Zd(u.clickRect,n)?(C.s(ai,!C.s(ai)),W.fi({kind:"toggleNote2",event:D,data:C}),!0):(u=Z.noteInfo,u&&C.s("note.toggleable")&&Zd(u.clickRect,n)?(C.s(Mq,!C.s(Mq)),W.fi({kind:"toggleNote",event:D,data:C}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(i,g){var B=this,u=B.getAutoScrollZone(),H=u/B.getZoom(),v=u/4,s=B._29I,C=B.lp(i),x={x:B.tx(),y:B.ty()};return C&&u>0&&s&&(C.x-s.x<H?B.translate(v,0):s.x+s.width-C.x<H&&B.translate(-v,0),C.y-s.y<H?B.translate(0,v):s.y+s.height-C.y<H&&B.translate(0,-v)),x.x=B.tx()-x.x,x.y=B.ty()-x.y,g&&(g.x+=x.x,g.y+=x.y),x},getMoveMode:function(y,H){var D=H.s("2d.move.mode");return D?D:Mh["88"]?"x":Mh["89"]?"y":"xy"}});var hd=function(Z,D){var y=this;y.gv=Z,y.s=function(L){return D.getStyle(L)},y._data=D,y._87I=new Rb};th(hd,e,{_6I:L,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var n=this,x=n.gv.isSelected(n._data);return!x||n.isShadowed()?0:this.s("select.width")},getBodyColor:function(l){var S=this._data,o=this.gv.getBodyColor(S);return o?o:l?S.getStyle(l):L},_2Q:function(E){return this.s(E)},_1Q:function(g,B,k,Z){var S=this.s,q=S(B+".dash.color");g.strokeStyle=q,g.lineWidth=k,g.stroke(),S(B+".dash.3d")&&Vb(g,q,S(B+".dash.3d.color"),k,this.gv._zoom,S(B+".dash.3d.accuracy")),Wp(g,Z)},invalidate:function(){this._6I=L},_79o:function(){var Z=this;if(!Z._6I){Z.labelInfo=Z.label2Info=Z.noteInfo=Z.note2Info=Z._38o=L,Z._87I.clear(),Z._3O();var r=Z._data,p=Z.gv;Z._55O=p.isEditable(r)?{_42O:p.isRectEditable(r),_43O:p.isPointEditable(r),_56O:p.isRotationEditable(r)}:L,Z._6I=Z._81o()}return Z._6I},_3O:function(){},getPosition:function(){return Mb},_68o:function(N,q){N&&this._87I.add(tk(N,q))},_81o:function(){var r=this,N=r.s;r._24O(zm,"getLabel"),r._24O(uf,"getLabel2"),r._26O(rb,"getNote"),r._26O(Og,"getNote2"),r._15O(),r._55O&&r._48O();var x;if(r._87I.each(function(e){x=wb(x,e)}),x&&r.isShadowed()){var f=je(x);f.x+=N("shadow.offset.x"),f.y+=N("shadow.offset.y"),uc(f,N("shadow.blur")),x=wb(x,f)}return r._87I.clear(),x},_42:function(s){var k=this,e=k._data,Z=k.gv,R=k.s,F=R("opacity"),K=this.isShadowed();if(K){var U=s.shadowOffsetX,f=s.shadowOffsetY,T=s.shadowBlur,y=s.shadowColor;s.shadowOffsetX=R("shadow.offset.x"),s.shadowOffsetY=R("shadow.offset.y"),s.shadowBlur=R("shadow.blur"),s.shadowColor=R("shadow.color")}if(F!=L){var o=s.globalAlpha;s.globalAlpha=F}k._80o(s),Z.isLabelVisible(e)&&(lo(s,k.labelInfo),lo(s,k.label2Info)),Z.isNoteVisible(e)&&(kn(s,k.noteInfo),kn(s,k.note2Info)),k._99O(s),F!=L&&(s.globalAlpha=o),K&&(s.shadowOffsetX=U,s.shadowOffsetY=f,s.shadowBlur=T,s.shadowColor=y),k._55O&&Z.isEditVisible(e)&&k._47O(s)},_80o:function(){},_47O:function(){},_24O:function(c,E){var M=this,G=M._data,s=M.gv,W=M.s,q=s[E](G);if(q!=L){var F=W(c+".scale"),j=W(c+".max"),p=W(c+".position"),o=M[c+"Info"]={label:q,scale:F,color:s[E+"Color"](G),font:W(c+".font"),opacity:W(c+".opacity"),align:W(c+".align"),rotation:M.getRotation(W(c+".rotation"),!1,p),background:s[E+"Background"](G)},B=pd(o,q);j>0&&j<B.width&&(o.labelWidth=B.width,B.width=j),1!==F&&(B.width*=F,B.height*=F);var O=M.getPosition(p,W(c+".offset.x"),W(c+".offset.y"),B,W(c+".position.fixed"));if(B.x=O.x-B.width/2,B.y=O.y-B.height/2,M._68o(o.rect=B,o.rotation),1!==F){var K=B.width/F,N=B.height/F;o.rect={x:O.x-K/2,y:O.y-N/2,width:K,height:N}}}},_26O:function(G,s){var C=this,l=C.gv,I=C._data,n=C.s,O=l[s](I);if(O!=L){var U,K,p=n(G+".scale"),H=C[G+"Info"]={note:O,scale:p,expanded:n(G+".expanded"),font:n(G+".font"),color:n(G+".color"),opacity:n(G+".opacity"),align:n(G+".align"),borderWidth:n(G+".border.width"),borderColor:n(G+".border.color"),background:l[s+"Background"](I)},B=C.getPosition(n(G+".position"),n(G+".offset.x"),n(G+".offset.y")),b=B.x,Z=B.y;if(H.expanded){var j=n(G+".max"),q=pd(H,O);q.width+=6,q.height+=2,j>0&&j<q.width&&(H.labelWidth=q.width,q.width=j),U=q.width,K=q.height+8,H.clickRect={x:b-U*p/2,y:Z-K*p,width:U*p,height:K*p*q.height/K}}else U=12,K=18,H.clickRect={x:b-U*p/2,y:Z-K*p,width:U*p,height:K*p};H.rect={x:b-U/2,y:Z-K*p/2-K/2,width:U,height:K};var y=k(H.borderWidth/2)*p;C._68o({x:b-U*p/2-y,y:Z-K*p-y,width:U*p+2*y,height:K*p+2*y})}},_48O:function(){},_99O:function(p){var g=this,B=g._38o;if(B){var x=g.gv,P=g._data,V=B.icons;for(var T in V){var W=V[T],e=B.rects[T];if(e){var o=ki(W.opacity,P,x),U=ki(W.names,P,x),F=U?U.length:0,G=e.rotation;if(o!=L){var s=p.globalAlpha;p.globalAlpha*=o}for(var n=0;F>n;n++){var Q=U[n],k=fr(Q),i=e[n];if(G){var R=i.x+i.width/2,I=i.y+i.height/2;p.save(),Ei(p,R,I),vn(p,G),Ei(p,-R,-I)}$g(p,k,ki(W.stretch,P,x),i.x,i.y,i.width,i.height,g._data,g.gv),G&&p.restore()}o!=L&&(p.globalAlpha=s)}}}}});var Gk=function(q,l){ml(Gk,this,[q,l])};th(Gk,hd,{_40O:function(Q,A){var t=this,J=t.s,C=Q.rect;(Q.borderColor=t.gv.getBorderColor(t._data))&&(Q.borderType=J("border.type"),Q.borderWidth=J("border.width"),Q.borderPadding=J("border.padding"),A=q(A,Q.borderPadding+Q.borderWidth/2)),(Q.selectWidth=t._2o())&&(Q.selectType=J("select.type"),Q._97o=J("select.color"),Q.selectPadding=J("select.padding"),A=q(A,Q.selectPadding+Q.selectWidth/2)),A>0&&(C=je(C),uc(C,A)),t._68o(C)},_39O:function(p,n){var d=n.rect;if(n.borderWidth>0){var O=n.borderPadding;p.strokeStyle=n.borderColor,p.lineWidth=n.borderWidth,bd(p,n.borderType,{x:d.x-O,y:d.y-O,width:d.width+2*O,height:d.height+2*O}),p.stroke()}n.selectWidth>0&&(O=n.selectPadding,p.strokeStyle=n._97o,p.lineWidth=n.selectWidth,bd(p,n.selectType,{x:d.x-O,y:d.y-O,width:d.width+2*O,height:d.height+2*O}),p.stroke())},_3O:function(){var D=this,j=D.s,T=D._data,w=T.getStyle(sq),C=D.getBodyColor(),X=D._83o=w?{shape:w,_53o:D.getBodyColor("shape.background"),_27Q:fr(j("shape.repeat.image"),C),_54o:j("shape.border.width"),_55o:j("shape.border.color"),_56o:j("shape.border.3d"),_57o:j("shape.border.3d.color"),_58o:j("shape.border.3d.accuracy"),shapeGradient:j("shape.gradient"),_59o:j("shape.gradient.color"),_60o:j("shape.border.pattern"),_61o:j("shape.border.cap"),_62o:j("shape.border.join")}:{img:fr(T.getImage(),C),bodyColor:C,stretch:j("image.stretch")};X.rect=T.getRect(),X.position=T.p(),X.rotation=T.getRotation(),w===rp&&(X._63o=j("shape.depth")),D._40O(X,w?Sn(L,X._54o/2,X._62o):0)},getPosition:function(T,b,I,t){var d=wo(T,this._83o.rect,t);return d.x+=b,d.y+=I,d},_80o:function(k){var h=this,J=h.s,L=h.gv,V=h._data,S=h._83o,f=S.rect,O=f,g=S.position,W=S.rotation,d=S.shape;if(f.width>0&&f.height>0){if(W&&(k.save(),Ei(k,g.x,g.y),vn(k,W),Ei(k,-g.x,-g.y),O=V.getSize(),O.x=g.x-O.width/2,O.y=g.y-O.height/2),h.freeDraw)h.freeDraw(k,O,S);else if(d){var r,C,n,Z,w=S._60o,x=_n(k,w),j=S._53o,l=S._27Q,G=S._54o,y=S._55o,$=k.lineJoin,c=k.lineCap;if("roundRect"===d?r=J("shape.corner.radius"):"polygon"===d?r=J("shape.polygon.side"):"arc"===d&&(r=J("shape.arc.from"),C=J("shape.arc.to"),n=J("shape.arc.close"),Z=J("shape.arc.oval")),k.lineJoin=S._62o,k.lineCap=S._61o,j||l?(l?To(k,l):Sh(k,j,S.shapeGradient,S._59o,O),bd(k,d,O,r,C,n,Z),k.fill(),k!==x&&bd(x,d,O,r,C,n,Z)):bd(x,d,O,r,C,n,Z),G>0&&(k.lineWidth=G,k.strokeStyle=y,k.stroke(),S._56o&&Vb(k,y,S._57o,G,L._zoom,S._58o)),Wp(k,w),J("shape.dash")){var M=J("shape.dash.width")||G;
if(M>0){w=J("shape.dash.pattern");var x=_n(k,w,h._2Q("shape.dash.offset"));x!==k&&bd(x,d,O,r,C,n,Z),h._1Q(k,"shape",M,w)}}Uk(k,j,S._63o,O),k.lineJoin=$,k.lineCap=c}else $g(k,S.img,S.stretch,O.x,O.y,O.width,O.height,V,L,S.bodyColor);W&&k.restore()}h._39O(k,S)},_48O:function(){var y,m=this,O=m._data,W=m.gv,b=m._55O,u=W.getEditPointSize()/2+2;if(b._42O&&(y=O.getRect(),uc(y,u)),b._56O){var c=b._98o=W.getRotationPoint(O);y=wb(y,{x:c.x-u,y:c.y-u,width:2*u,height:2*u})}m._68o(y)},_47O:function(J){var T=this,m=T.gv,$=T._55O,c=T._data.getRect(),f=m.getEditPointSize(),Q=$._98o;$._42O&&(J.fillStyle=m.getEditPointBackground(),J.strokeStyle=m.getEditPointBorderColor(),J.lineWidth=1,[{x:c.x,y:c.y},{x:c.x+c.width/2,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x,y:c.y+c.height/2},{x:c.x+c.width,y:c.y+c.height/2},{x:c.x,y:c.y+c.height},{x:c.x+c.width/2,y:c.y+c.height},{x:c.x+c.width,y:c.y+c.height}].forEach(function(o){bf(J,o.x-f/2,o.y-f/2,f,f),J.stroke()})),$._56O&&(J.fillStyle=m.getEditPointBorderColor(),J.strokeStyle=m.getEditPointBackground(),J.lineWidth=1,J.beginPath(),J.arc(Q.x,Q.y,f/2,0,O,!0),J.fill(),J.stroke())}});var me=function(J,E){ml(me,this,[J,E])},Zh=function(q,J,o,B){var C=el(q,J);return o=B?g(o,C):cl(o,C),C?o/=C:o=0,{x:q.x+(J.x-q.x)*o,y:q.y+(J.y-q.y)*o}};th(me,hd,{_3O:function(){var O,n=this,I=n._data,R=n.gv,c=n.s,x=c($n),K=I.isLooped(),z=c("edge.width"),d=c("edge.center"),e=c("edge.offset"),j=R.getBorderColor(I),l=j?c("border.width"):0,A=n._2o(),S=I._40I,q=I._41I,H=n._78o=S&&q?{looped:K,type:x,width:z,center:d,color:n.getBodyColor("edge.color"),borderColor:j,borderWidth:l,_97o:A?c("select.color"):L,selectWidth:A,pattern:c("edge.pattern"),cap:c("edge.cap"),join:c("edge.join"),is3d:c("edge.3d"),_67o:c("edge.3d.color"),_66o:c("edge.3d.accuracy")}:L;if(H){var t=y.getEdgeType(x);if(t){var U=t(I,Mi(n,R,I,K,x),R,n._19Q);U.points&&U.points.size()>1&&(H._4O=U,O=xd(H._4O.points))}else{var h=yn(R,S,c("edge.source.position"),c("edge.source.offset.x"),c("edge.source.offset.y")),N=yn(R,q,c("edge.target.position"),c("edge.target.offset.x"),c("edge.target.offset.y"));if(x===sn){var T=H.points=c(Vl)||Tb,g=T.size();if(H.segments=c("edge.segments"),!d)if(e){var i=Zh(h,g?T.get(0):N,e,g),X=Zh(N,g?T.get(g-1):h,e,g);h=i,N=X}else{var m=Ik(R,S),M=Ik(R,q),Y=Fc(h,g?T.get(0):N,m);Y&&(h={x:Y[0],y:Y[1]}),Y=Fc(g?T.get(g-1):h,N,M),Y&&(N={x:Y[0],y:Y[1]})}O=wb(xd(H.points),xd(h,N))}else{var W=Mi(n,R,I,K,x);if(n._19Q||(W=-W),K)h=je(h),h.x-=S.getWidth()/2,H.radius=W,O={x:h.x-W,y:h.y-W,width:2*W,height:2*W};else{var Q=el(h,N),o=cl(e,Q),i={x:o,y:W},X={x:Q-o,y:W},u=V(N.y-h.y,N.x-h.x),E=H.mat=new vs(u);if(H.orienAngle=u,H.angle=N.x<h.x?u+p:u,H.rect={x:i.x,y:i.y,width:X.x-i.x,height:0},H.origin=h,i=E.tf(i),i.x+=h.x,i.y+=h.y,X=E.tf(X),X.x+=h.x,X.y+=h.y,d){var _={x:Q,y:0};_=E.tf(_),_.x+=h.x,_.y+=h.y,O=xd([h,i,X,_]),H.c1=h,H.c2=_}else O=xd(i,X);h=i,N=X}}H._69o=h,H._70o=N}Sn(O,z/2+l+A,H.join),n._68o(O)}},getRotation:function(j,M,D){j=j||0;var e=this._78o;if(e){var z,Z=e.angle,Q=e.points,k=e._4O;if(Z!=L)return M?e.orienAngle+j:Z+j;if(k){var X=k.points;return z=X.size(),Wj[D]?z&&0===z%2?Rf(X.get(z/2-1),X.get(z/2),M,j):j:ls[D]?Rf(X.get(0),X.get(1),M,j):Rf(X.get(z-2),X.get(z-1),M,j)}if(Q)return z=Q.size(),Wj[D]?z&&0===z%2?Rf(Q.get(z/2-1),Q.get(z/2),M,j):j:ls[D]?Rf(e._69o,z?Q.get(0):e._70o,M,j):Rf(z?Q.get(z-1):e._69o,e._70o,M,j)}return j},getPosition:function(g,O,h,M,P){var E=this._78o;if(E){var v,H=E.type,$=E.points,W=E._4O,J=E._69o,L=E._70o;if(!H)return E.looped?{x:J.x-E.radius+O,y:J.y+h}:(P&&J&&L&&(J.x>L.x||J.x===L.x&&J.y>L.y)&&(g=Il[g],h=-h),v=wo(g,E.rect,M),v.x+=O,v.y+=h,v=E.mat.tf(v),v.x+=E.origin.x,v.y+=E.origin.y,v);if($){var v,K=$.size();if(Wj[g]){if(K){var u=K%2;if(0===u)return Xm($.get(K/2-1),$.get(K/2),g,O,h,M,P);v=$.get((K-u)/2)}else v={x:(J.x+L.x)/2,y:(J.y+L.y)/2};return v=wo(g,{x:v.x,y:v.y,width:0,height:0},M),v.x+=O,v.y+=h,v}return ls[g]?Xm(J,K?$.get(0):L,g,O,h,M,P):Xm(K?$.get(K-1):J,L,g,O,h,M,P)}if(W){var U=W.points,K=U.size();if(Wj[g]){var u=K%2;return 0===u?Xm(U.get(K/2-1),U.get(K/2),g,O,h,M,P):(v=U.get((K-u)/2),v=wo(g,{x:v.x,y:v.y,width:0,height:0},M),v.x+=O,v.y+=h,v)}return ls[g]?Xm(U.get(0),U.get(1),g,O,h,M,P):Xm(U.get(K-2),U.get(K-1),g,O,h,M,P)}}return Mb},_42:function(T){this._78o&&me.superClass._42.call(this,T)},drawPath:function(q,s){q.beginPath();var D=s.type,w=s.points,d=s.segments,c=s._4O;if(!D||w){var i=s._69o,k=i.x,b=i.y,h=s._70o,m=h.x,B=h.y;if(D)if(d){var R=new Rb({x:k,y:b});R.addAll(w),R.add({x:m,y:B}),vf(q,R,d)}else q.moveTo(k,b),w.each(function(N){q.lineTo(N.x,N.y)}),q.lineTo(m,B);else s.looped?q.arc(k,b,s.radius,0,O,!0):s.center?(q.moveTo(s.c1.x,s.c1.y),q.lineTo(k,b),q.lineTo(m,B),q.lineTo(s.c2.x,s.c2.y)):(q.moveTo(k,b),q.lineTo(m,B))}else c&&vf(q,c.points,c.segments)},_80o:function(a){var q=this,y=q.s,Z=q._78o,j=Z.width,s=Z.selectWidth,J=Z.borderWidth,B=Z.color,I=a.lineJoin,Q=a.lineCap,p=Z.pattern;if(a.lineJoin=Z.join,a.lineCap=Z.cap,q.drawPath(_n(a,p),Z),s&&(a.strokeStyle=Z._97o,a.lineWidth=j+2*(J+s),a.stroke()),J&&(a.strokeStyle=Z.borderColor,a.lineWidth=j+2*J,a.stroke()),a.strokeStyle=B,a.lineWidth=j,a.stroke(),Z.is3d&&Vb(a,B,Z._67o,j,q.gv._zoom,Z._66o),Wp(a,p),y("edge.dash")){p=y("edge.dash.pattern");var N=_n(a,p,q._2Q("edge.dash.offset"));N!==a&&q.drawPath(N,Z),q._1Q(a,"edge",y("edge.dash.width")||j,p)}a.lineJoin=I,a.lineCap=Q},_48O:function(){var H=this,o=H._78o;if(H._55O._43O&&o&&o.points){var O=xd(o.points);O&&(uc(O,H.gv.getEditPointSize()/2+2),H._68o(O))}},_47O:function(M){var p=this,w=p.gv,z=p._78o;if(p._55O._43O&&z&&z.points){var G=w.getEditPointSize()/2;M.fillStyle=w.getEditPointBackground(),M.strokeStyle=w.getEditPointBorderColor(),M.lineWidth=1,z.points.each(function(W){M.beginPath(),M.arc(W.x,W.y,G,0,O,!0),M.fill(),M.stroke()})}},_71o:function(l,J){var y=this,B=y._data;if(y._19Q=!0,!B.getEdgeGroup())return l?B.s("edge.gap"):0;var d,b=0,i=0,X=0;if(B.getEdgeGroup().getSiblings().each(function(N){N.each(function(W){if(y.gv.isVisible(W)&&W.s($n)==J){var M=W.s("edge.gap");d?(i+=X/2+M/2,X=M):(d=W,X=M),W===B&&(b=i)}})}),l)return i-b+X;var Q=b-i/2;return d&&B._40I!==d._40I&&(y._19Q=!1),Q}});var Hk=function(R,S){ml(Hk,this,[R,S])};th(Hk,Gk,{_3O:function(){var Y,l,K=this,$=K.s,m=K._data,G=K.gv;if(K._88I=L,m.isExpanded()&&m.eachChild(function(o){var b=G.getBoundsForGroup(o);b&&(l||(l=[]),l.push(b),Y=wb(Y,b))}),Y){var H=G.getLabel(m),Q=$("group.type");Y=Ag(Q,l,Y),on(Y,m,"group.padding",1);var _=K._88I={type:Q,rect:Y,_64o:Y};if(!Q&&H!=L){var W,F=K.labelInfo={label:H,color:$("group.title.color"),font:$("group.title.font")},r=pd(F,H),e=r.width,B=r.height,j=$("group.title.align");e>Y.width&&(Y.width=e),F.rect={y:Y.y-B,width:r.width,height:B},W=j===d?Y.x:j===S?Y.x+Y.width-e:Y.x+Y.width/2-e/2,F.rect.x=W,_.titleRect={x:Y.x,y:Y.y-B,width:Y.width,height:B+1},_.rect={x:Y.x,y:Y.y-B,width:Y.width,height:Y.height+B}}K._40O(_,$("group.border.width")/2)}else Hk.superClass._3O.call(K)},getPosition:function(w,S,e,K){var A=this._88I;if(A){var s=wo(w,A.rect,K);return s.x+=S,s.y+=e,s}return Hk.superClass.getPosition.apply(this,arguments)},_24O:function(h,D){var n=this._88I;(!n||n.type||"label2"===h)&&Hk.superClass._24O.call(this,h,D)},_80o:function(W){var O=this,J=O._88I;if(J){var b=O._data,e=O.s,u=O.gv,C=J.type,o=J.rect,Y=J._64o,D=J.titleRect,P=O.getBodyColor(),I=fr(e("group.image"),P),V=e("group.image.stretch"),g=O.getBodyColor("group.background"),q=fr(e("group.repeat.image"),P),F=e("group.gradient"),Z=e("group.gradient.color"),i=e("group.depth");if(C){var B=e("group.border.pattern"),j=e("group.border.width"),Q=W.lineJoin,G=W.lineCap;if(W.lineJoin=e("group.border.join"),W.lineCap=e("group.border.cap"),I){if(W.save(),bd(W,C,o),W.clip(),$g(W,I,V,o.x,o.y,o.width,o.height,b,u,P),W.restore(),j>0){var c=_n(W,B);bd(c,C,o),W.lineWidth=j,W.strokeStyle=e("group.border.color"),W.stroke(),Wp(W,B)}}else{var c=_n(W,B);g||q?(q?To(W,q):Sh(W,g,F,Z,o),bd(W,C,o),W.fill(),W!==c&&bd(c,C,o)):bd(c,C,o),j>0&&(W.lineWidth=j,W.strokeStyle=e("group.border.color"),W.stroke()),Wp(W,B),C===rp&&Uk(W,g,i,o)}W.lineJoin=Q,W.lineCap=G}else if(I?$g(W,I,V,Y.x,Y.y,Y.width,Y.height,b,u,O.getBodyColor()):(g||q)&&(q?To(W,q):Sh(W,g,F,Z,Y),bd(W,rp,Y),W.fill(),Uk(W,g,i,Y)),D){var w=e("group.title.background");bf(W,D.x,D.y,D.width,D.height,w),Uk(W,w,i,D)}O._39O(W,J)}else Hk.superClass._80o.call(O,W)}});var Xd=function(C,H){ml(Xd,this,[C,H])};th(Xd,Gk,{_3O:function(){var C=this,m=C._data,z=C.s,$=C.gv,d=m.getPoints(),x=$.getBorderColor(m),h=x?z("border.width"):0,I=C._2o(),M=z("shape.border.width"),P=m.getRect(),D=$.getBodyColor(m),N=C._99o=d.isEmpty()?L:{rect:P,rotation:m.getRotation(),position:m.p(),points:d,segments:m.getSegments(),bodyColor:D,borderColor:x,borderWidth:h,_94o:z("shape.border.3d"),_95o:z("shape.border.3d.color"),_96o:z("shape.border.3d.accuracy"),_97o:I?z("select.color"):L,selectWidth:I,_53o:z("shape.background"),_27Q:fr(z("shape.repeat.image"),D),_54o:M,_55o:z("shape.border.color"),shapeGradient:z("shape.gradient"),_59o:z("shape.gradient.color"),_60o:z("shape.border.pattern"),_61o:z("shape.border.cap"),_62o:z("shape.border.join")};if(N){var H=M/2+h+I;H&&(P=je(P),Sn(P,H,N._62o)),C._68o(P)}},getPosition:function(k,C,g,Y){var B=this._99o;if(B){var w=wo(k,B.rect,Y);return w.x+=C,w.y+=g,w}return Mb},_42:function(i){this._99o&&Xd.superClass._42.call(this,i)},_80o:function(e){var B,g=this,Q=g.s,U=g._99o,Z=U.position,F=U.rotation,c=U.bodyColor,L=U.borderWidth,_=U.selectWidth,k=U._53o,s=U._27Q,q=U._54o,v=U.points,p=U.segments,h=g._data.isClosePath();F&&(e.save(),Ei(e,Z.x,Z.y),vn(e,F),Ei(e,-Z.x,-Z.y));var P=U._60o,j=_n(e,P),i=e.lineJoin,W=e.lineCap;if(e.lineJoin=U._62o,e.lineCap=U._61o,k||s?(s?To(e,s):(B=c?c:k,Sh(e,B,U.shapeGradient,U._59o,U.rect)),vf(e,v,p,h),e.fill(),j!==e&&vf(j,v,p,h)):vf(j,v,p,h),_&&(e.strokeStyle=U._97o,e.lineWidth=q+2*(L+_),e.stroke()),L&&(e.strokeStyle=U.borderColor,e.lineWidth=q+2*L,e.stroke()),q&&(B=U._55o,!k&&c&&(B=c),e.strokeStyle=B,e.lineWidth=q,e.stroke(),U._94o&&Vb(e,B,U._95o,q,g.gv._zoom,U._96o)),Wp(e,P),Q("shape.dash")){var O=Q("shape.dash.width")||q;if(O>0){P=Q("shape.dash.pattern");var j=_n(e,P,g._2Q("shape.dash.offset"));j!==e&&vf(j,v,p,h),g._1Q(e,"shape",O,P)}}e.lineJoin=i,e.lineCap=W,F&&e.restore()},_48O:function(){var k=this;if(Xd.superClass._48O.call(k),k._55O._43O){var $=k._data.getRect();uc($,k.gv.getEditPointSize()/2+2),k._68o($)}},_47O:function(X){var M=this;if(Xd.superClass._47O.call(M,X),M._55O._43O){var q=M.gv,j=q.getEditPointSize()/2;X.fillStyle=q.getEditPointBackground(),X.strokeStyle=q.getEditPointBorderColor(),X.lineWidth=1,M._data.getPoints().each(function(H){X.beginPath(),X.arc(H.x,H.y,j,0,O,!0),X.fill(),X.stroke()})}}});var Jn=function(r,q){ml(Jn,this,[r,q])};th(Jn,Xd,{getRotation:function(R,x,m){R=R||0;var S=this._data.getPoints(),h=S.size();return h>1?Wj[m]?h&&0===h%2?Rf(S.get(h/2-1),S.get(h/2),x,R):R:ls[m]?Rf(S.get(0),S.get(1),x,R):Rf(S.get(h-2),S.get(h-1),x,R):R},getPosition:function(N,E,O,Q,c){var z=this._data.getPoints(),W=z.size();if(W>1){if(Wj[N]){var C=W%2;if(0===C)return Xm(z.get(W/2-1),z.get(W/2),N,E,O,Q,c);var I=z.get((W-C)/2),$={x:I.x,y:I.y,width:0,height:0};return I=wo(N,$,Q),I.x+=E,I.y+=O,I}return ls[N]?Xm(z.get(0),z.get(1),N,E,O,Q,c):Xm(z.get(W-2),z.get(W-1),N,E,O,Q,c)}return Mb}});var rm=function(T,g){ml(rm,this,[T,g])};th(rm,Gk,{_3O:function(){var e=this;rm.superClass._3O.call(e);var T=e.s,K=e._83o;e._82o=K.img||K.shape?L:{background:e.getBodyColor("grid.background"),depth:T("grid.depth"),rect:K.rect,_88o:T("grid.cell.depth"),cellBorderColor:T("grid.cell.border.color"),_89o:T("grid.row.count"),_90o:T("grid.column.count"),block:T("grid.block"),_91o:T("grid.block.color"),_92o:T("grid.block.padding"),_93o:T("grid.block.width")}},_80o:function(A){var g=this,Q=g._82o;if(!Q)return rm.superClass._80o.call(g,A),void 0;var n,y,k=g._data,x=Q.background,F=Q.rect,c=Q.block,q=Q._91o,C=Q._92o,I=Q._93o,d=Q._88o,a=Q.cellBorderColor,J=Q._89o,l=Q._90o;if(x)if(bf(A,F.x,F.y,F.width,F.height,x),Uk(A,x,Q.depth,F),d)for(n=0;J>n;n++)for(y=0;l>y;y++)F=k.getCellRect(n,y),F&&Uk(A,x,d,F);else if(a){for(A.beginPath(),n=0;J>n;n++)for(y=0;l>y;y++)F=k.getCellRect(n,y),F&&A.rect(F.x,F.y,F.width,F.height);A.strokeStyle=a,A.lineWidth=1,A.stroke()}if("h"===c)for(n=0;J>n;n++)F=wb(k.getCellRect(n,0),k.getCellRect(n,l-1)),uc(F,C),dp(A,q,F.x,F.y,F.width,F.height,I);else if("v"===c)for(y=0;l>y;y++)F=wb(k.getCellRect(0,y),k.getCellRect(J-1,y)),uc(F,C),dp(A,q,F.x,F.y,F.width,F.height,I);g._39O(A,g._83o)}});var re=Aj.Interactor=function(r){this.gv=this._graphView=r};Se("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(K){this.gv.fi(K)},setCursor:function(z){E||(this.getView().style.cursor=z)},startDragging:function(q){var V=this;V._lastClientPoint=mh(q),V._lastLogicalPoint=V.gv.lp(q),Qj(V,q)},clearDragging:function(){var p=this;p._lastClientPoint=p._lastLogicalPoint=p._logicalPoint=L},autoScroll:function(C){return this.gv.autoScroll(C,this._lastClientPoint)}});var gs=Aj.DefaultInteractor=function(D){ml(gs,this,[D])};Se("DefaultInteractor",re,{handle_mousedown:function(i){tj(i);var W=this,Z=W.gv,P=Z.getDataAt(i);Z.setFocus(i)&&!Z._editing&&(Br(i)?Z.handleDoubleClick(i,P):Z.handleClick(i,P),Z.isPannable()&&!P&&Eq(i)&&!ee(i)&&(W._tx=Z.tx(),W._ty=Z.ty(),W.startDragging(i)))},handleWindowMouseUp:function(j){var m=this,O=m.gv;O._panning&&(delete O._panning,O.onPanEnded(),m.fi({kind:"endPan",event:j})),delete m._tx,delete m._ty,m.clearDragging()},handleWindowMouseMove:function(y){var L=this,D=L.gv,P=L._lastClientPoint;L.fi({kind:D._panning?"betweenPan":"beginPan",event:y}),D._panning=1,D.setTranslate(L._tx+y.clientX-P.x,L._ty+y.clientY-P.y)},handle_mousewheel:function(J){this.gv.handleScroll(J,J.wheelDelta)},handle_DOMMouseScroll:function(I){2===I.axis&&this.gv.handleScroll(I,-I.detail)},handle_keydown:function(g){this.gv.handleKeyDown(g)}});var mj=Aj.SelectInteractor=function(V){ml(mj,this,[V])};Se("SelectInteractor",re,{_42:function(){var i=this,b=i.gv,M=b.getZoom(),J=i.mark,B=i.div;B||(B=i.div=cs(),Ah(i.getView(),B));var j={};j.x=J.x*M+b.tx(),j.y=J.y*M+b.ty(),j.width=J.width*M,j.height=J.height*M,tg(B,j),this.intersects()?(B.style.border="",B.style.background=b.getRectSelectBackground()):(B.style.background="",B.style.border="1px solid "+b.getRectSelectBorderColor())},handle_mousedown:function(r){var T=this,n=T.gv;if(T._57I=L,!n._editing){var h=n.getDataAt(r),E=n.sm();h?ee(r)?E.co(h)?E.rs(h):E.as(h):E.co(h)||E.ss(h):ee(r)||!n.isPannable()?Eq(r)&&(ee(r)||E.cs(),n.isRectSelectable()&&(T.startDragging(r),n._77O=1)):T._57I=mh(r)}},handle_mouseup:function(P){var Q=this,p=Q._57I;p&&(el(p,mh(P))<=1&&Q.gv.sm().cs(),Q._57I=L)},handleWindowMouseUp:function(w){this.clear(w)},handleWindowMouseMove:function(A){var x=this,q=x.gv;x._logicalPoint=q.lp(A),x.mark?(x.fi({kind:"betweenRectSelect",event:A}),x.autoScroll(A),x.redraw()):x.fi({kind:"beginRectSelect",event:A}),x.mark=xd(x._lastLogicalPoint,x._logicalPoint),x.redraw()},intersects:function(){var M=this,A=M._lastLogicalPoint,m=M._logicalPoint;return A.x>m.x||A.y>m.y},clear:function(F){var R=this,s=R.gv,H=R.mark;if(R._57I=L,R._lastLogicalPoint){if(H){if(0!==H.width&&0!==H.height){var k=s.getDatasInRect(H,R.intersects());if(!k.isEmpty()){var S=s.sm(),C=S.toSelection();k.each(function(K){S.co(K)?C.remove(K):C.add(K)}),S.ss(C)}}Wn(R.div),delete R.div,delete R.mark,R.redraw(),R.fi({kind:"endRectSelect",event:F}),s.onRectSelectEnded()}R.clearDragging(),delete s._77O}},redraw:function(){var P=this;P._draw||(P._draw=1,x(function(){P.mark&&P._42(),delete P._draw},16))}});var Gp=Aj.MoveInteractor=function(R){ml(Gp,this,[R])};Se("MoveInteractor",re,{handle_mousedown:function(M){var h=this,T=h.gv;if(Eq(M)&&!T._editing){var d=T.getSelectedDataAt(M);d?(h._data=d,T.handleMouseDown&&T.handleMouseDown(M,d),h.startDragging(M),T.isMovable(d)&&(T._moving=1)):T._focusData=L}},handleWindowMouseUp:function(O){var c=this,I=c.gv;I.handleMouseUp&&I.handleMouseUp(O,c._data),c.clear(O)},handleWindowMouseMove:function(q){var H=this,w=H.gv,v=H._data,l=w.getDataModel(),S=l.getHistoryManager();if((!w._93O||!w._93O(q,v))&&w._moving){var f=H._logicalPoint?"betweenMove":"beginMove",$={kind:f,event:q},D=H._logicalPoint=w.lp(q);S&&"beginMove"===f&&S.beginInteraction();var j=D.x-H._lastLogicalPoint.x,M=D.y-H._lastLogicalPoint.y,I=w.getMoveMode(q,v);I&&("x"===I?M=0:"y"===I?j=0:"xy"!==I&&(j=M=0)),w.moveSelection(j,M),H._lastLogicalPoint=D,H.autoScroll(q),H.fi($)}},clear:function(e){var V=this,v=V.gv,M=v.getDataModel(),h=M.getHistoryManager();V._lastLogicalPoint&&(V._lastLogicalPoint=V._data=v._moving=L,V._logicalPoint&&(V.fi({kind:"endMove",event:e}),v.onMoveEnded(),h&&h.endInteraction()),V.clearDragging())}});var mm=Aj.EditInteractor=function(I){ml(mm,this,[I])};Se("EditInteractor",re,{ms_edit:1,setUp:function(){var u=this;mm.superClass.setUp.call(u),E||u.gv.setEditInteractor(u)},tearDown:function(){mm.superClass.tearDown.call(this),E||this.gv.setEditInteractor(L)},clear:function(){var O=this,p=O.gv;p._editing&&(p._editing=O._77I=O._node=O._edge=O._shape=O._rect=O._89I=O._index=L,O.clearDragging(),O.setCursor(a))},handle_mousedown:function(C){var L=this,j=L.gv.dm(),B=j.getHistoryManager(),T=L._index,Y=L._node,N=L._shape,f=L._edge,I=L._77I,_=L._89I;Eq(C)&&L.gv._editing&&(Y&&_?(L._rect=Y.getRect(),L.startDragging(C),B&&B.beginInteraction(),L.fi({kind:"beginEditRect",event:C,data:Y,direction:_})):N&&T>=0?(L.startDragging(C),B&&B.beginInteraction(),L.fi({kind:"beginEditPoint",event:C,data:N,index:T})):f&&T>=0?(L.startDragging(C),B&&B.beginInteraction(),L.fi({kind:"beginEditPoint",event:C,data:f,index:T})):I&&(L.startDragging(C),B&&B.beginInteraction(),L.fi({kind:"beginEditRotation",event:C,data:I})))},handleWindowMouseUp:function(i){this._46O(i),this.clear()},handleWindowMouseMove:function($){this._78I($)},handle_mousemove:function(L){if(!pl){var g=this,X=g.gv;g._79I(L,X.getSelectedDataAt(L))?X._editing=1:g.clear()}}});var Pd=Aj.TouchInteractor=function(e,I){I=I||{},I.selectable===Q&&(I.selectable=!0),I.movable===Q&&(I.movable=!0),I.pannable===Q&&(I.pannable=!0),I.pinchable===Q&&(I.pinchable=!0),I.editable===Q&&(I.editable=!0),this.params=I,ml(Pd,this,[e])};Se("TouchInteractor",re,{ms_edit:1,setUp:function(){var P=this;Pd.superClass.setUp.call(P),E&&P.params.editable&&P.gv.setEditInteractor(P)},tearDown:function(){var A=this;Pd.superClass.tearDown.call(A),E&&A.params.editable&&A.gv.setEditInteractor(L)},clear:function(c){var M=this,h=M.gv,e=h.dm().getHistoryManager();h._moving&&(M.fi({kind:"endMove",event:c}),delete h._moving,h.onMoveEnded(),e&&e.endInteraction()),h._panning&&(M.fi({kind:"endPan",event:c}),delete h._panning,h.onPanEnded()),h._pinching&&(M.fi({kind:"endPinch",event:c}),delete h._pinching,h.onPinchEnded()),h._editing&&(M._46O(c),M._77I=M._node=M._edge=M._shape=M._rect=M._89I=M._index=h._editing=L),M._moving=M._panning=M._pinching=M._editing=M._57I=M._data=M._beginHistory=L,M.clearDragging()},handle_touchstart:function(S){var Y=this;if(!Y.gv._editing){tj(S),Y._57I=L;var G=Y.params,r=Y.gv,t=r.sm(),B=r.getDataAt(S),q=Bn(S);if(1===q)Br(S)?r.handleDoubleClick(S,B):(r.handleClick(S,B),B&&(r.handleMouseDown&&r.handleMouseDown(S,B),Y._data=B)),G.selectable||(B=L),B?(t.co(B)||t.ss(B),G.editable&&r.isEditable(B)&&Y._79I(S,B,!0)?(Y._editing=1,Y.startDragging(S)):G.movable&&r.isMovable(B)&&(Y._moving=1,Y.startDragging(S))):(Y._57I=mh(S),G.pannable&&r.isPannable()&&(Y._panning=1,Y.startDragging(S),Y._translate={x:r.tx(),y:r.ty()}));else if(G.pinchable&&2===q){Y._pinching=1,Y.startDragging(S);var J=r.getView(),d=r.getZoom(),z=J.getBoundingClientRect(),O=S.touches[0],e=S.touches[1],U={x:(O.clientX+e.clientX)/2-z.left,y:(O.clientY+e.clientY)/2-z.top};U.x-=r.tx(),U.y-=r.ty(),U.x/=d,U.y/=d,Y._p=U,Y._d=ri(S)}}},handle_touchend:function(M){var r=this,O=r.gv,A=r._57I,m=r._data;A&&(el(A,mh(M))<=1&&O.sm().cs(),r._57I=L),m&&O.handleMouseUp&&O.handleMouseUp(M,m)},handleWindowTouchEnd:function(X){this.clear(X)},handleWindowTouchMove:function(p){var s=this,y=s.gv,Q=y.dm().getHistoryManager(),q=Bn(p);if(1===q){if(s._editing&&(Q&&!s._beginHistory&&(s._beginHistory=1,Q.beginInteraction()),y._editing=1,s._78I(p)),s._moving)Q&&!s._beginHistory&&(s._beginHistory=1,Q.beginInteraction()),s.handleMove(p);else if(s._panning){var g=mh(p);y.setTranslate(s._translate.x+g.x-s._lastClientPoint.x,s._translate.y+g.y-s._lastClientPoint.y),s.fi({kind:y._panning?"betweenPan":"beginPan",event:p}),y._panning=1}}else if(2===q&&s._pinching){var H=ri(p);y.handlePinch(s._p,H,s._d),s._d=H,s.fi({kind:y._pinching?"betweenPinch":"beginPinch",event:p}),y._pinching=1}},handleMove:function(K){var d=this,v=d.gv,U=v.lp(K);v._93O&&v._93O(K,d._data)||(v.moveSelection(U.x-d._lastLogicalPoint.x,U.y-d._lastLogicalPoint.y),d._lastLogicalPoint=U,d.autoScroll(K),d.fi({kind:v._moving?"betweenMove":"beginMove",event:K}),v._moving=1)}});var Pn="directional",Ul="point",cb="spot",Ek="light.color";Th(y,{graph3dViewAttributes:L,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:p/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Fb,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:p/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(B,A){jk[B]=A},getShape3dModel:function(x){return jk[x]},createMatrix:function(E,H){pr(E)||(E=[E]);for(var o=E.length-1;o>=0;o--){var x=E[o];H=rl(x.mat,x.s3,x.r3,x.rotationMode,x.t3,H)}return H},transformVec:function(M,R){return Lh(M,R)},createBoxModel:function(){return{vs:rj,ns:bm,uv:jf,is:$k}},createRoundRectModel:function(o,_){return Sc.roundRect(o,_)},createStarModel:function(C,L){return Sc.star(C,L)},createRectModel:function(Y,F){return Sc.rect(Y,F)},createTriangleModel:function(w,M){return Sc.triangle(w,M)},createRightTriangleModel:function(p,e){return Sc.rightTriangle(p,e)},createParallelogramModel:function(t,D){return Sc.parallelogram(t,D)},createTrapezoidModel:function(L,x){return Sc.trapezoid(L,x)},createSmoothSphereModel:function(L,x,Y,o,k,C,r){return Wc(new ar(L,x,Y,o,k,C,r))},createSphereModel:function(x,z,W,H,b,C){return x?Rn(x,z,W,H,b,C):y.createSmoothSphereModel()},createSmoothConeModel:function(X,s,G,W,K){return Tm(X,s,G,W,K)},createConeModel:function(j,Z,p,x,h,U){return j?Fj(j,Z,p,x,h,U):Tm(U)},createSmoothCylinderModel:function(s,K,$,w,I,C,G,p){return Wc(new _b(s,K,$,w,I,C,G,p))},createCylinderModel:function(D,N,K,o,t,S,J){return D?Wi(D,N,K,o,t,S,J):le(S,J)},createSmoothTorusModel:function(S,Z,V,F,e,p){return Wc(new Ch(S,Z,V,F,e,p))},createTorusModel:function($,A,q,i,L,v,r){return $?zp($,A,q,i,L,v,r):Ej(v,r)},createExtrusionModel:function(x,n,s,G,q,S,b,I){return Cn(x,n,s,G,q,S,b,I)},createSmoothRingModel:function(v,X,B,h,w,T){for(var q=[],u=0;u<v.length-1;u+=2)q.push({x:v[u],y:v[u+1]});for(v=Kg(q,X,B)[0],q=[],u=0;u<v.length;u++){var J=v[u];q.push(new Am(J.x,0,J.y))}return Wc(new Sk(q,T,h,w))},createRingModel:function(Z,x,K,h,k,a,p,P,S,Q){for(var N=[],O=0;O<Z.length-1;O+=2)N.push({x:Z[O],y:Z[O+1]});a=a||y.shapeSide,p=p||0,P=P||a;var f,i,T,g,W,m,V,u,D,F,O,U,w,o,s,b,j,J,I=[],d=[],Y=S?[]:L,r=S?[]:L,_=Q?[]:L,M=Q?[]:L,q=h?[]:L,t=h?[]:L,G=k?[]:L,$=k?[]:L,Z=Kg(N,x,K),B=Pg(Z),A=0,R=2*Math.PI/a;return Z.forEach(function(L){if(T=L.length,T>1){if(g=L[0],h)for(m=g.x,u=g.y,O=p;P>O;O++)U=O+1,w=O*R,o=U*R,s=n(w),b=l(w),j=n(o),J=l(o),q.push(s*m,u,-b*m,j*m,u,-J*m,0,u,0),t.push(.5-.5*s,.5-.5*b,.5-.5*j,.5-.5*J,.5,.5);for(F=0;T>F;F++){for(W=L[F],m=g.x,V=W.x,u=g.y,D=W.y,f=A/B,A+=el(g,W),i=A/B,O=p;P>O;O++)U=O+1,w=O*R,o=U*R,s=n(w),b=l(w),j=n(o),J=l(o),I.push(s*V,D,-b*V,j*V,D,-J*V,s*m,u,-b*m,j*V,D,-J*V,j*m,u,-J*m,s*m,u,-b*m),d.push(O/a,i,U/a,i,O/a,f,U/a,i,U/a,f,O/a,f),S&&O===p&&(Y.push(0,u,0,0,D,0,s*V,D,-b*V,s*V,D,-b*V,s*m,u,-b*m,0,u,0),r.push(0,.5-u,0,.5-D,2*V,.5-D,2*V,.5-D,2*m,.5-u,0,.5-u)),Q&&U===P&&(_.push(0,u,0,j*V,D,-J*V,0,D,0,j*V,D,-J*V,0,u,0,j*m,u,-J*m),M.push(1,.5-u,1-2*V,.5-D,1,.5-D,1-2*V,.5-D,1,.5-u,1-2*m,.5-u));g=W}if(k)for(m=g.x,u=g.y,O=p;P>O;O++)U=O+1,w=O*R,o=U*R,s=n(w),b=l(w),j=n(o),J=l(o),G.push(j*m,u,-J*m,s*m,u,-b*m,0,u,0),$.push(.5-.5*j,.5+.5*J,.5-.5*s,.5+.5*b,.5,.5)}}),{vs:I,uv:d,bottom_vs:G,bottom_uv:$,top_vs:q,top_uv:t,from_vs:Y,from_uv:r,to_vs:_,to_uv:M}}},!0),Th(H,{"3d.move.mode":Q,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":Q,"edge.gradient.color":Q,"edge.source.t3":Q,"edge.target.t3":Q,"light.type":Ul,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":p/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Xr,"wf.short":!1,"wf.mat":Q,batch:Q,"transparent.mask":!1,brightness:Q,"select.brightness":.7,"repeat.uv.length":Q,"label.face":t,"label.t3":Q,"label.r3":Q,"label.texture.scale":2,"label.rotationMode":Ng,"label.light":!1,"label.blend":Q,"label.reverse.flip":!1,"label.reverse.color":Ec,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":t,"label2.t3":Q,"label2.r3":Q,"label2.texture.scale":2,"label2.rotationMode":Ng,"label2.light":!1,"label2.blend":Q,"label2.reverse.flip":!1,"label2.reverse.color":Ec,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":t,"note.t3":Q,"note.r3":Q,"note.texture.scale":2,"note.rotationMode":Ng,"note.light":!1,"note.blend":Q,"note.reverse.flip":!1,"note.reverse.color":Ec,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":t,"note2.t3":Q,"note2.r3":Q,"note2.texture.scale":2,"note2.rotationMode":Ng,"note2.light":!1,"note2.blend":Q,"note2.reverse.flip":!1,"note2.reverse.color":Ec,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:Q,"shape3d.color":bq,"shape3d.top.color":Q,"shape3d.bottom.color":Q,"shape3d.from.color":Q,"shape3d.to.color":Q,"shape3d.image":Q,"shape3d.top.image":Q,"shape3d.bottom.image":Q,"shape3d.from.image":Q,"shape3d.to.image":Q,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":Q,"shape3d.side.to":Q,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":Q,"shape3d.opacity":Q,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Ec,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":Q,"shape3d.uv.scale":Q,"shape3d.top.uv.offset":Q,"shape3d.top.uv.scale":Q,"shape3d.bottom.uv.offset":Q,"shape3d.bottom.uv.scale":Q,"shape3d.from.uv.offset":Q,"shape3d.from.uv.scale":Q,"shape3d.to.uv.offset":Q,"shape3d.to.uv.scale":Q,"shape3d.top.cap":Q,"shape3d.bottom.cap":Q,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":bq,"all.image":Q,"all.blend":Q,"all.opacity":Q,"all.reverse.flip":!1,"all.reverse.color":Ec,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":Q,"all.uv.offset":Q,"all.uv.scale":Q,"all.discard.selectable":!0,mat:Q,"left.mat":Q,"right.mat":Q,"top.mat":Q,"bottom.mat":Q,"front.mat":Q,"back.mat":Q},!0);var xc,Wo=!1,Yq=[0,0,0,1/255],hi={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:d,2:S,3:Tg,4:Po,5:t,6:_}},fj=function(g,V,n,X){if(V.getFaceVisible(g,n)){Rm(V,Uq(g,V.getFaceMat(g,n)||V.getMat(g)));var J=V._26I;V.getFaceReverseCull(g,n)?J.enable(J.CULL_FACE):J.disable(J.CULL_FACE),Lg(J,V._prg.uFixPickReverseColor,hi[n]),gl(J,X,6),eb(V)}},fg=function(x){return x instanceof fn},Bl=function(N){return[N.x,N.e||0,N.y]},Id=function(D,v,y){for(var v=jl(v),S=v[0],B=v[1],m=v[2];y--;)D.push(S,B,m)},kq=function(q,U,z){for(var U=jl(U),x=U[0],Q=U[1],m=U[2],X=U[3];z--;)q.push(x,Q,m,X)},Nj=function(k,u,e){if(u)for(var S,Q,l,G=u[0],c=u[1],E=u[2],y=u[4],U=u[5],F=u[6],K=u[8],I=u[9],v=u[10],W=u[12],R=u[13],J=u[14],m=e.length,M=0,M=0;m>M;M+=3)S=e[M],Q=e[M+1],l=e[M+2],k.push(G*S+y*Q+K*l+W,c*S+U*Q+I*l+R,E*S+F*Q+v*l+J);else yl(k,e)},hb=function(H,j){var b=j.s("light.intensity"),F=jl(j.s(Ek)),Y=F[0],n=F[1],z=F[2];1!==b&&(Y*=b,n*=b,z*=b),H.push(Y,n,z,j.s("light.disabled")?1:0)},Sl=function(R,o,v){Lg(o,v.uHeadlightRange,R._headlightRange);var E=R._headlightIntensity,d=jl(R._headlightColor);1!==E&&(d=[d[0]*E,d[1]*E,d[2]*E]),Lg(o,v.uHeadlightColor,[d[0],d[1],d[2],R._headlightDisabled?1:0]);var F=R._59O,$=R._spots,T=R._dirs;if(F.length){var L=[],Q=[],j=[];F.forEach(function(Z){hb(L,Z),yl(Q,Z.p3()),j.push(Z.s("light.range"))}),o.uniform4fv(v.uPointColor,L),o.uniform1fv(v.uPointRange,j),o.uniform3fv(v.uPointPosition,Q)}if($.length){var S=[],Z=[],t=[],J=[],K=[],p=[];$.forEach(function(E){hb(S,E),yl(Z,E.p3()),yl(t,E.s("light.center")),J.push(E.s("light.range")),K.push(n(E.s("light.angle")/2)),p.push(E.s("light.exponent"))}),o.uniform4fv(v.uSpotColor,S),o.uniform1fv(v.uSpotRange,J),o.uniform1fv(v.uSpotAngle,K),o.uniform1fv(v.uSpotExponent,p),o.uniform3fv(v.uSpotPosition,Z),o.uniform3fv(v.uSpotCenter,t)}if(T.length){var D=[],k=[];T.forEach(function(w){hb(D,w),yl(k,w.p3())}),o.uniform4fv(v.uDirColor,D),o.uniform3fv(v.uDirPosition,k)}},ej=function(C){return C>0&&0===(C-1&C)},Oh=function(v){return v=q(0,g(p,v)),v=q(nd,g(p-nd,v))},we=function(){return.05+f()/2},ek=function(A,y,o,x){var m,X=A.getEye();return A.isOrtho()?(m=Of(A.getCenter(),X),m[0]+=x[0],m[1]+=x[1],m[2]+=x[2]):m=X,Eb(y,o,x,m)},Eb=function(U,F,l,a){var $=Bd(U,F),t=Of(a,l,!0),Q=Bd(t,F);if(Z(Q)<nd)return L;var n=($-Bd(l,F))/Q;return[l[0]+t[0]*n,l[1]+t[1]*n,l[2]+t[2]*n]},oc=function(e,h){return{x:2*e.x-h.x,y:2*e.y-h.y}},Gn=function(z,H,v,d){var B,g;if(!z)return B=V(H.y-v.y,v.x-H.x),{x:H.x+d*l(B),y:H.y+d*n(B)};if(!v)return B=V(z.y-H.y,H.x-z.x),{x:H.x+d*l(B),y:H.y+d*n(B)};var U=Of([z.x,z.y,0],[H.x,H.y,0],!0),_=Of([v.x,v.y,0],[H.x,H.y,0],!0),N=-(U[0]+_[0])/2,A=-(U[1]+_[1])/2,f=w(N*N+A*A);return nd>f?(B=V(z.y-H.y,H.x-z.x),{x:H.x+d*l(B),y:H.y+d*n(B)}):(B=X(Bd(U,_))/2,g=U[1]*_[0]-U[0]*_[1]>0?-1:1,N/=f,A/=f,f=d/l(B),{x:H.x+g*f*N,y:H.y+g*f*A})},Nn=function(P){var R=P[1],S=P[2],_=P[3],l=P[6],Z=P[7],Q=P[11];P[1]=P[4],P[2]=P[8],P[3]=P[12],P[4]=R,P[6]=P[9],P[7]=P[13],P[8]=S,P[9]=l,P[11]=P[14],P[12]=_,P[13]=Z,P[14]=Q},Eh=function(o){var Z=o[0],n=o[1],D=o[2],q=o[3],x=o[4],N=o[5],P=o[6],A=o[7],U=o[8],R=o[9],e=o[10],M=o[11],H=o[12],E=o[13],$=o[14],k=o[15],J=Z*N-n*x,Y=Z*P-D*x,s=Z*A-q*x,w=n*P-D*N,f=n*A-q*N,S=D*A-q*P,V=U*E-R*H,j=U*$-e*H,t=U*k-M*H,d=R*$-e*E,T=R*k-M*E,u=e*k-M*$,m=J*u-Y*T+s*d+w*t-f*j+S*V;return m?(m=1/m,o[0]=(N*u-P*T+A*d)*m,o[1]=(D*T-n*u-q*d)*m,o[2]=(E*S-$*f+k*w)*m,o[3]=(e*f-R*S-M*w)*m,o[4]=(P*t-x*u-A*j)*m,o[5]=(Z*u-D*t+q*j)*m,o[6]=($*s-H*S-k*Y)*m,o[7]=(U*S-e*s+M*Y)*m,o[8]=(x*T-N*t+A*V)*m,o[9]=(n*t-Z*T-q*V)*m,o[10]=(H*f-E*s+k*J)*m,o[11]=(R*s-U*f-M*J)*m,o[12]=(N*j-x*d-P*V)*m,o[13]=(Z*d-n*j+D*V)*m,o[14]=(E*Y-H*w-$*J)*m,o[15]=(U*w-R*Y+e*J)*m,void 0):L},ag=function(p,J){if(J){var T=J[0],y=J[1],f=J[2];p[12]=p[0]*T+p[4]*y+p[8]*f+p[12],p[13]=p[1]*T+p[5]*y+p[9]*f+p[13],p[14]=p[2]*T+p[6]*y+p[10]*f+p[14],p[15]=p[3]*T+p[7]*y+p[11]*f+p[15]}},Ed=function(h,J){if(J){var X=J[0],Y=J[1],g=J[2];h[0]=h[0]*X,h[1]=h[1]*X,h[2]=h[2]*X,h[3]=h[3]*X,h[4]=h[4]*Y,h[5]=h[5]*Y,h[6]=h[6]*Y,h[7]=h[7]*Y,h[8]=h[8]*g,h[9]=h[9]*g,h[10]=h[10]*g,h[11]=h[11]*g
}},gg=function(l,Y,d){var h=Y[0],j=Y[1],G=Y[2],p=Y[3],z=Y[4],g=Y[5],k=Y[6],S=Y[7],e=Y[8],y=Y[9],W=Y[10],O=Y[11],D=Y[12],c=Y[13],v=Y[14],U=Y[15],N=d[0],i=d[1],w=d[2],I=d[3];return l[0]=N*h+i*z+w*e+I*D,l[1]=N*j+i*g+w*y+I*c,l[2]=N*G+i*k+w*W+I*v,l[3]=N*p+i*S+w*O+I*U,N=d[4],i=d[5],w=d[6],I=d[7],l[4]=N*h+i*z+w*e+I*D,l[5]=N*j+i*g+w*y+I*c,l[6]=N*G+i*k+w*W+I*v,l[7]=N*p+i*S+w*O+I*U,N=d[8],i=d[9],w=d[10],I=d[11],l[8]=N*h+i*z+w*e+I*D,l[9]=N*j+i*g+w*y+I*c,l[10]=N*G+i*k+w*W+I*v,l[11]=N*p+i*S+w*O+I*U,N=d[12],i=d[13],w=d[14],I=d[15],l[12]=N*h+i*z+w*e+I*D,l[13]=N*j+i*g+w*y+I*c,l[14]=N*G+i*k+w*W+I*v,l[15]=N*p+i*S+w*O+I*U,l},Uc=function(U,g,S,y){var I,d,r,h,H,q,T,L,M,s,i=g[0],D=g[1],_=g[2],W=y[0],f=y[1],N=y[2],z=S[0],O=S[1],j=S[2];return Z(i-z)<nd&&Z(D-O)<nd&&Z(_-j)<nd?cc(U):(T=i-z,L=D-O,M=_-j,s=1/w(T*T+L*L+M*M),T*=s,L*=s,M*=s,I=f*M-N*L,d=N*T-W*M,r=W*L-f*T,s=w(I*I+d*d+r*r),s?(s=1/s,I*=s,d*=s,r*=s):(I=0,d=0,r=0),h=L*r-M*d,H=M*I-T*r,q=T*d-L*I,s=w(h*h+H*H+q*q),s?(s=1/s,h*=s,H*=s,q*=s):(h=0,H=0,q=0),U[0]=I,U[1]=h,U[2]=T,U[3]=0,U[4]=d,U[5]=H,U[6]=L,U[7]=0,U[8]=r,U[9]=q,U[10]=M,U[11]=0,U[12]=-(I*i+d*D+r*_),U[13]=-(h*i+H*D+q*_),U[14]=-(T*i+L*D+M*_),U[15]=1,U)},Mk=function(v,W,n,y,c){var f=1/Y(W/2),N=1/(y-c);return v[0]=f/n,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=f,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=(c+y)*N,v[11]=-1,v[12]=0,v[13]=0,v[14]=2*c*y*N,v[15]=0,v},zd=function(F,$,M,R,E,v,L){var J=1/($-M),f=1/(R-E),X=1/(v-L);return F[0]=-2*J,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=-2*f,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=2*X,F[11]=0,F[12]=($+M)*J,F[13]=(E+R)*f,F[14]=(L+v)*X,F[15]=1,F},Vj=function(q,v){return Uc(v?v:Jp(),q._eye,q._center,q._up)},up=function(o){var V=o.getAspect(),e=o._near,n=o._far,J=Jp();if(o._ortho){var k=o._orthoWidth/2,C=k/V;zd(J,-k,k,-C,C,e,n)}else Mk(J,o._fovy,V,e,n);return J},$q=function(x,i){if(!x)return L;var I=0,U=1,m=2,o=[],B=0,T=x.length,t=T/3;if(i){for(;T>B;B++)o[B]=0;for(B=0;B<i.length;B+=3){var v=[],g=[],s=[];v[I]=x[3*i[B+1]+I]-x[3*i[B]+I],v[U]=x[3*i[B+1]+U]-x[3*i[B]+U],v[m]=x[3*i[B+1]+m]-x[3*i[B]+m],g[I]=x[3*i[B+2]+I]-x[3*i[B+1]+I],g[U]=x[3*i[B+2]+U]-x[3*i[B+1]+U],g[m]=x[3*i[B+2]+m]-x[3*i[B+1]+m],s[I]=v[U]*g[m]-v[m]*g[U],s[U]=v[m]*g[I]-v[I]*g[m],s[m]=v[I]*g[U]-v[U]*g[I];for(var S=0;3>S;S++)o[3*i[B+S]+I]+=s[I],o[3*i[B+S]+U]+=s[U],o[3*i[B+S]+m]+=s[m]}}else for(B=0;t>B;B+=3){var v=[],g=[],s=[];v[I]=x[3*(B+1)+I]-x[3*B+I],v[U]=x[3*(B+1)+U]-x[3*B+U],v[m]=x[3*(B+1)+m]-x[3*B+m],g[I]=x[3*(B+2)+I]-x[3*(B+1)+I],g[U]=x[3*(B+2)+U]-x[3*(B+1)+U],g[m]=x[3*(B+2)+m]-x[3*(B+1)+m],s[I]=v[U]*g[m]-v[m]*g[U],s[U]=v[m]*g[I]-v[I]*g[m],s[m]=v[I]*g[U]-v[U]*g[I];for(var S=0;3>S;S++)o[3*(B+S)+I]=s[I],o[3*(B+S)+U]=s[U],o[3*(B+S)+m]=s[m]}for(B=0;T>B;B+=3){var q=[];q[I]=o[B+I],q[U]=o[B+U],q[m]=o[B+m];var d=w(q[I]*q[I]+q[U]*q[U]+q[m]*q[m]);0===d&&(d=nd),q[I]=q[I]/d,q[U]=q[U]/d,q[m]=q[m]/d,o[B+I]=q[I],o[B+U]=q[U],o[B+m]=q[m]}return new qp(o)},Vi=function(t,e,F){if(F||(F=t.createTexture()),e){var W=t.TEXTURE_2D,i=t.LINEAR,N=t.REPEAT,c=t.CLAMP_TO_EDGE,b=t.TEXTURE_MIN_FILTER;wj(t,F),t.texImage2D(W,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),$j(t,t.TEXTURE_MAG_FILTER,i),ej(e.width)&&ej(e.height)?($j(t,t.TEXTURE_WRAP_S,N),$j(t,t.TEXTURE_WRAP_T,N),$j(t,b,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(W)):($j(t,t.TEXTURE_WRAP_S,c),$j(t,t.TEXTURE_WRAP_T,c),$j(t,b,i)),wj(t,L)}return F},ws=function(k){k._26I&&k._prg&&(k._26I.deleteProgram(k._prg),k._prg=L)},Rc=function(N,U,C,Y){var c=N.createShader(C);return N.shaderSource(c,Y),N.compileShader(c),N.attachShader(U,c),c},jr=function(Y){return Y.createBuffer()},wj=function(p,E){p.bindTexture(p.TEXTURE_2D,E)},de=function(c,n){c.bindFramebuffer(c.FRAMEBUFFER,n)},$j=function(W,O,l){W.texParameteri(W.TEXTURE_2D,O,l)},os=function(R,W){if(W){var W=jl(W);R.clearColor(W[0],W[1],W[2],W[3])}},Ud=function(N,F){Lg(N,F.uFix,!0),As(N,F.aNormal)},Lc=function(J,c){Lg(J,c.uFix,!1),ac(J,c.aNormal)},of=function(e,h,v,K,M,I,m,N){e._picking||(v?(Lg(e,h.uBlend,!0),Lg(e,h.uBlendColor,v)):Lg(e,h.uBlend,!1),Lg(e,h.uLight,K==L?!0:K),aq(M)&&1!==M&&Lg(e,h.uPartOpacity,M),Lg(e,h.uReverseFlip,I==L?!1:I),Lg(e,h.uFixPickReverseColor,m||Ec)),N?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE)},Aq=function(B,e){B._picking||Lg(B,e.uPartOpacity,1)},uo=function(Y,o,j,$,f,V,E,h){if(j){Lg(Y,o.uTexture,!0),Lg(Y,o.uDiscardSelectable,Zk($)?$:!0),ac(Y,o.aUv),Ml(Y,f,V,o.aUv,2),Y.activeTexture(Y.TEXTURE0),wj(Y,j),Y.uniform1i(o.uSampler,0);var e=[0,0,1,1];E&&(e[0]=E[0],e[1]=E[1]),h&&(e[2]=h[0],e[3]=h[1]),Lg(Y,o.uOffsetScale,e)}},tr=function(b,J,t){t&&(wj(b,L),As(b,J.aUv),Lg(b,J.uTexture,!1))},_r=function(h,H,d,W,v,i){d&&!C&&h.lineWidth(d),W&&!h._picking&&Lg(h,H.uFixPickReverseColor,W),v&&Ml(h,v,i,H.aPosition)},Dg=function(G,w,D,n){xc&&(n=G[xc]),G.drawArrays(n==L?G.TRIANGLES:n,w,D)},gl=function(E,C,f,V){xc&&(V=E[xc]),E.drawElements(V==L?E.TRIANGLES:V,f,E.UNSIGNED_SHORT,C==L?0:2*C)},Ml=function(c,x,z,S,w){var B=c.ARRAY_BUFFER;c.bindBuffer(B,x),z&&c.bufferData(B,z,c.STATIC_DRAW),S!=L&&c.vertexAttribPointer(S,w?w:3,c.FLOAT,!1,0,0)},$e=function(K,s,f){var b=K.ELEMENT_ARRAY_BUFFER;K.bindBuffer(b,s),f&&K.bufferData(b,f,K.STATIC_DRAW)},Lg=function(l,x,s){if(s!=L&&x!=L){s=jl(s);var Z=s.length;3===Z?l.uniform3fv(x,s):4===Z?l.uniform4fv(x,s):16===Z?l.uniformMatrix4fv(x,!1,s):Zk(s)?l.uniform1i(x,s?1:0):2===Z?l.uniform2fv(x,s):l.uniform1f(x,s)}},ac=function(Q,e){e!=L&&e>=0&&Q.enableVertexAttribArray(e)},As=function(x,i){i!=L&&i>=0&&x.disableVertexAttribArray(i)},eb=function(U,w){var P=U.getGL(),o=U._prg;U._7O=U._8O.pop(),w&&(Lg(P,o.uMVMatrix,U._7O),U._6O=w,Lg(P,o.uNMatrix,w))},ob=function(i,J){return J||(J=Jp()),xf(J,i),Eh(J),Nn(J),J},Rm=function(r,T){var C=r.getGL(),X=r._prg,J=r._7O;T&&(r._8O.push(Gh(J)),gg(J,J,T)),Lg(C,X.uMVMatrix,J),Lg(C,X.uNMatrix,ob(J,r._6O))},Kc=function(w,f,Y,T,p,F){if(Y){if(T){var x=Y.value++,A=[(255&x>>24)/255,(255&x>>16)/255,(255&x>>8)/255,(255&x)/255];Y[x]={data:p,part:F}}else A=Yq;return Lg(w,f.uFixPickReverseColor,A),A}},wi=function(){var u={center:function(Q,E,G,H,V){var g=E[1]/2,L={x:-E[0]/2,y:g,width:E[0],height:E[1]},q=wo(Q,L,G);return[q.x+H,2*g-q.y-V,we()]},front:function(Z,n,o,O,v){var U=n[1]/2,P={x:-n[0]/2,y:U,width:n[0],height:n[1]},h=wo(Z,P,o);return[h.x+O,2*U-h.y-v,n[2]/2+we()]},back:function(W,i,k,x,o){var N=i[0]/2,y=i[1]/2,Z={x:N,y:y,width:i[0],height:i[1]},B=wo(W,Z,k);return[2*N-B.x-x,2*y-B.y-o,-i[2]/2-we()]},left:function(E,J,Y,w,g){var p=J[1]/2,S={x:-J[2]/2,y:p,width:J[2],height:J[1]},C=wo(E,S,Y);return[-J[0]/2-we(),2*p-C.y-g,C.x+w]},right:function(k,$,T,U,W){var c=$[2]/2,N=$[1]/2,w={x:c,y:N,width:$[2],height:$[1]},X=wo(k,w,T);return[$[0]/2+we(),2*N-X.y-W,2*c-X.x-U]},top:function(Z,R,p,Q,e){var r={x:-R[0]/2,y:-R[2]/2,width:R[0],height:R[2]},B=wo(Z,r,p);return[B.x+Q,R[1]/2+we(),B.y+e]},bottom:function(b,w,o,M,O){var A=w[2]/2,D={x:-w[0]/2,y:A,width:w[0],height:w[2]},y=wo(b,D,o);return[y.x+M,-w[1]/2-we(),2*A-y.y-O]}};return function(s,T,d,K,O,f){return u[K](s,T,d,O||0,f||0)}}(),Ok=function(H,M,u,V,N,q,s,P,Y,J){if(N&&(M[0]+=N[0],M[1]+=N[1],M[2]+=N[2]),ag(H,u),P){var E=Jp();if(md(E,Y,J),Lh(M,E),ag(H,M),H.auto=P,H.pos=Lh([0,0,0],H),q){var k=H.mat2=Jp();md(k,q,s)}}else md(H,Y,J),ag(H,M),V===d?zk(H,-B):V===S?zk(H,B):V===Tg?xj(H,-B):V===Po?xj(H,B):V===_&&zk(H,p),md(H,q,s);return H},xb=function(M,Q){var t=Q.auto,o=Q.mat2,m=M.gv;if(t){var b=Of(M.gv.getEye(),Q.pos),x=Jp();zk(x,p/2+V(-b[2],b[0])),"y"!==t&&xj(x,-V(b[1],w(b[2]*b[2]+b[0]*b[0]))),o&&gg(x,x,o),x=gg(Jp(),Q,x),Rm(m,x)}else Rm(m,Q)},zf=function(N,l,z,I,U){var w=N.s,O=N.gv,B=O.getGL(),g=O._prg,H=O._buffer,C=O._1O;Vi(B,Hh,C),xb(N,z),of(B,g,w(l+".blend"),w(l+".light"),w(l+".opacity"),w(l+".reverse.flip"),w(l+".reverse.color"),w(l+".reverse.cull")),uo(B,g,C,U,H.uv,lb),Ml(B,H.vs,I,g.aPosition),Ml(B,H.ns,si,g.aNormal),$e(B,H.is,Dm),gl(B,0,Dm.length),tr(B,g,C),Aq(B,g),eb(O)},Xi=function(y,a,w){var D=y.gv,c=y.data,Q=y[a]={blend:D.getBodyColor(c)||D.getFaceBlend(c,a),light:D.getFaceLight(c,a),color:D.getFaceColor(c,a),opacity:D.getFaceOpacity(c,a),transparent:D.getFaceTransparent(c,a),reverseFlip:D.getFaceReverseFlip(c,a),reverseColor:D.getFaceReverseColor(c,a),reverseCull:D.getFaceReverseCull(c,a),texture:D.getFaceImage(c,a),discardSelectable:D.getFaceDiscardSelectable(c,a)};if("csg"!==a){Q.uv=D.getFaceUv(c,a)||w&&w[a+"Uv"],Q.uvScale=D.getFaceUvScale(c,a)||w&&w[a+"UvScale"],Q.uvOffset=D.getFaceUvOffset(c,a)||w&&w[a+"UvOffset"];var q=D.getFaceMat(c,a);q&&(Q.mat=Uq(c,q))}return Q},db=function(V,I,P,t,w){if(t){if(!w(t.transparent))return;var p=V.data,B=V.gv,d=B._buffer,h=B.getTexture(t.texture,p);uo(I,P,h,t.discardSelectable,d.uv,t.tuv,t.uvOffset,t.uvScale),of(I,P,t.blend,t.light,t.opacity,t.reverseFlip,t.reverseColor,t.reverseCull),Lg(I,P.uDiffuse,t.color),Ml(I,d.vs,t.vs,P.aPosition),Ml(I,d.ns,t.ns,P.aNormal),Dg(I,0,t.vs.length/3),Aq(I,P),tr(I,P,h)}},Jg=function(G,F,L,n,d,$){var f,x,m,Y,N,c,a,h,w,s,R,B=[n-F,d-L],j=G?G.length:0;for(m=0;j>m;m++){for(Y=2,f=G[m],N=f[0],c=f[1];Y+1<f.length;){if(a=f[Y],h=f[Y+1],x=Ug(F,L,n,d,N,c,a,h,!0)){w=[a-N,h-c],s=el(w),w[0]/=s,w[1]/=s,s=Bd(B,w),s=s>0?$:-$,R=[w[0]*s,w[1]*s];break}N=a,c=h,Y+=2}if(R)break}if(R)for(n=F+R[0],d=L+R[1],m=0;j>m;m++)for(Y=2,f=G[m],N=f[0],c=f[1];Y+1<f.length;){if(a=f[Y],h=f[Y+1],x=Ug(F,L,n,d,N,c,a,h,!0))return[0,0];N=a,c=h,Y+=2}return R?R:[n-F,d-L]},ho=G.graph3d={},Wg=function(f,T,E){th(j+".graph3d."+f,T,E)},bs="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Xl="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";Th(y,{setBatchInfo:function(V,s){ub[V]=s},getBatchInfo:function(n){return ub[n]}},!0);var ph=[1,1,1],zc=[1,0,0,0,0,1,0,1,1,1,1,0],fd=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Oi=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],qc=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],lf=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Vm=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Td=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],cm=function(c,b){dh(c,b),Wh(c,b,"_wireframeModelMap","_wireframeIndexMap"),Wh(c,b,"_polylineModelMap","_polylineIndexMap")},dh=function(G,W){if(W){var U,L,_=W._id,u=G._33O,Z=G._34O,T=Z[_];if(T){L=T.batch,U=u[L];var X=T.begin,I=T.size,D=3*X,k=3*I,f=4*X,E=4*I,J=U.vs,h=U.uv,b=U.cs,c=U.bs,s=U.rs,w=U.ds,o=T.index;if(U.invalidate=!0,delete Z[_],w.splice(o,1),yg(w))delete u[L];else{for(;o<w.length;o++)T=Z[w[o]._id],T.index--,T.begin-=I;J.splice(D,k),U.ns.splice(D,k),U.ps.splice(f,E),h&&h.splice(2*X,2*I),b&&b.splice(f,E),c&&c.splice(D,k),s&&s.splice(X,I)}}}else G._34O={},G._33O={}},Wh=function(B,u,q,X){if(u){var r,Q,A=u._id,G=B[q],D=B[X],O=D[A];if(O){Q=O.batch,r=G[Q];var T=O.begin,M=O.size,l=3*T,C=3*M,H=4*T,c=4*M,t=r.ds,v=O.index;if(r.invalidate=!0,delete D[A],t.splice(v,1),yg(t))delete G[Q];else{for(;v<t.length;v++)O=D[t[v]._id],O.index--,O.begin-=M;r.vs.splice(l,C),r.cs.splice(H,c),r.ps.splice(H,c),r.ls&&r.ls.splice(T,M)}}}else B[q]={},B[X]={}},Bc=function(K,v,G,e){if(!e)return L;var u=v[e];if(!u){var S=ub[e]||Wr,J=S.image?[]:L;u=v[e]={vs:[],ns:[],uv:J,cs:J?L:S.color?L:[],bs:S.blend?[]:L,ps:[],rs:S.brightness?[]:L,ds:[]}}return u.invalidate=!0,K[G._id]={index:u.ds.length,begin:u.vs.length/3,batch:e},u.ds.push(G),u},Nm=function($,Z){return Z!=L&&1!==Z?[$[0]*Z,$[1]*Z,$[2]*Z,$[3]]:$},Re=function(S,w,x){var O=S.getBrightness(w),J=jl(x.color||"white"),i=J[3]<1,_=Math.ceil(x.width)||1,f=(i?"T":"O")+_,n=S._wireframeIndexMap,Z=S._wireframeModelMap,W=Z[f];W||(W=Z[f]={vs:[],cs:[],ps:[],ds:[],T:i,W:_}),W.invalidate=!0;var y=W.vs,o=W.cs,R=W.ds,v=n[w._id]={index:R.length,begin:y.length/3,batch:f};R.push(w),Nj(y,Uq(w,x.mat),x.short?xq:Pq);var U=v.size=y.length/3-v.begin;kq(o,Nm(J,O),U)},zl=function(p,V,Y,o,B,U,N,W,F){var x=p.getBrightness(V);x==L&&(x=1);var C=Nm(jl(o),x),T=C[3]<1;U=Math.ceil(U)||1;var i=(T?"T":"O")+U;if(N){var d=N[0],u=(N[1]||d)+d;i+="-"+d+"-"+u,F&&(i+="-"+Kk(F)+"-"+x,F=Nm(jl(F),x))}var O=p._polylineIndexMap,I=p._polylineModelMap,P=I[i];P||(P=I[i]={vs:[],cs:[],ps:[],ds:[],ls:N?[]:L,T:T,W:U},N&&(P.D=d,P.G=u,P.A=F)),P.invalidate=!0;var j,Z=P.vs,Q=P.cs,m=P.ds,b=P.ls,s=O[V._id]={index:m.length,begin:Z.length/3,batch:i};m.push(V),yl(Z,Y);var M,K=s.size=Z.length/3-s.begin,h=Y.length,y=0,n=[];if(N||B)for(j=0;h>j;j+=6)M=el([Y[j],Y[j+1],Y[j+2]],[Y[j+3],Y[j+4],Y[j+5]]),n.push(M),y+=M;if(y&&B){var D,f=Nm(jl(B),x),S=[f[0]-C[0],f[1]-C[1],f[2]-C[2],f[3]-C[3]],c=0;for(j=0;h>j;j+=6)D=c/y,kq(Q,[C[0]+S[0]*D,C[1]+S[1]*D,C[2]+S[2]*D,C[3]+S[3]*D],1),c+=n[j/6],D=c/y,kq(Q,[C[0]+S[0]*D,C[1]+S[1]*D,C[2]+S[2]*D,C[3]+S[3]*D],1)}else kq(Q,C,K);if(N)for(c=W||0,j=0;h>j;j+=6)b.push(c),c+=n[j/6],b.push(c)},Fp=function(g,u,d){if(u)for(var J=4*u.begin,R=d[u.batch].ps,V=0;V<u.size;V++)R[J++]=g[0],R[J++]=g[1],R[J++]=g[2],R[J++]=g[3]},kl=function(I,g){var G=g+["32"],U=I[g],q=I[G];U?q&&q.length===U.length?q.set(U):I[G]=new qp(U):delete I[G]},cf=function(d,o,n,R,p,i,C,X,u){if(pr(n))n.forEach(function(f){cf(d,o,f,R,p,i,C,X,u)});else if(Un(n))cf(d,o,Qm(R,n),R,p,i,C,X,u);else if(Pj(n)){var U,y=ki(n.mat,o,d),H=ki(n.s3,o,d),O=ki(n.t3,o,d),c=ki(n.r3,o,d);if((H||c||O||y)&&(U=rl(y,H,c,ki(n.rotationMode,o,d),O),i.push(U)),n.shape3d)cf(d,o,n.shape3d,R,p,i,C,X,n);else{u=u||Wr;var G=i[0],k=i.length,Y=R("shape3d.color",n.color,u.color);if(p||(p=R("shape3d.blend",n.blend,u.blend)),k>1){G=Gh(G);for(var _=1;k>_;_++)gg(G,G,i[_])}n.vs&&R(Mp,n.visible,u.visible)&&Kr(G,C,X,n.vs,n.uv,n.is,p,Y),n.top_vs&&R(Ve,n.topVisible,u.topVisible)&&Kr(G,C,X,n.top_vs,n.top_uv,n.top_is,p,R("shape3d.top.color",n.topColor,u.topColor)||Y),n.bottom_vs&&R(Qc,n.bottomVisible,u.bottomVisible)&&Kr(G,C,X,n.bottom_vs,n.bottom_uv,n.bottom_is,p,R("shape3d.bottom.color",n.bottomColor,u.bottomColor)||Y),n.from_vs&&R(Qh,n.fromVisible,u.fromVisible)&&Kr(G,C,X,n.from_vs,n.from_uv,n.from_is,p,R("shape3d.from.color",n.fromColor,u.fromColor)||Y),n.to_vs&&R(Qg,n.toVisible,u.toVisible)&&Kr(G,C,X,n.to_vs,n.to_uv,n.to_is,p,R("shape3d.to.color",n.toColor,u.toColor)||Y)}U&&i.pop()}},Kr=function(f,L,A,g,T,q,E,R){var l,J=L.cs,p=L.uv,V=L.bs;if(q){l=q.length;for(var U=0;l>U;U++){var C=q[U];Nj(A,f,[g[3*C],g[3*C+1],g[3*C+2]]),p&&yl(p,[T[2*C],T[2*C+1]])}}else l=g.length/3,Nj(A,f,g),p&&yl(p,T);J&&kq(J,R,l),V&&(E?Id(V,E,l):yl(V,ph,l))},Vf=function(m,V,C,G){var X=[];G?cf(m.gv,m.data,G,m.s,m.getBodyColor(),[V],C,X):(ah(m,d,V,C,X),ah(m,S,V,C,X),ah(m,t,V,C,X),ah(m,_,V,C,X),ah(m,Tg,V,C,X),ah(m,Po,V,C,X),ah(m,"csg",V,C,X)),X.length&&(yl(C.vs,X),yl(C.ns,$q(X)))},ah=function(J,O,b,d,S){var C=J[O];if(C){var x=C.tuv;if(x){var z,r,B,m,e=C.uvScale,V=C.uvOffset;if(e)for(z=x.length,r=e[0],B=e[1],m=0;z>m;m+=2)x[m]*=r,x[m+1]*=B;if(V)for(z=x.length,r=V[0],B=V[1],m=0;z>m;m+=2)x[m]+=r,x[m+1]+=B}Kr(b,d,S,C.vs,x,L,C.blend,C.color)}},oe=function(M,U,s,d,A,F,x,i){var S,p=s.cs,O=s.uv,C=s.bs;if(M.getFaceVisible(U,F)){var V=M.getFaceMat(U,F);if(V&&(A=Uq(U,V)),Nj(x,A,i),p&&kq(p,M.getFaceColor(U,F),6),O){var h=M.getFaceUv(U,F)||d[F+"Uv"],T=M.getFaceUvScale(U,F)||d[F+"UvScale"],Z=M.getFaceUvOffset(U,F)||d[F+"UvOffset"];h=h?[h[6],h[7],h[0],h[1],h[2],h[3],h[2],h[3],h[4],h[5],h[6],h[7]]:zc;var R=h[0],w=h[1],K=h[2],$=h[3],W=h[4],g=h[5],G=h[6],H=h[7],X=h[8],I=h[9],P=h[10],c=h[11];if(T){var u=T[0],Q=T[1];R*=u,w*=Q,K*=u,$*=Q,W*=u,g*=Q,G*=u,H*=Q,X*=u,I*=Q,P*=u,c*=Q}if(Z){var N=Z[0],L=Z[1];R+=N,w+=L,K+=N,$+=L,W+=N,g+=L,G+=N,H+=L,X+=N,I+=L,P+=N,c+=L}O.push(R,w,K,$,W,g,G,H,X,I,P,c)}C&&(S=M.getBodyColor(U)||M.getFaceBlend(U,F),S?Id(C,S,6):yl(C,ph,6))}},Lp=function(T,d,H,R){var c=T.getGL(),G=T._prg,V=T._buffer;if(!Jo(d)){Rm(T),Ud(c,G);for(var W in d){var m=d[W];if(!(R&&!m.T||!R&&m.T)){m.invalidate?(m.invalidate=!1,kl(m,"vs"),kl(m,"cs"),kl(m,"ls"),kl(m,"ps")):H&&kl(m,"ps");var S=m.vs32,U=H?m.ps32:m.cs32;_r(c,G,m.W,L,V.vs,S);var Y=m.D,x=!T._dashDisabled&&Y;x&&(Lg(c,G.uDash,!0),Lg(c,G.uDashDistance,Y),Lg(c,G.uDashGapDistance,m.G),ac(c,G.aLineDistance),Ml(c,V.lineDistance,m.ls32,G.aLineDistance,1),Lg(c,G.uDiffuse,m.A||gc));var Z=!T._batchColorDisabled;Z&&(Lg(c,G.uBatchColor,!0),ac(c,G.aBatchColor),Ml(c,V.batchColor,U,G.aBatchColor,4)),Dg(c,0,S.length/3,c.LINES),Z&&(Lg(c,G.uBatchColor,!1),As(c,G.aBatchColor)),x&&(Lg(c,G.uDash,!1),As(c,G.aLineDistance))}}Lc(c,G)}},Zq=function(s,f,v){var e,r,I,C,X,h,V,P,E,W,Y,A=s.getGL(),c=s._prg,y=s._buffer,H=s._33O;if(!Jo(H)){Rm(s);for(e in H)if(r=ub[e]||Wr,!(v&&!r.transparent||!v&&r.transparent)&&(I=H[e],f||!r.transparentMask)){var w=v&&r.autoSort!==!1&&(s._33Q||I.invalidate);if(I.invalidate?(I.invalidate=!1,kl(I,"vs"),kl(I,"ns"),kl(I,"cs"),kl(I,"rs"),kl(I,"ps"),kl(I,"bs"),kl(I,"uv")):f&&kl(I,"ps"),X=I.vs32,h=f?I.ps32:I.cs32,E=I.uv32,V=I.bs32,P=I.rs32,Y=X.length/3,w&&(I.is=_i(X,s.getEye())),Y){C=r.light,W=s.getTexture(r.image),of(A,c,L,r.light,r.opacity,r.reverseFlip,r.reverseColor,r.reverseCull),h?s._batchColorDisabled||(Lg(A,c.uBatchColor,!0),ac(A,c.aBatchColor),Ml(A,y.batchColor,h,c.aBatchColor,4)):Lg(A,c.uDiffuse,r.color);var l=V&&!s._batchBlendDisabled;l&&(Lg(A,c.uBatchBlend,!0),ac(A,c.aBatchBlend),Ml(A,y.batchBlend,V,c.aBatchBlend));var z=P&&!s._batchBrightnessDisabled;z&&(Lg(A,c.uBatchBrightness,!0),ac(A,c.aBatchBrightness),Ml(A,y.batchBrightness,P,c.aBatchBrightness,1)),E&&uo(A,c,W,r.discardSelectable,y.uv,E,r.uvOffset,r.uvScale),Ml(A,y.vs,X,c.aPosition),Ml(A,y.ns,I.ns32,c.aNormal),I.is?($e(A,y.is,I.is),gl(A,0,Y)):Dg(A,0,Y),E&&tr(A,c,W),h&&!s._batchColorDisabled&&(Lg(A,c.uBatchColor,!1),As(A,c.aBatchColor)),l&&(Lg(A,c.uBatchBlend,!1),As(A,c.aBatchBlend)),z&&(Lg(A,c.uBatchBrightness,!1),As(A,c.aBatchBrightness)),Aq(A,c)}}}},_i=function(s,U){for(var G=s.length/3,o=new Array(G),k=G/3,B=new Array(k),T=0;k>T;T++)B[T]=T;B.sort(function(m,u){var Q=9*m,L=[(s[Q]+s[Q+3]+2*s[Q+6])/4,(s[Q+1]+s[Q+4]+2*s[Q+7])/4,(s[Q+2]+s[Q+5]+2*s[Q+8])/4];Q=9*u;var K=[(s[Q]+s[Q+3]+2*s[Q+6])/4,(s[Q+1]+s[Q+4]+2*s[Q+7])/4,(s[Q+2]+s[Q+5]+2*s[Q+8])/4],v=el(U,L)-el(U,K);return v>0?-1:0>v?1:0});for(var T=0;k>T;T++){var y=3*T,n=3*B[T];o[y]=n,o[y+1]=n+1,o[y+2]=n+2}return new er(o)},lb=new qp([0,0,0,1,1,1,1,0]),si=new qp([0,0,1,0,0,1,0,0,1,0,0,1]),Dm=new er([0,1,2,2,3,0]),rj=new qp([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),$k=new er([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),jf=new qp([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),ul=new qp([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),bm=$q(rj,$k),Pq=(new qp([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new er([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),xq=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Rn=function(b,e,Q,w,o,x){x=x||16,b=b||16,e=e||0,Q=Q||b;var J,H,X,B,m,Y,i,W,K=.5,U=[],s=[],I=O/b,$=p/x;for(J=0;x>J;J++)for(m=J+1,B=J*$,W=m*$,H=e;Q>H;H++)Y=H+1,X=H*I,i=Y*I,U.push(K*l(B)*n(X),K*n(B),-K*l(B)*l(X),K*l(W)*n(i),K*n(W),-K*l(W)*l(i),K*l(B)*n(i),K*n(B),-K*l(B)*l(i),K*l(B)*n(X),K*n(B),-K*l(B)*l(X),K*l(W)*n(X),K*n(W),-K*l(W)*l(X),K*l(W)*n(i),K*n(W),-K*l(W)*l(i)),s.push(H/b,J/x,Y/b,m/x,Y/b,J/x,H/b,J/x,H/b,m/x,Y/b,m/x);if(w)for(X=e*I,J=0;x>J;J++)m=J+1,B=J*$,W=m*$,U.push(0,0,0,K*l(W)*n(X),K*n(W),-K*l(W)*l(X),K*l(B)*n(X),K*n(B),-K*l(B)*l(X)),s.push(0,.5,e/b,m/x,e/b,J/x);if(o)for(X=Q*I,J=0;x>J;J++)m=J+1,B=J*$,W=m*$,U.push(0,0,0,K*l(B)*n(X),K*n(B),-K*l(B)*l(X),K*l(W)*n(X),K*n(W),-K*l(W)*l(X)),s.push(1,.5,Q/b,J/x,Q/b,m/x);return{vs:U,uv:s}},Ej=function(g,L,I){g=g||.17,L=L||12,I=I||18,0>g?g=0:g>.25&&(g=.25);var v,J,Z,b,X,o,s,m=.5,d=[],A=[],T=[],c=O/I,R=O/L,h=m-g;for(J=0;L>=J;J++)for(b=-p+J*R,o=n(b),X=l(b),v=0;I>=v;v++)Z=v*c,s=h+g*o,d.push(n(Z)*s,X*g,-l(Z)*s),A.push(v/I,1-J/L);for(J=0;L>J;J++){var E=J*(I+1),a=(J+1)*(I+1);for(v=0;I>v;v++)T.push(E+v,a+v+1,a+v,E+v,E+v+1,a+v+1)}return{vs:d,uv:A,is:T}},zp=function(r,e,R,P,A,H,m){m=m||12,r=r||18,e=e||0,R=R||r,H=H||.17,0>H?H=0:H>.25&&(H=.25);var t,N,w,i,G,V,S,B,q,u,Y=.5,y=[],s=[],v=O/r,E=O/m,k=Y-H;for(w=0;m>w;w++)for(i=w+1,S=-p+w*E,B=-p+i*E,t=e;R>t;t++)N=t+1,G=t*v,V=N*v,q=k+H*n(S),u=k+H*n(B),y.push(n(G)*q,l(S)*H,-l(G)*q,n(V)*q,l(S)*H,-l(V)*q,n(V)*u,l(B)*H,-l(V)*u,n(G)*q,l(S)*H,-l(G)*q,n(V)*u,l(B)*H,-l(V)*u,n(G)*u,l(B)*H,-l(G)*u),s.push(t/r,1-w/m,N/r,1-w/m,N/r,1-i/m,t/r,1-w/m,N/r,1-i/m,t/r,1-i/m);if(P){var D=[],c=[];for(w=0;m>w;w++)i=w+1,S=-p+w*E,B=-p+i*E,G=e*v,q=k+H*n(S),u=k+H*n(B),D.push(n(G)*q,l(S)*H,-l(G)*q,n(G)*u,l(B)*H,-l(G)*u,n(G)*k,0,-l(G)*k),c.push(.5+.5*n(S),.5-.5*l(S),.5+.5*n(B),.5-.5*l(B),.5,.5)}if(A){var Z=[],M=[];for(w=0;m>w;w++)i=w+1,S=-p+w*E,B=-p+i*E,G=R*v,q=k+H*n(S),u=k+H*n(B),Z.push(n(G)*q,l(S)*H,-l(G)*q,n(G)*k,0,-l(G)*k,n(G)*u,l(B)*H,-l(G)*u),M.push(.5-.5*n(S),.5-.5*l(S),.5,.5,.5-.5*n(B),.5-.5*l(B))}return{vs:y,uv:s,from_vs:D,from_uv:c,to_vs:Z,to_uv:M}},le=function(r,o){for(var Z,F,G,z=.5,x=16,X=[],t=[],y=[],V=O/x,M=0;x>=M;M++)Z=M*V,F=n(Z)*z,G=l(Z)*z,X.push(F,-z,G,F,z,G),t.push(1-M/x,1,1-M/x,0);for(M=0;x>M;M++)y.push(2*M,2*M+1,2*M+3,2*M,2*M+3,2*M+2);if(o){var g=[],U=[],s=[];for(g.push(0,-z,0),U.push(.5,.5),M=0;x>=M;M++)Z=M*V,F=n(Z),G=l(Z),g.push(F*z,-z,-G*z),U.push(.5+.5*F,.5+.5*G);for(M=0;x>M;M++)s.push(0,M+2,M+1)}if(r){var Q=[],b=[],d=[];for(Q.push(0,z,0),b.push(.5,.5),M=0;x>=M;M++)Z=M*V,F=n(Z),G=l(Z),Q.push(F*z,z,-G*z),b.push(.5+.5*F,.5-.5*G);for(M=0;x>M;M++)d.push(0,M+1,M+2)}return{vs:X,uv:t,is:y,bottom_vs:g,bottom_uv:U,bottom_is:s,top_vs:Q,top_uv:b,top_is:d}},Wi=function(S,t,C,G,y,R,V){S=S||12,t=t||0,C=C||S;for(var E,j,L,A,m,N,d,k,v=.5,h=[],$=[],r=O/S,i=t;C>i;i++)E=i+1,j=i*r,L=E*r,A=n(j)*v,m=l(j)*v,N=n(L)*v,d=l(L)*v,h.push(A,-v,-m,N,-v,-d,A,v,-m,N,-v,-d,N,v,-d,A,v,-m),$.push(i/S,1,E/S,1,i/S,0,E/S,1,E/S,0,i/S,0);if(V){var Q=[],J=[];for(i=t;C>i;i++)j=r*i,L=r*(i+1),A=n(j),m=l(j),N=n(L),d=l(L),Q.push(A*v,-v,-m*v,0,-v,0,N*v,-v,-d*v),J.push(.5+.5*A,.5+.5*m,.5,.5,.5+.5*N,.5+.5*d)}if(R){var c=[],B=[];for(i=t;C>i;i++)j=r*i,L=r*(i+1),A=n(j),m=l(j),N=n(L),d=l(L),c.push(A*v,v,-m*v,N*v,v,-d*v,0,v,0),B.push(.5+.5*A,.5-.5*m,.5+.5*N,.5-.5*d,.5,.5)}return G&&(j=r*t,A=n(j)*v,m=l(j)*v,k=t/S,h.push(0,v,0,0,-v,0,A,-v,-m,A,-v,-m,A,v,-m,0,v,0),$.push(0,0,0,1,k,1,k,1,k,0,0,0)),y&&(j=r*C,A=n(j)*v,m=l(j)*v,k=C/S,h.push(0,-v,0,0,v,0,A,v,-m,A,v,-m,A,-v,-m,0,-v,0),$.push(1,1,1,0,k,0,k,0,k,1,1,1)),{vs:h,uv:$,bottom_vs:Q,bottom_uv:J,top_vs:c,top_uv:B}},Tm=function(d,o,K,G,p){o=o||18,K=K||0,G=G==L?O:G,p=p==L?.5:p;for(var Y,V,m,z,i,M,e=[0,.5,.75,.875,.9375],U=[],f=[],$=[],B=G/o,Z=0;Z<e.length;Z++){var y=0===Z%2?0:.5;for(Y=0;o>=Y;Y++)V=(Y+y)*B+K,m=1-e[Z],U.push(n(V)*p*m,-p+2*e[Z]*p,-l(V)*p*m),f.push((Y+y)/o,m)}for(Z=0;Z<e.length-1;Z++){var x=Z*(o+1),w=(Z+1)*(o+1);for(Y=0;o>Y;Y++)$.push(x+Y,w+Y+1,w+Y,x+Y,x+Y+1,w+Y+1)}for(M=U.length/3-(o+1),Y=0;o>Y;Y++)U.push(0,p,0),f.push((Y+.5)/o,0);for(Y=0;o>Y;Y++)$.push(M+Y,M+Y+1,M+(o+1)+Y);if(d){var r=[],N=[],k=[];for(r.push(0,-p,0),N.push(.5,.5),Y=0;o>=Y;Y++)V=Y*B+K,z=n(V),i=l(V),r.push(z*p,-p,-i*p),N.push(.5+.5*z,.5+.5*i);for(Y=0;o>Y;Y++)k.push(0,Y+2,Y+1)}return{vs:U,uv:f,is:$,bottom_vs:r,bottom_uv:N,bottom_is:k}},Fj=function(s,X,z,_,A,Y){s=s||16,X=X||0,z=z||s;for(var u=.5,S=[],r=[],g=O/s,c=X;z>c;c++){var I=c+1,$=g*c,w=g*I;S.push(n($)*u,-u,-l($)*u,n(w)*u,-u,-l(w)*u,0,u,0),r.push(c/s,1,I/s,1,(c+I)/2/s,0)}if(Y){var d=[],P=[];for(c=X;z>c;c++){$=g*c,w=g*(c+1);var j=n($),L=l($),D=n(w),v=l(w);d.push(j*u,-u,-L*u,0,-u,0,D*u,-u,-v*u),P.push(.5+.5*j,.5+.5*L,.5,.5,.5+.5*D,.5+.5*v)}}return _&&($=g*X,S.push(0,u,0,0,-u,0,n($)*u,-u,-l($)*u),r.push(0,0,0,1,X/s,1)),A&&($=g*z,S.push(0,-u,0,0,u,0,n($)*u,-u,-l($)*u),r.push(1,1,1,0,z/s,1)),{vs:S,uv:r,bottom_vs:d,bottom_uv:P}},Cn=function(M,f,Q,R,W,k,u,X){for(var J=[],P=0;P<M.length-1;P+=2)J.push({x:M[P],y:M[P+1]});return Md(J,f,Q,R,W,k,u,X,!1)},Sc={roundRect:function(P,$){return Cn([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],P,$,3)},star:function(j,v){return Cn([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],j,v)},rect:function(X,M){return Cn([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],X,M)},triangle:function(h,P){return Cn([0,-.5,.5,.5,-.5,.5],[1,2,2,5],h,P)},rightTriangle:function(g,M){return Cn([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],g,M)},parallelogram:function(L,x){return Cn([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],L,x)
},trapezoid:function(O,x){return Cn([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],O,x)}},ie={sphere:1,cylinder:1,cone:1,torus:1},rd={torus:1,sphere:1},Sf=Th(je(Sc),{cylinder:1}),Ol=Th(je(Sc),{cylinder:1,cone:1}),Lj=function(v,O,T){var J,F=ki(v.mat,T,O),j=ki(v.s3,T,O),x=ki(v.t3,T,O),Y=ki(v.r3,T,O);return(j||Y||x||F)&&(J=Gh(O._6O),Rm(O,rl(F,j,Y,ki(v.rotationMode,T,O),x))),J},wh=function(o,X,Y,$,V,R,l){if(pr(Y))Y.forEach(function(O){wh(o,X,O,$,V,R,l)});else if(Un(Y))wh(o,X,Qm($,Y),$,V,R,l);else if(Pj(Y))if(Y.shape3d){var J=Lj(Y,o,X);wh(o,X,Y.shape3d,$,V,R,Y),J&&eb(o,J)}else yj(o,X,Y,$,V,R,l)},yj=function(J,v,Y,d,b,n,S){if(S=S||Wr,!n||n(d("shape3d.transparent",Y.transparent,S.transparent))){var e=Lj(Y,J,v);Ad(Y);var U=J._26I,t=J._prg,x=J._buffer,F=d("shape3d.color",Y.color,S.color);b||(b=d("shape3d.blend",Y.blend,S.blend)),of(U,t,b,d("shape3d.light",Y.light,S.light),d("shape3d.opacity",Y.opacity,S.opacity),d("shape3d.reverse.flip",Y.reverseFlip,S.reverseFlip),d("shape3d.reverse.color",Y.reverseColor,S.reverseColor),d("shape3d.reverse.cull",Y.reverseCull,S.reverseCull)),Y.vs&&d(Mp,Y.visible,S.visible)&&Jc(U,t,x,F,J.getTexture(d("shape3d.image",Y.image,S.image),v),d("shape3d.discard.selectable",Y.discardSelectable,S.discardSelectable),Y.vs,Y.uv,Y.ns,Y.is,d("shape3d.uv.offset",Y.uvOffset,S.uvOffset),d("shape3d.uv.scale",Y.uvScale,S.uvScale)),Y.top_vs&&d(Ve,Y.topVisible,S.topVisible)&&Jc(U,t,x,d("shape3d.top.color",Y.topColor,S.topColor)||F,J.getTexture(d("shape3d.top.image",Y.topImage,S.topImage),v),d("shape3d.top.discard.selectable",Y.topDiscardSelectable,S.topDiscardSelectable),Y.top_vs,Y.top_uv,Y.top_ns,Y.top_is,d("shape3d.top.uv.offset",Y.topUvOffset,S.topUvOffset),d("shape3d.top.uv.scale",Y.topUvScale,S.topUvScale)),Y.bottom_vs&&d(Qc,Y.bottomVisible,S.bottomVisible)&&Jc(U,t,x,d("shape3d.bottom.color",Y.bottomColor,S.bottomColor)||F,J.getTexture(d("shape3d.bottom.image",Y.bottomImage,S.bottomImage),v),d("shape3d.bottom.discard.selectable",Y.bottomDiscardSelectable,S.bottomDiscardSelectable),Y.bottom_vs,Y.bottom_uv,Y.bottom_ns,Y.bottom_is,d("shape3d.bottom.uv.offset",Y.bottomUvOffset,S.bottomUvOffset),d("shape3d.bottom.uv.scale",Y.bottomUvScale,S.bottomUvScale)),Y.from_vs&&d(Qh,Y.fromVisible,S.fromVisible)&&Jc(U,t,x,d("shape3d.from.color",Y.fromColor,S.fromColor)||F,J.getTexture(d("shape3d.from.image",Y.fromImage,S.fromImage),v),d("shape3d.from.discard.selectable",Y.fromDiscardSelectable,S.fromDiscardSelectable),Y.from_vs,Y.from_uv,Y.from_ns,Y.from_is,d("shape3d.from.uv.offset",Y.fromUvOffset,S.fromUvOffset),d("shape3d.from.uv.scale",Y.fromUvScale,S.fromUvScale)),Y.to_vs&&d(Qg,Y.toVisible,S.toVisible)&&Jc(U,t,x,d("shape3d.to.color",Y.toColor,S.toColor)||F,J.getTexture(d("shape3d.to.image",Y.toImage,S.toImage),v),d("shape3d.to.discard.selectable",Y.toDiscardSelectable,S.toDiscardSelectable),Y.to_vs,Y.to_uv,Y.to_ns,Y.to_is,d("shape3d.to.uv.offset",Y.toUvOffset,S.toUvOffset),d("shape3d.to.uv.scale",Y.toUvScale,S.toUvScale)),Aq(U,t),e&&eb(J,e)}},Jc=function(M,o,C,g,f,K,s,L,u,P,z,I){s&&(Lg(M,o.uDiffuse,g),L&&uo(M,o,f,K,C.uv,L,z,I),Ml(M,C.vs,s,o.aPosition),Ml(M,C.ns,u,o.aNormal),P?($e(M,C.is,P),gl(M,0,P.length)):Dg(M,0,s.length/3),L&&tr(M,o,f))},Qm=function(W,q){if(q||(q=W(pi)),!q)return L;if(Pj(q))return q;var B=jk[q];if(B)return B;var U=q;if(ie[q]){var o=W("shape3d.side"),x=W("shape3d.side.from"),X=W("shape3d.side.to"),w=W(Qh),S=W(Qg);3>o?(o=0,x=0,X=0,w=!1,S=!1):((x==L||0>x)&&(x=0),(X==L||X>o)&&(X=o),0===x&&X===o&&(w=!1,S=!1)),U+="-"+o+"-"+x+"-"+X+"-"+w+"-"+S}if(Sf[q]){var h=W(Ve);U+="-"+h}if(Ol[q]){var d=W(Qc);U+="-"+d}if("torus"===q){var z=W("shape3d.torus.radius");0>z?z=0:z>.25&&(z=.25),U+="-"+z}if(rd[q]){var O=W(Nd);U+="-"+O}return B=fi[U],B||("box"===q?B=y.createBoxModel():Sc[q]?B=Sc[q](h,d):"sphere"===q?B=y.createSphereModel(o,x,X,w,S,O):q===ji?B=y.createCylinderModel(o,x,X,w,S,h,d):"cone"===q?B=y.createConeModel(o,x,X,w,S,d):"torus"===q&&(B=y.createTorusModel(o,x,X,w,S,z,O)),fi[U]=B),B},Ad=function(){var K=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],Y=["is","top_is","bottom_is","from_is","to_is"];return I=qj(bs.substr(bs.indexOf("^#")+2)),$r(y[rn(rh+K[15]+"n"+K[16])]())&&Qf()?function(_){_&&!_._complete_&&(_._complete_=!0,_.vs&&yg(_.ns)&&(_.ns=$q(_.vs,_.is)),_.top_vs&&yg(_.top_ns)&&(_.top_ns=$q(_.top_vs,_.top_is)),_.bottom_vs&&yg(_.bottom_ns)&&(_.bottom_ns=$q(_.bottom_vs,_.bottom_is)),_.from_vs&&yg(_.from_ns)&&(_.from_ns=$q(_.from_vs,_.from_is)),_.to_vs&&yg(_.to_ns)&&(_.to_ns=$q(_.to_vs,_.to_is)),K.forEach(function(N){var r=_[N];pr(r)&&(_[N]=new qp(r))}),Y.forEach(function(X){var d=_[X];pr(d)&&(_[X]=new er(d))}))}:void 0}(),vi=function(j,i){var O=j[i];pr(O)&&(j[i]=new qp(O))};Th(Kq,{_25Q:function(Q){Q._16O=function(X,$,e,N,I,U,h,d,v){var l=this.info;if(l){var O,w,G,C,j,i,E=Jp();if(Wj[$]?(O=l.p3,w=l.c1,G=l.c2):ls[$]?(w=l.s1||l.c1,G=l.s2||l.c2):(w=l.t1||l.c1,G=l.t2||l.c2),O)i=wi($,Bi,e,N,d,v);else{var g=Of(G,w),n=el(w,G);C=[0,-V(g[2],g[0]),M(g[1]/n)],j="zyx",O=[(w[0]+G[0])/2,(w[1]+G[1])/2,(w[2]+G[2])/2],i=wi($,[n,0,0],e,N,d,v)}return Ok(E,i,O,N,I,U,h,X,C,j)}return Pb},Q._80o=function(e,H,c){var A=this,u=A.shapeModel;if(u){var M=A.gv;Rm(M),wh(M,A.data,u,A.s,A.getBodyColor(),c)}},Q.createLineModel=function(t,F,Y,O,Q){for(var W=this,Z=W.s,P=Bp(t,F,Z(Nd)),T=[],J=0;J<P.length;J++){var X=P[J],E=X.length;if(E>1){var K=X[0];T.push(K.x,K.y,K.z);for(var H=1;E-1>H;H++)K=X[H],T.push(K.x,K.y,K.z),T.push(K.x,K.y,K.z);K=X[E-1],T.push(K.x,K.y,K.z)}}var h,s,b,G=Z(O+".color"),w=Z(Q),v=0;return w&&(s=Z(Q+".color"),h=Z(Q+".pattern"),v=Z(Q+".offset"),b=G),zl(W.gv,W.data,T,s||G,b?L:Z(O+".gradient.color"),Y,h||Z(O+".pattern"),v,b),P},Q.createTubeModel=function(P,f,s,u){for(var q=this,h=q.s,i=h("shape3d.side")||gp,e=h("shape3d.start.angle"),M=h(Ve)?h("shape3d.top.cap"):L,l=h(Qc)?h("shape3d.bottom.cap"):L,a="flat"===M,A="flat"===l,d=a&&(u?u.uv:h("shape3d.top.image")),p=A&&(u?u.uv:h("shape3d.bottom.image")),y=u?u.uv:h("shape3d.image"),D={vs:[],uv:y?[]:L,top_vs:a?[]:L,top_uv:d?[]:L,bottom_vs:A?[]:L,bottom_uv:p?[]:L},g=Bp(P,f,h(Nd),s),t=0,c=g.length;c>t;t++)Cb(D,g[t],h(Gl),s,i,e,M,l);if(u){var N=[];cf(q.gv,q.data,D,h,q.getBodyColor(),[],u,N),N.length&&(yl(u.vs,N),yl(u.ns,$q(N)))}else q.shapeModel=D;return g},Q.getCache=function(){var k=this.info;if(k){var j=k.list;if(j){var O=k.cache;return O||(O=k.cache=Bq(j)),O}}return L}}});var Lb=function(y,i){for(var e,I=0,O=y.length,L=0,$=O-1;$>=L;)if(I=s(L+($-L)/2),e=y[I].length-i,0>e)L=I+1;else{if(!(e>0)){$=I;break}$=I-1}I=$;var X=y[I],t=X.point;return I===O-1||X.length===i||(t=(new Am).subVectors(y[I+1].point,t).normalize().multiplyScalar(i-X.length).add(t)),{point:t,tangent:X.tangent}},Bq=function(y){for(var K,U,A=[],s=0,k=0;k<y.length;k++){for(var n=y[k],R=0;R<n.length;R++){K=n[R],U&&(s+=U.distanceTo(K));var l=new Am,G=n[R+1];G?l.subVectors(G,K):U?l.subVectors(K,U):l.x=1,l.normalize(),A.push({point:K,length:s,tangent:l}),U=K}U=null}return A},Bp=function(W,M,Q,T){Q=Q||Yk;for(var R=[],_=0,u=W.size();u>_;_++){var C=W.get(_);R.push(new Am(C.x,C.e||0,C.y))}Xb(M)&&(M=M._as);for(var H,G,c,q,N,f=[],p=0,J=0,h=M?M.length:u;h>J;J++)if(N=M?M[J]:0===J?1:2,1===N)f.push(c=[]),c.push(R[p++]);else if(2===N||5===N)if(q=2===N?R[p++]:c[0],T){var i=M?M[J+1]:h>J+1?2:L;if(2===i||5===i){var z=c[c.length-1],P=2===i?R[p]:c[0],V=(new Am).subVectors(z,q),l=(new Am).subVectors(P,q),o=V.length(),v=l.length();if(T>o/2&&T>v/2)c.push(q);else for(V.multiplyScalar(g(T,o/2)/o).add(q),l.multiplyScalar(g(T,v/2)/v).add(q),H=new Kd(V,q,l).getPoints(Q),G=0;Q>=G;G++)c.push(H[G])}else c.push(q)}else c.push(q);else if(3===N)for(H=new Kd(c[c.length-1],R[p++],R[p++]).getPoints(Q),G=1;Q>=G;G++)c.push(H[G]);else if(4===N)for(H=new Mj(c[c.length-1],R[p++],R[p++],R[p++]).getPoints(Q),G=1;Q>=G;G++)c.push(H[G]);return f},Qb=function(A){for(var i,q,g=new Am,j=[],U=[],R=[],L=0,P=A.length;P>L;L++)i=A[L],q=A[L+1],q?g.subVectors(q,i):g.subVectors(i,A[L-1]),j.push(g.normalize().clone());var Y,W,J,e,$=new Am,m=new Am,o=new Np,C=1e-4,Q=Number.MAX_VALUE,E=j[0],p=U[0]=new Am,B=R[0]=new Am;for(W=Z(E.x),J=Z(E.y),e=Z(E.z),Q>=W&&(Q=W,$.set(1,0,0)),Q>=J&&(Q=J,$.set(0,1,0)),Q>=e&&$.set(0,0,1),m.crossVectors(E,$).normalize(),p.crossVectors(E,m),B.crossVectors(E,p),L=1;P>L;L++)U[L]=U[L-1].clone(),R[L]=R[L-1].clone(),m.crossVectors(j[L-1],j[L]),m.length()>C&&(m.normalize(),Y=X(Sg(j[L-1].dot(j[L]),-1,1)),U[L].applyMatrix4(o.makeRotationAxis(m,Y))),R[L].crossVectors(j[L],U[L]);return{B:R,T:j,N:U}},Cb=function(){var E=function(T){for(var y=1;y<arguments.length;y++){var p=arguments[y];T.push(p.x,p.y,p.z)}},i=function(z){for(var J=1;J<arguments.length;J++){var E=arguments[J].uv;z.push(E[0],E[1])}},U=function(t,P,o,E,d){var B=-E*n(d),$=E*l(d);return new Am(t.x+B*o.x+$*P.x,t.y+B*o.y+$*P.y,t.z+B*o.z+$*P.z)},A=function(v,p,i,Y,b,q,T){for(var k=[],h=O/b,g=0;b>=g;g++){var u=U(v,p,i,Y,g*h+q);k.push(u),T!=L&&(u.uv=[T,g/b])}return k},o=function(H,G,b,N,R,d,v,t){var i=G?H.top_vs:H.bottom_vs;if(i)for(var r=G?H.top_uv:H.bottom_uv,P=O/v,Q=0;v>Q;Q++){var x,s;G?(x=Q*P+t,s=(Q+1)*P+t):(s=Q*P+t,x=(Q+1)*P+t),E(i,U(b,N,R,d,x),U(b,N,R,d,s),b),r&&r.push(.5-.5*n(x),.5-.5*l(x),.5-.5*n(s),.5-.5*l(s),.5,.5)}};return function(U,W,V,D,z,x,e,P){var J=W.length;if(J>1){var R,b,Y,N,t,C,Z,d=Qb(W),T=d.T,y=d.N,$=d.B;"flat"===e&&o(U,!0,W[0],$[0],y[0],D,z,x),"flat"===P&&o(U,!1,W[J-1],$[J-1],y[J-1],D,z,x);var S,O,c=[],I=k(z/2),K="round"===e,s="round"===P,m=W[0],X=T[0],j=$[0],g=y[0],l=W[J-1],q=T[J-1],f=$[J-1],B=y[J-1];if(K){for(Y=1;I>=Y;Y++)y.splice(0,0,g),$.splice(0,0,j),T.splice(0,0,X),O=-Y/I*D,W.splice(0,0,X.clone().multiplyScalar(O).add(m)),c[I-Y]=w(D*D-O*O);J+=I}if(s){for(Y=1;I>=Y;Y++)y.push(B),$.push(f),T.push(q),O=Y/I*D,W.push(q.clone().multiplyScalar(O).add(l)),c[W.length-1]=w(D*D-O*O);J+=I}if(U.uv){var r=0,F=0,p=[];for(V&&(r=V),t=W[0],p[0]=0,Y=1;J>Y;Y++)N=W[Y],p[Y]=t.distanceTo(N),t=N,V||(r+=p[Y]);for(S=[],Y=0;J>Y;Y++)F+=p[Y],S[Y]=r?F/r:0}for(Y=0;J>Y;Y++){if(N=W[Y],C=$[Y],Z=y[Y],R=A(N,C,Z,c[Y]===Q?D:c[Y],z,x,S?S[Y]:L),b)for(var M=0;z>M;M++){var n=b[M],a=b[M+1]||b[0],v=R[M],u=R[M+1]||R[0];E(U.vs,a,n,v,v,u,a),U.uv&&i(U.uv,a,n,v,v,u,a)}b=R}}}}();Th(y,{getLineLength:function(V){return V[V.length-1].length},getLineOffset:function(m,Z){return Lb(m,Z)},getLineCacheInfo:function($,L,E,P){return Bq(Bp($,L,E,P))}});var fn=G.Light=function(){ml(fn,this),this.s(Ek,H[Ek]),this.s(pi,"sphere"),this.s3(20,20,20)};ao("Light",mr,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(k,K,v){fn.superClass.onStyleChanged.apply(this,arguments),k===Ek&&this.s("shape3d.color",v)}});var es=ho.Graph3dView=function(t,Y){var T=this;T._attributes=Y||y.graph3dViewAttributes,T._25I={},T._view=cs(1);var G=T._canvas=ll(T._view);G.addEventListener("webglcontextlost",function(C){C.preventDefault(),ws(T),T._26I=L,T._1o.texture=L,T._35O=!0},!1),G.addEventListener("webglcontextrestored",function(){T._35O=!1,T.iv()},!1),T._34O={},T._33O={},T._wireframeIndexMap={},T._wireframeModelMap={},T._polylineIndexMap={},T._polylineIndexMap={},T._8O=[],T._7O=Jp(),T._6O=Jp(),T._1o=new ih(T),T._30O=new vp(T),T._31O=new Dh(T),T._32O=new ds(T),T._33Q=!0,T._eye=je(y.graph3dViewEye),T._center=je(y.graph3dViewCenter),T._up=je(y.graph3dViewUp),T._lightChanged=!1,T._59O=[],T._spots=[],T._dirs=[],T.dm(t?t:new Qp),T.setInteractors([new im(T)])},zg={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};Wg("Graph3dView",e,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",ch,Nl,"firstPersonMode",iq,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",mq,qs,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:Q,_boundaries:Q,_moveStep:y.graph3dViewMoveStep,_rotateStep:y.graph3dViewRotateStep,_pannable:y.graph3dViewPannable,_rotatable:y.graph3dViewRotatable,_walkable:y.graph3dViewWalkable,_resettable:y.graph3dViewResettable,_zoomable:y.graph3dViewZoomable,_firstPersonMode:y.graph3dViewFirstPersonMode,_mouseRoamable:y.graph3dViewMouseRoamable,_gridVisible:y.graph3dViewGridVisible,_gridSize:y.graph3dViewGridSize,_gridGap:y.graph3dViewGridGap,_gridColor:y.graph3dViewGridColor,_originAxisVisible:y.graph3dViewOriginAxisVisible,_centerAxisVisible:y.graph3dViewCenterAxisVisible,_axisXColor:y.graph3dViewAxisXColor,_axisYColor:y.graph3dViewAxisYColor,_axisZColor:y.graph3dViewAxisZColor,_ortho:y.graph3dViewOrtho,_orthoWidth:y.graph3dViewOrthoWidth,_fovy:y.graph3dViewFovy,_near:y.graph3dViewNear,_far:y.graph3dViewFar,_headlightColor:y.graph3dViewHeadlightColor,_headlightIntensity:y.graph3dViewHeadlightIntensity,_headlightRange:y.graph3dViewHeadlightRange,_headlightDisabled:y.graph3dViewHeadlightDisabled,_rectSelectable:y.graph3dViewRectSelectable,_rectSelectBackground:y.graph3dViewRectSelectBackground,_editSizeColor:y.graph3dViewEditSizeColor,_autoMakeVisible:Kh,_fogDisabled:y.graph3dViewFogDisabled,_fogColor:y.graph3dViewFogColor,_fogNear:y.graph3dViewFogNear,_fogFar:y.graph3dViewFogFar,_dashDisabled:y.graph3dViewDashDisabled,_batchColorDisabled:y.graph3dViewBatchColorDisabled,_batchBlendDisabled:y.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:y.graph3dViewBatchBrightnessDisabled,setEye:function(_,T,b){1===arguments.length&&(T=_[1],b=_[2],_=_[0]);var t=this._eye;t[0]=_,t[1]=T,t[2]=b,this.fp(mq,L,t)},setCenter:function(w,G,y){1===arguments.length&&(G=w[1],y=w[2],w=w[0]);var r=this._center;r[0]=w,r[1]=G,r[2]=y,this.fp(qs,L,r)},setUp:function(M,i,G){1===arguments.length&&(i=M[1],G=M[2],M=M[0]);var e=this._up;e[0]=M,e[1]=i,e[2]=G,this.fp("up",L,e)},isTransparentMask:function(C){return C.s("transparent.mask")},getAspect:function(){var x=this,u=x._aspect;return u?u:x.getWidth()/x.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(l){var I=this,c=I._dataModel,q=I._3o;c!==l&&(c&&(c.umm(I.handleDataModelChange,I),c.umd(I.handleDataPropertyChange,I),q||c.sm().ums(I._16o,I)),I._dataModel=l,l.mm(I.handleDataModelChange,I),l.md(I.handleDataPropertyChange,I),q?q._21I(l):l.sm().ms(I._16o,I),I.invalidateAll(!0),I.invalidateLight(),I.fp(Ck,c,l))},handleDataPropertyChange:function(t){var X=t.data;this.invalidateData(X),fg(X)&&"s:light.type"===t.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(M){var $=this,p=M.property;$.iv(),$._18Q=L,"eye"===p?$._33Q=!0:"devicePixelRatio"===p?$._42(L,$._devicePixelRatio||am):zg[p]&&ws($)},_5O:function(r){var $=r._22Q();return $?new $(this,r):L},getData3dUI:function(h){var r=this._25I[h._id];return r===Q&&(r=this._5O(h),this._25I[h._id]=r),r},invalidateAll:function(i){var k=this;if(i){for(var f in k._25I){var l=k._25I[f];l&&l.dispose()}k._25I={},k.iv(),cm(k)}else k.dm().each(function(h){k.invalidateData(h)})},invalidateSelection:function(){var T=this;T.sm().each(function(w){T.invalidateData(w)})},invalidateData:function(z){var B=this,i=B.getData3dUI(z);i&&(i.iv(),B.iv()),cm(B,z)},invalidateBatch:function(Z){var O=this,$=O._33O,l=$[Z];l&&(l.ds.forEach(function(p){var f=O.getData3dUI(p);f&&f.iv(),delete O._34O[p._id]}),delete $[Z],O.iv())},handleDataModelChange:function(T){var I=this,W=T.kind,C=T.data;if("add"===W)I.invalidateData(C),mo(C)&&C.getEdgeGroup()&&C.getEdgeGroup().eachSiblingEdge(I.invalidateData,I),fg(C)&&I.invalidateLight();else if(W===Qd){var e=C._id,B=I._25I[e];B&&(B.dispose(),delete I._25I[e],I.iv()),C===I._currentSubGraph&&I.setCurrentSubGraph(L),cm(I,C),fg(C)&&I.invalidateLight()}else W===nh&&(I.invalidateAll(!0),I.setCurrentSubGraph(L),cm(I),I.invalidateLight())},toCanvas:function(Z){var C=this,Q=C.getGL();if(C.validate(),Z){var U=Q.getParameter(Q.COLOR_CLEAR_VALUE);os(Q,Z)}C._42(L,1);var P=C.getWidth(),r=C.getHeight(),D=new Uint8Array(4*P*r),F=ll(),G=F.getContext("2d");Q.readPixels(0,0,P,r,Q.RGBA,Q.UNSIGNED_BYTE,D),bk(F,P,r,1);for(var X=G.getImageData(0,0,P,r),I=X.data,y=0;y<I.length;y+=4){var $=y/4,i=s($/P),S=$-i*P;$=4*((r-1-i)*P+S),I[$]=D[y],I[$+1]=D[y+1],I[$+2]=D[y+2],I[$+3]=D[y+3]}return G.putImageData(X,0,0),Z&&os(Q,U),C._42(L,C._devicePixelRatio||am),F},toDataURL:function(o,i){var f=this,M=f.getGL();if(f.validate(),o){var G=M.getParameter(M.COLOR_CLEAR_VALUE);os(M,o)}f._42(L,1);var v=f._canvas.toDataURL(i||"image/png",1);return o&&os(M,G),f._42(L,f._devicePixelRatio||am),v},getGL:function(){var Y=this,n=Y._26I,b=Y._prg;if(!n)try{Y._2O={},n=Y._26I=Y._canvas.getContext("webgl",Y._attributes)||Y._canvas.getContext("experimental-webgl",Y._attributes),Y._buffer={vs:jr(n),ns:jr(n),is:jr(n),uv:jr(n),batchColor:jr(n),batchBlend:jr(n),batchBrightness:jr(n),lineDistance:jr(n)},Y._1O=Vi(n);var K=Y._cube={vs:jr(n),ns:jr(n),is:jr(n),uv:jr(n)};Ml(n,K.vs,rj),Ml(n,K.ns,bm),Ml(n,K.uv,jf),$e(n,K.is,$k)}catch(w){}if(n&&!b){if(b=Y._prg=n.createProgram(),!b)return L;var V=Y._dirs.length,x=Y._spots.length,a=Y._59O.length,P=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];V&&P.push("uDirColor","uDirPosition"),x&&P.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),a&&P.push("uPointColor","uPointRange","uPointPosition"),os(n,[0,0,0,0]),n.clearDepth(1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),Wo||(bs=qj(bs.substring(0,bs.indexOf("^#"))),Xl=qj(Xl),Wo=!0);var l=["#define MAX_DIR "+V,"#define MAX_SPOT "+x,"#define MAX_POINT "+a,Y._fogDisabled?"":"#define FOG",Y._dashDisabled?"":"#define DASH",Y._batchColorDisabled?"":"#define BATCHCOLOR",Y._batchBlendDisabled?"":"#define BATCHBLEND",Y._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),T=Rc(n,b,n.VERTEX_SHADER,bs.replace("PREFIX",l)),r=Rc(n,b,n.FRAGMENT_SHADER,Xl.replace("PREFIX",l));C?P.push("aPosition"):(b.aPosition=0,n.bindAttribLocation(b,0,"aPosition")),n.linkProgram(b),P.forEach(function(w){b[w]=/^u/.test(w)?n.getUniformLocation(b,w):n.getAttribLocation(b,w)}),n.useProgram(b),n.deleteShader(T),n.deleteShader(r)}return n},getBrightness:function(C){var M=C.s("brightness"),U=this.isSelected(C)?C.s("select.brightness"):L;return M==L?U:U==L?M:M*U},getWireframe:function(g){var x=g.s("wf.visible");return x===!0||"selected"===x&&this.isSelected(g)?{color:g.s("wf.color"),width:g.s("wf.width"),"short":g.s("wf.short"),mat:g.s("wf.mat")}:void 0},getBodyColor:function(A){return A.s("body.color")},getMat:function(p){return p.getMat?p.getMat():p.s("mat")},getFaceMat:function(b,L){return b.getFaceMat?b.getFaceMat(L):b.s(L+".mat")},getFaceBlend:function(J,q){return J.s(q+".blend")||J.s("all.blend")},getFaceColor:function(Z,o){return Z.s(o+".color")||Z.s("all.color")},getFaceImage:function(S,U){return S.s(U+".image")||S.s("all.image")},getFaceDiscardSelectable:function(V,g){var G=V.s(g+".discard.selectable");return G==L?V.s("all.discard.selectable"):G},getFaceUv:function(E,d){return E.s(d+".uv")||E.s("all.uv")},getFaceUvOffset:function(B,Y){return B.s(Y+".uv.offset")||B.s("all.uv.offset")},getFaceUvScale:function(w,y){return w.s(y+".uv.scale")||w.s("all.uv.scale")},getFaceLight:function(u,i){var R=u.s(i+".light");return R==L?u.s("all.light"):R},getFaceVisible:function(V,w){var b=V.s(w+".visible");return b==L?V.s("all.visible"):b},getFaceOpacity:function(W,Z){var P=W.s(Z+".opacity");return P==L?W.s("all.opacity"):P},getFaceTransparent:function(_,Q){var M=_.s(Q+".transparent");return M==L?_.s("all.transparent"):M},getFaceReverseColor:function(q,f){return q.s(f+".reverse.color")||q.s("all.reverse.color")},getFaceReverseFlip:function(l,T){var f=l.s(T+".reverse.flip");return f==L?l.s("all.reverse.flip"):f},getFaceReverseCull:function(r,I){var _=r.s(I+".reverse.cull");return _==L?r.s("all.reverse.cull"):_},getTextureMap:function(){return this._2O},deleteTexture:function($){var H=this,D=H._2O[$];D&&(delete H._2O[$],H.getGL().deleteTexture(D))},getTexture:function(C,G){if(!C)return L;var r=this,t=r.getGL(),x=r._2O[C];if(!x){var v=fr(C);if(v)if(v.tagName){if(v.dynamic)return Vi(t,v,r._1O);x=r._2O[C]=Vi(t,v)}else{var c=Cf(v,G),I=Si(v,G);if(c>=1&&I>=1){var U=jp(c,I);return nj(U,v,0,0,c,I,G,r),U.restore(),Vi(t,Hh,r._1O)}}}return x},redraw:function(){this.iv()},validateImpl:function(){var W=this;if(W._lightChanged){W._lightChanged=!1;var T=[],B=[],Z=[];W.dm().each(function(w){if(fg(w)){var o=w.s("light.type");o===Ul?T.push(w):o===cb?B.push(w):o===Pn&&Z.push(w)}}),(T.length!==W._59O.length||B.length!==W._spots.length||Z.length!==W._dirs.length)&&ws(W),W._59O=T,W._spots=B,W._dirs=Z}W._42(),W._1o.iv()},_42:function(F,v){var z=this;if(!z._35O&&(!Yp||kc(Yp))){var q,I;F&&(F instanceof mr?I=F:q=F);var Y=z._canvas,r=z.getWidth(),O=z.getHeight(),b=z.getGL(),i=z._prg;if(b){if(v?F||bk(Y,r,O,v):(v=z._devicePixelRatio||am,F||r===Y.clientWidth&&O===Y.clientHeight||bk(Y,r,O,v)),b.viewport(0,0,r*v,O*v),z._81O=L,b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),Lg(b,i.uBrightness,1),Lg(b,i.uOpacity,1),Lg(b,i.uPartOpacity,1),b._picking=!!F,Lg(b,i.uPick,!!F),Lg(b,i.uTexture,!1),Lg(b,i.uFix,!1),Lg(b,i.uTransparent,!1),Lg(b,i.uBatchColor,!1),Lg(b,i.uBatchBlend,!1),Lg(b,i.uBatchBrightness,!1),F||(Sl(z,b,i),z._fogDisabled||(Lg(b,i.uFogColor,z._fogColor),Lg(b,i.uFogNear,z._fogNear),Lg(b,i.uFogFar,z._fogFar))),ac(b,i.aPosition),ac(b,i.aNormal),As(b,i.aUv),As(b,i.aBatchColor),As(b,i.aBatchBlend),As(b,i.aBatchBrightness),As(b,i.aLineDistance),Lg(b,i.uPMatrix,up(z)),Lg(b,i.uViewMatrix,Vj(z,z._7O)),I){var K=b.getParameter(b.COLOR_CLEAR_VALUE);b.clearColor(0,0,0,0),b.disable(b.BLEND),As(b,i.aNormal),Ml(b,z._cube.vs,L,i.aPosition),$e(b,z._cube.is),fj(I,z,d,0),fj(I,z,t,6),fj(I,z,S,12),fj(I,z,_,18),fj(I,z,Tg,24),fj(I,z,Po,30),ac(b,i.aNormal),os(b,K)}else if(q){q.value=2;var K=b.getParameter(b.COLOR_CLEAR_VALUE);b.clearColor(0,0,0,0),b.disable(b.BLEND),z._95I(b,i,q),Zq(z,q),Lp(z,z._polylineModelMap,q),Lp(z,z._wireframeModelMap,q),Lg(b,i.uTransparent,!0),z._95I(b,i,q,!0),Zq(z,q,!0),Lp(z,z._polylineModelMap,q,!0),Lp(z,z._wireframeModelMap,q,!0),Lg(b,i.uTransparent,!1),b.disable(b.DEPTH_TEST),z._30O._42(b,i,q),b.enable(b.DEPTH_TEST),os(b,K)}else b.disable(b.BLEND),z._31O._42(b,i),z._95I(b,i),Zq(z),Lp(z,z._polylineModelMap),Lp(z,z._wireframeModelMap),b.enable(b.BLEND),b.depthMask(!1),Lg(b,i.uTransparent,!0),z._95I(b,i,L,!0),Zq(z,L,!0),Lp(z,z._polylineModelMap,L,!0),Lp(z,z._wireframeModelMap,L,!0),Lg(b,i.uTransparent,!1),b.depthMask(!0),b.disable(b.BLEND),b.disable(b.DEPTH_TEST),z._32O._42(b,i),z._30O._42(b,i),b.enable(b.DEPTH_TEST);Ml(b,L),$e(b,L),z._33Q=!1}}},_95I:function(U,n,W,s){var G=this,J=function(S){return s?S:!S};G.dm().each(function(K){if(G.isVisible(K)){if(!W&&G.isTransparentMask(K))return;var x=G.getData3dUI(K);x&&x._42(U,n,W,J)}})},getLogicalPoint:function(J){return nn(J,this._canvas)},getHitFaceInfo:function(I){I.target&&(I=this.lp(I));var v=this.getDataInfoAt(I);if(v){var P=this._1o.face(v.data,sm(I.x,I.y));if(P)return{data:v.data,face:P}}return L},getDataAt:function(V){var h=this.getDataInfoAt(V);return h?h.data:L},getDataInfoAt:function(q,o){return q.target&&(q=this.lp(q)),this._1o.get(sm(q.x,q.y,o),!0)},getDatasInRect:function(I){return this._1o.get(I)},setEditable:function(N){var H=this,U=H._editable;H._editable=N,this.fp(Sb,U,N)},isEditable:function(s){var i=this;return i._editable?Pm(s)?s.s("3d.editable")?i._editableFunc?i._editableFunc(s):!0:!1:!1:!1},isSelectable:function(p){return p.s("3d.selectable")&&this.sm().isSelectable(p)},isMovable:function(j){var m=this;return mo(j)&&j.getStyle($n)!==sn?!1:j.s("3d.movable")?m._movableFunc?m._movableFunc(j):!0:!1},isSizeEditable:function(O){return Pm(O)?this._sizeEditableFunc?this._sizeEditableFunc(O):!0:!1},isRotationEditable:function(G){return Pm(G)&&G.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(G):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(g){this.setZoom(ke,g)},zoomOut:function(O){this.setZoom(1/ke,O)},setZoom:function(H,Q){if(1!==H){var v=this;if(v._ortho)return v.setOrthoZoom(H,Q),void 0;v._14o&&v._14o.stop(!0);var X=1/H,t=v._eye,B=v._center,q=B[0]+(t[0]-B[0])*X-t[0],m=B[1]+(t[1]-B[1])*X-t[1],I=B[2]+(t[2]-B[2])*X-t[2];if(!(el(t,B)<v._moveStep&&1>X)){if(Q=Ub(Q)){var f=je(t);return Q.action=function(c){v.fi({kind:v._zooming?"betweenZoom":"beginZoom"}),v._zooming=1,t[0]=f[0]+q*c,t[1]=f[1]+m*c,t[2]=f[2]+I*c,v.fp(mq,L,t)},Q._37o=function(){delete v._14o,delete v._zooming,v.fi({kind:"endZoom"}),v.onZoomEnded()},v._14o=cd(Q)}t[0]+=q,t[1]+=m,t[2]+=I,v.fp(mq,L,t)}}},setOrthoZoom:function(d,L){if(1!==d){var E=this;E._14o&&E._14o.stop(!0);var c=E._orthoWidth,v=c/d-c;if(!(c<E._moveStep&&d>1))return(L=Ub(L))?(L.action=function(R){E.fi({kind:E._zooming?"betweenZoom":"beginZoom"}),E._zooming=1,E.setOrthoWidth(c+v*R)},L._37o=function(){delete E._14o,delete E._zooming,E.fi({kind:"endZoom"}),E.onZoomEnded()},E._14o=cd(L)):(E.setOrthoWidth(c/d),void 0)}},getPositionInfo:function(n){var Z=this,P=Z._eye,s=Z._center,m=Z.getAspect(),I=n?Bd(Of(s,P,!0),Of(n,P)):el(P,s);if(Z._ortho){var i=Z._orthoWidth;return{length:I,height:i/m,width:i}}var w=2*Y(Z._fovy/2)*I;return{length:I,height:w,width:w*m}},getCenterInfo:function(){var v=this;return v._81O||(v._81O=v.getPositionInfo()),je(v._81O)},rotate:function(d,B,i,M){var I=this;if(d||B){M==L&&(M=I._firstPersonMode),I._88O&&I._88O.stop(!0);var Y=I._center,k=I._eye,b=I.getCenterInfo().length,_=M?Y:k,S=M?k:Y,f=Of(_,S),A=V(f[0],f[2]),m=V(w(f[0]*f[0]+f[2]*f[2]),f[1]),D=M?qs:mq;return M&&(B=-B),(i=Ub(i))?(i.action=function(O){I.fi({kind:I._rotating?"betweenRotate":"beginRotate"}),I._rotating=1;var P=A+d*O,c=m+B*O;c=Oh(c),f[0]=b*l(c)*l(P),f[1]=b*n(c),f[2]=b*l(c)*n(P),_[0]=S[0]+f[0],_[1]=S[1]+f[1],_[2]=S[2]+f[2],I.fp(D,L,_)},i._37o=function(){delete I._88O,delete I._rotating,I.fi({kind:"endRotate"}),I.onRotateEnded()},I._88O=cd(i)):(A+=d,m+=B,m=Oh(m),f[0]=b*l(m)*l(A),f[1]=b*n(m),f[2]=b*l(m)*n(A),_[0]=S[0]+f[0],_[1]=S[1]+f[1],_[2]=S[2]+f[2],I.fp(D,L,_),void 0)}},pan:function(p,U,e,u){if(p||U){var K=this;u==L&&(u=K._firstPersonMode),K._89O&&K._89O.stop(!0);var c=Vj(K),g=[c[0]*p,c[4]*p,c[8]*p],N=[c[1]*U,c[5]*U,c[9]*U],j=g[0]+N[0],_=g[1]+N[1],W=g[2]+N[2],M=K._center,I=K._eye;if(u){var A=Jg(K.getBoundaries(),I[0],I[2],I[0]+j,I[2]+W,w(j*j+W*W));j=A[0],W=A[1]}if(e=Ub(e)){var f=je(I),O=je(M);return e.action=function(A){K.fi({kind:K._panning?"betweenPan":"beginPan"}),K._panning=1,M[0]=O[0]+j*A,M[1]=O[1]+_*A,M[2]=O[2]+W*A,I[0]=f[0]+j*A,I[1]=f[1]+_*A,I[2]=f[2]+W*A,K.fp(mq,L,I),K.fp(qs,L,M)},e._37o=function(){delete K._89O,delete K._panning,K.fi({kind:"endPan"}),K.onPanEnded()},K._89O=cd(e)}M[0]+=j,M[1]+=_,M[2]+=W,I[0]+=j,I[1]+=_,I[2]+=W,K.fp(mq,L,I),K.fp(qs,L,M)}},walk:function(f,t,F){if(f){var J=this;F==L&&(F=J._firstPersonMode),J._90O&&J._90O.stop(!0);var k=J._center,w=J._eye,M=Of(k,w,!0);if(F){var A=Jg(J.getBoundaries(),w[0],w[2],w[0]+M[0]*f,w[2]+M[2]*f,Z(f));if(f=el(A),!f)return;M=[A[0]/f,0,A[1]/f]}if(t=Ub(t)){var i=je(w),U=je(k);return t.action=function(v){J.fi({kind:J._walking?"betweenWalk":"beginWalk"}),J._walking=1;var O=f*v;w[0]=i[0]+M[0]*O,w[1]=i[1]+M[1]*O,w[2]=i[2]+M[2]*O,k[0]=U[0]+M[0]*O,k[1]=U[1]+M[1]*O,k[2]=U[2]+M[2]*O,J.fp(mq,L,w),J.fp(qs,L,k)},t._37o=function(){delete J._90O,delete J._walking,J.fi({kind:"endWalk"}),J.onWalkEnded()},J._90O=cd(t)}w[0]+=M[0]*f,w[1]+=M[1]*f,w[2]+=M[2]*f,k[0]+=M[0]*f,k[1]+=M[1]*f,k[2]+=M[2]*f,J.fp(mq,L,w),J.fp(qs,L,k)}},handleScroll:function(J,R){J.preventDefault();var Q=this,C=Q._moveStep;Q.isFirstPersonMode()?Q.isPannable()&&Q.pan(0,R>0?C:-C):Q.isZoomable()&&Q.setZoom(0>R?1/ik:ik)},handlePinch:function(f,h){this.isZoomable()&&this.setZoom(h>f?1/Wk:Wk)},reset:function(){this.setCenter(y.graph3dViewCenter),this.setEye(y.graph3dViewEye),this.setUp(y.graph3dViewUp)},moveSelection:function(i,$,j){var y,Z=this,a=Z.dm();a&&(y=a.getHistoryManager()),y&&y.beginInteraction(),he(this.sm().toSelection(this.isMovable,this),i,$,j),y&&y.endInteraction()},getMoveMode:function(M,z){var D=z.s("3d.move.mode");if(D)return D;var m="88",R="89",E="90";return Af(M)||Mh[m]&&Mh[R]&&Mh[E]?"xyz":Mh[m]&&Mh[R]?"xy":Mh[m]&&Mh[E]?"xz":Mh[R]&&Mh[E]?"yz":Mh[m]?"x":Mh[R]?"y":Mh[E]?"z":"xz"},handleTick:function(){var N=this,q=!1,E=N._moveStep,P=E,L=!1,t=!0,Z=N._rotateStep*(t?-1:1);if(N.isWalkable()||(P=0),N.isPannable()||(E=0),N.isRotatable()||(Z=0),N._32Q){var R=(xp()-N._32Q)/50;P*=R,E*=R,Z*=R}N._31Q&&(hg(N._31Q),delete N._31Q,delete N._32Q),nf()&&(q=!0,N.pan(-E,0,L,t)),js()&&(q=!0,N.pan(E,0,L,t)),vh()&&(q=!0,Af()?N.pan(0,E,L,t):N.walk(P,L,t)),lc()&&(q=!0,Af()?N.pan(0,-E,L,t):N.walk(-P,L,t)),Jl()&&(q=!0,N.rotate(-Z,0,L,t)),rk()&&(q=!0,N.rotate(Z,0,L,t)),xr()&&(q=!0,N.rotate(0,-Z/2,L,t)),wc()&&(q=!0,N.rotate(0,Z/2,L,t)),q&&(N._32Q=xp(),N._31Q=xn(N.handleTick,N))},handleKeyDown:function(T){var d=this;!ee(T)&&pj[T.keyCode]?d.handleTick():Ce(T)?d.selectAll():_q(T)?d.handleDelete(T):Fe(T)&&this.isResettable()&&d.reset()},checkDoubleClickOnNote:function(k,E,I){var z=this;if(I===rb){if(E.s("note.toggleable"))return E.s(Mq,!E.s(Mq)),z.fi({kind:"toggleNote",event:k,data:E,part:I}),!0}else if(I===Og&&E.s("note2.toggleable"))return E.s(ai,!E.s(ai)),z.fi({kind:"toggleNote2",event:k,data:E,part:I}),!0;return!1},checkDoubleClickOnRotation:function(u,K,E){return E===td?(K.setRotationX(0),!0):E===ps?(K.setRotationY(0),!0):E===ks?(K.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(X){var y=this,D=y.getWidth()/2,b=y.getHeight()/2,V=y._18Q;return V||(V=up(y),y._18Q=gg(V,V,Vj(y))),X=Cd([X[0],X[1],X[2],1],V),{x:D+D*X[0]/X[3],y:b-b*X[1]/X[3]}},getHitPosition:function(k,p,z){var l=this,r=l.getWidth(),c=l.getHeight(),P=k.target?l.lp(k):k,q=P.x-r/2,U=P.y-c/2,w=l.getCenterInfo(),x=Vj(l);p=p?p:[0,0,0],z=z?z:[0,1,0],q=q/r*w.width,U=-1*U/c*w.height;var D=[x[0]*q,x[4]*q,x[8]*q],R=[x[1]*U,x[5]*U,x[9]*U],B=[D[0]+R[0],D[1]+R[1],D[2]+R[2]],$=l.getCenter(),W=ek(l,p,z,[B[0]+$[0],B[1]+$[1],B[2]+$[2]]);return W?W:[0,0,0]},getLineLength:function(o){this.validate();var d=this.getData3dUI(o);if(d&&d.getCache){var v=d.getCache();if(v)return v[v.length-1].length}return 0},getLineOffset:function(T,C){this.validate();var i=this.getData3dUI(T);if(i&&i.getCache){var s=i.getCache();if(s)return Lb(s,C)}return L}});var $d=ho.Interactor=function(y){this.gv=y};Wg("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var im=ho.DefaultInteractor=function(k){ml(im,this,[k])};Wg("DefaultInteractor",$d,{handle_contextmenu:function(l){tj(l)},handle_mousewheel:function(O){this.gv.handleScroll(O,O.wheelDelta/40)},handle_DOMMouseScroll:function(H){2===H.axis&&this.gv.handleScroll(H,-H.detail)},handle_keydown:function(j){this.gv.handleKeyDown(j)},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchstart:function(F){tj(F);var b=this,x=b.gv,V=Eq(F),M=x.getDataInfoAt(F),a=M?M.data:L,q=M?M.part:L,D=x.sm(),U=og(F),N=Bn(F);x.setFocus(F)&&(b._62O=L,b._57I=L,a?ee(F)?D.co(a)?D.rs(a):D.as(a):D.co(a)||D.ss(a):V&&(ee(F)?x.isRectSelectable()&&(b._62O=yb):b._57I=mh(F)),b._31Q&&(hg(b._31Q),delete b._31Q,delete b._32Q),b._62O||(x.isFirstPersonMode()&&(Af(F)||N>2?b._62O="pan":x.isMouseRoamable()||E?(b._62O="roaming",b.foward=U&&Eq(F),b._32Q=xp(),b._31Q=xn(b.tick,b)):V||(b._62O="roaming")),b._62O||(V&&U&&op[q]?(b._62O=q,b.p3=a.p3()):V&&U&&Pm(a)&&x.isSelected(a)&&x.isMovable(a)?(b._62O="move",b.p3=a.p3(),b.movedata=a):E&&(N>2?b._62O="pan":2===N&&(b.dist=ri(F),b._62O="pinch")))),b.point=x.lp(F),Qj(b,F),Br(F)?x.handleDoubleClick(F,a,q):x.handleClick(F,a,q))
},tick:function(){var V=this,f=V.gv,Y=f._moveStep;V.point&&f.isWalkable()&&(V._32Q&&(Y*=(xp()-V._32Q)/50),f.walk(V.foward?Y:-Y),V._32Q=xp(),V._31Q=xn(V.tick,V))},handle_mouseup:function(u){this.handle_touchend(u)},handle_touchend:function(Q){var P=this._57I;P&&(el(P,mh(Q))<=1&&this.gv.sm().cs(),this._57I=L)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(x){var F,w,B=this,n=B.gv,k=B._62O,H=B.point,J=n.dm(),j=J.getHistoryManager(),M=n.lp(x),s=M.x-H.x,g=M.y-H.y,y=-O*s/n.getWidth(),a=-O*g/n.getHeight();if("roaming"===k)B.rotate(x,y/2,a/2);else if(k===td||k===ps||k===ks)j&&!n._86O&&j.beginInteraction(),n.fi({kind:n._86O?"betweenEditRotation":"beginEditRotation",event:x}),n._86O=1,n.sm().each(function(V){if(Pm(V)&&n.isRotationEditable(V)){var M=Z(y)>Z(a)?y:a;k===td?V.setRotationX(V.getRotationX()+M):k===ps?V.setRotationY(V.getRotationY()+M):k===ks&&V.setRotationZ(V.getRotationZ()+M)}});else if("move"===k||op[k]){k===Uh||k===wp||k===Kn?(j&&!n._87O&&j.beginInteraction(),n.fi({kind:n._87O?"betweenEditSize":"beginEditSize",event:x}),n._87O=1):(j&&!n._moving&&j.beginInteraction(),n.fi({kind:n._moving?"betweenMove":"beginMove",event:x}),n._moving=1);var P,Q=B.p3,L=n.getPositionInfo(Q),z=Vj(n);P=k===ti?"x":k===lk?"y":k===mb?"z":k===Uh?"sx":k===wp?"sy":k===Kn?"sz":n.getMoveMode(x,B.movedata),s=s/n.getWidth()*L.width,g=-1*g/n.getHeight()*L.height;var l,_,h=[z[0]*s,z[4]*s,z[8]*s],D=[z[1]*g,z[5]*g,z[9]*g],c=h[0]+D[0],K=h[1]+D[1],S=h[2]+D[2],G=[Q[0]+c,Q[1]+K,Q[2]+S],f=Of(n.getEye(),G,!0);if("xyz"===P?(l=G,n.moveSelection(c,K,S)):"xz"===P?(l=ek(n,Q,[0,1,0],G),l&&n.moveSelection(l[0]-Q[0],0,l[2]-Q[2])):"xy"===P?(l=ek(n,Q,[0,0,1],G),l&&n.moveSelection(l[0]-Q[0],l[1]-Q[1],0)):"yz"===P?(l=ek(n,Q,[1,0,0],G),l&&n.moveSelection(0,l[1]-Q[1],l[2]-Q[2])):"x"===P||"sx"===P?(f[0]=0,l=ek(n,Q,f,G),l&&(_=l[0]-Q[0],"x"===P?n.moveSelection(_,0,0):n.sm().each(function(J){Pm(J)&&n.isSizeEditable(J)&&(F=q(nd,J.getWidth()+_),w=F/J.getWidth(),J.setWidth(F),Af(x)&&(J.setHeight(J.getHeight()*w),J.setTall(J.getTall()*w)))}))):"y"===P||"sy"===P?(f[1]=0,l=ek(n,Q,f,G),l&&(_=l[1]-Q[1],"y"===P?n.moveSelection(0,_,0):n.sm().each(function(e){Pm(e)&&n.isSizeEditable(e)&&(F=q(nd,e.getTall()+_),w=F/e.getTall(),e.setTall(F),Af(x)&&(e.setHeight(e.getHeight()*w),e.setWidth(e.getWidth()*w)))}))):("z"===P||"sz"===P)&&(f[2]=0,l=ek(n,Q,f,G),l&&(_=l[2]-Q[2],"z"===P?n.moveSelection(0,0,_):n.sm().each(function(j){Pm(j)&&n.isSizeEditable(j)&&(F=q(nd,j.getHeight()+_),w=F/j.getHeight(),j.setHeight(F),Af(x)&&(j.setTall(j.getTall()*w),j.setWidth(j.getWidth()*w)))}))),!l)return;B.p3=l}else if(k===yb){var p=B.div;p||(p=B.div=cs(),Ah(B.getView(),p),p.op=H,p.style.background=n.getRectSelectBackground()),n.fi({kind:n._rectSelecting?"betweenRectSelect":"beginRectSelect",event:x}),n._rectSelecting=1,p.rect=xd(p.op,M),tg(p,p.rect)}else if("pinch"===k&&2===Bn(x)){n.fi({kind:n._pinching?"betweenPinch":"beginPinch",event:x}),n._pinching=1;var _=ri(x);n.handlePinch(_,B.dist),B.dist=_}else"pan"===k||Af(x)?B.pan(x,s,g):n.isFirstPersonMode()||(Eq(x)?B.rotate(x,y,a):(B.pan(x,s,0),n.isWalkable()&&(n.fi({kind:n._walking?"betweenWalk":"beginWalk",event:x}),n._walking=1,n.walk(g/n.getHeight()*n.getCenterInfo().height))));B.point=M},pan:function(B,N,c){var O=this.gv;if(O.isPannable()){var f=O.getCenterInfo(),Y=N/O.getWidth()*f.width,b=-1*c/O.getHeight()*f.height;O.fi({kind:O._panning?"betweenPan":"beginPan",event:B}),O._panning=1,O.pan(-Y,-b)}},rotate:function(s,J,d){var P=this.gv;P.isRotatable()&&(P.fi({kind:P._rotating?"betweenRotate":"beginRotate",event:s}),P._rotating=1,P.rotate(J,d))},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(u){var Y=this,i=Y.gv,h=i.dm(),U=h.getHistoryManager(),O=Y.div;if(O){var I=i.getDatasInRect(O.rect);if(!I.isEmpty()){var f=i.sm(),v=f.toSelection();I.each(function(B){f.co(B)?v.remove(B):v.add(B)}),f.ss(v)}Wn(O)}i._moving&&(delete i._moving,i.fi({kind:"endMove",event:u}),i.onMoveEnded(),U&&U.endInteraction()),i._panning&&(delete i._panning,i.fi({kind:"endPan",event:u}),i.onPanEnded()),i._rotating&&(delete i._rotating,i.fi({kind:"endRotate",event:u}),i.onRotateEnded()),i._86O&&(delete i._86O,i.fi({kind:"endEditRotation",event:u}),U&&U.endInteraction()),i._87O&&(delete i._87O,i.fi({kind:"endEditSize",event:u}),U&&U.endInteraction()),i._pinching&&(delete i._pinching,i.fi({kind:"endPinch",event:u}),i.onPinchEnded()),i._rectSelecting&&(delete i._rectSelecting,i.fi({kind:"endRectSelect",event:u}),i.onRectSelectEnded()),i._walking&&(delete i._walking,i.fi({kind:"endWalk",event:u}),i.onWalkEnded()),Y.dist=Y.point=Y._62O=Y.p3=Y.movedata=Y.div=Y._57I=Y._32Q=Y._31Q=Y.foward=L}});var ih=function(Y){this.gv=Y};th(ih,e,{_iv:!0,iv:function(){this._iv=!0},face:function(X,w){var M=this,l=M.gv.getGL();if(!l||!Pm(X))return L;var o=w.x,z=w.width,S=w.height,F=M.height-w.y-S,d=s(z/2),t=new Uint8Array(4*z*S),p=0;for(M.iv(),M.validate(X),de(l,M.frame),l.readPixels(o,F,z,S,l.RGBA,l.UNSIGNED_BYTE,t),de(l,L),M.iv();d>=p;p++)for(var j=d-p,i=d+p,m=j;i>=m;m++)for(var B=j;i>=B;B++)if(m===j||m===i||B===j||B===i){var u=hi.m[t[4*(m*z+B)]];if(u)return u}},get:function(G,n){this.validate();var v=this,Y=v.gv.getGL();if(!Y)return L;var C,r,E=G.x,Z=G.width,x=G.height,W=v.height-G.y-x,u=s(Z/2),m=new Uint8Array(4*Z*x),a=0,F=m.length,p=n?L:new Rb,Q=n?L:{};if(de(Y,v.frame),Y.readPixels(E,W,Z,x,Y.RGBA,Y.UNSIGNED_BYTE,m),de(Y,L),n){for(;u>=a;a++)for(var g=u-a,N=u+a,w=g;N>=w;w++)for(var l=g;N>=l;l++)if((w===g||w===N||l===g||l===N)&&(C=v.info(m,4*(w*Z+l))))return C}else for(;F>a;a+=4)C=v.info(m,a),C&&(r=C.data,Q[r._id]||(p.add(r),Q[r._id]=r));return p},info:function(D,h){return this.colorMap[(D[h]<<24)+(D[h+1]<<16)+(D[h+2]<<8)+D[h+3]]},validate:function(H){var h=this,x=h.gv,e=x.getGL();if(e){var u=x.getWidth(),W=x.getHeight(),r=e.RGBA,S=e.TEXTURE_2D,C=e.RENDERBUFFER,f=e.FRAMEBUFFER;h.texture||(h.texture=Vi(e),h.render=e.createRenderbuffer(),h.frame=e.createFramebuffer()),(h.width!==u||h.height!==W)&&(wj(e,h.texture),e.texImage2D(S,0,r,u,W,0,r,e.UNSIGNED_BYTE,L),$j(e,e.TEXTURE_MIN_FILTER,e.LINEAR),e.bindRenderbuffer(C,h.render),e.renderbufferStorage(C,e.DEPTH_COMPONENT16,u,W),de(e,h.frame),e.framebufferTexture2D(f,e.COLOR_ATTACHMENT0,S,h.texture,0),e.framebufferRenderbuffer(f,e.DEPTH_ATTACHMENT,C,h.render),wj(e,L),e.bindRenderbuffer(C,L),de(e,L),h.width=u,h.height=W),h._iv&&(h._iv=!1,de(e,h.frame),x._42(H||(h.colorMap={}),1),de(e,L))}}});var Dh=function(U){this.gv=U};th(Dh,e,{gap:0,size:0,_42:function(w,c){var K=this,B=K.gv,F=B._gridGap,U=B._gridSize;if(B._gridVisible){if(K.gap!==F||K.size!==U){for(var z=[],$=B._gridSize/2,y=F*$,j=0;2*$+1>j;j++){var i=6*j,t=6*(2*$+1)+i;z[i]=-y,z[i+1]=0,z[i+2]=-y+j*F,z[i+3]=y,z[i+4]=0,z[i+5]=-y+j*F,z[t]=-y+j*F,z[t+1]=0,z[t+2]=-y,z[t+3]=-y+j*F,z[t+4]=0,z[t+5]=y}K.vs=new qp(z),K.gap=F,K.size=U}Rm(B),Ud(w,c),_r(w,c,1,B._gridColor,B._buffer.vs,K.vs),Dg(w,0,K.vs.length/3,w.LINES),Lc(w,c)}else K.vs=K.gap=K.size=L}});var ds=function(P){this.gv=P};th(ds,e,{_42:function(y,U){var a=this.gv,W=a._buffer.vs,N=a._axisXColor,S=a._axisYColor,p=a._axisZColor,F=a._originAxisVisible,s=a._centerAxisVisible;if(F||s){var P=C?y.TRIANGLES:y.TRIANGLE_FAN,Z=y.LINES;if(Rm(a),Ud(y,U),F){var J=a.getCenterInfo(),h=g(J.width,J.height)/5,n=.8*h,k=.05*h;_r(y,U,1.5,N,W,new qp([0,0,0,h,0,0,n,k,0,n,0,k,n,-k,0,n,0,-k,n,k,0,0,0,0,0,h,0,k,n,0,0,n,k,-k,n,0,0,n,-k,k,n,0,0,0,0,0,0,h,k,0,n,0,k,n,-k,0,n,0,-k,n,k,0,n])),Dg(y,0,2,Z),Dg(y,1,6,P),_r(y,U,L,S),Dg(y,7,2,Z),Dg(y,8,6,P),_r(y,U,L,p),Dg(y,14,2,Z),Dg(y,15,6,P)}if(s){var q=a._center,X=q[0],r=q[1],w=q[2],J=a.getPositionInfo(q);h=g(J.width,J.height)/20,_r(y,U,1.5,N,W,new qp([X,r,w,X+h,r,w,X,r,w,X,r+h,w,X,r,w,X,r,w+h])),Dg(y,0,2,Z),_r(y,U,L,S),Dg(y,2,2,Z),_r(y,U,L,p),Dg(y,4,2,Z)}Lc(y,U)}}});var vp=function(o){this.gv=o},ti="edit_tx",lk="edit_ty",mb="edit_tz",td="edit_rx",ps="edit_ry",ks="edit_rz",Uh="edit_sx",wp="edit_sy",Kn="edit_sz",op={};op[ti]=1,op[lk]=1,op[mb]=1,op[td]=1,op[ps]=1,op[ks]=1,op[Uh]=1,op[wp]=1,op[Kn]=1,th(vp,e,{_42:function(I,h,k){var n=this,z=n.gv,y=z.sm().ld();if(z.isEditable(y)&&Pm(y)&&(!z.isFirstPersonMode()||!z.isMouseRoamable()&&!E)){Rm(z);var Q,a,t=z.isMovable(y),d=z.isRotationEditable(y),C=z.isSizeEditable(y),s=z._axisXColor,G=z._axisYColor,F=z._axisZColor,W=z._editSizeColor,T=z.getCenterInfo(),_=g(T.width,T.height)/10,j=_/(k?5:10),x=.7*_,B=.4*x,D=y.p3(),Y=D[0],e=D[1],p=D[2];Q=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],t&&n._17O(I,h,y,k,ti,s,Q,[Y,e-j,p,Y+x,e-j,p,Y+x,e,p,Y+x,e,p,Y,e,p,Y,e-j,p,Y,e-j,p+j,Y+x,e-j,p+j,Y+x,e-j,p,Y+x,e-j,p,Y,e-j,p,Y,e-j,p+j]),a=Y+x,C&&n._17O(I,h,y,k,Uh,W,Q,[a,e-j,p,a+B,e-j,p,a+B,e,p,a+B,e,p,a,e,p,a,e-j,p,a,e-j,p+j,a+B,e-j,p+j,a+B,e-j,p,a+B,e-j,p,a,e-j,p,a,e-j,p+j]),a+=B,d&&n._17O(I,h,y,k,td,s,Q,[a,e-j,p,a+B,e-j,p,a+B,e,p,a+B,e,p,a,e,p,a,e-j,p,a,e-j,p+j,a+B,e-j,p+j,a+B,e-j,p,a+B,e-j,p,a,e-j,p,a,e-j,p+j]),Q=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],t&&n._17O(I,h,y,k,lk,G,Q,[Y,e,p,Y,e+x,p,Y-j,e+x,p,Y-j,e+x,p,Y-j,e,p,Y,e,p,Y,e,p,Y,e,p-j,Y,e+x,p-j,Y,e+x,p-j,Y,e+x,p,Y,e,p]),a=e+x,C&&n._17O(I,h,y,k,wp,W,Q,[Y,a,p,Y,a+B,p,Y-j,a+B,p,Y-j,a+B,p,Y-j,a,p,Y,a,p,Y,a,p,Y,a,p-j,Y,a+B,p-j,Y,a+B,p-j,Y,a+B,p,Y,a,p]),a+=B,d&&n._17O(I,h,y,k,ps,G,Q,[Y,a,p,Y,a+B,p,Y-j,a+B,p,Y-j,a+B,p,Y-j,a,p,Y,a,p,Y,a,p,Y,a,p-j,Y,a+B,p-j,Y,a+B,p-j,Y,a+B,p,Y,a,p]),Q=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],t&&n._17O(I,h,y,k,mb,F,Q,[Y,e,p,Y,e,p+x,Y,e-j,p+x,Y,e-j,p+x,Y,e-j,p,Y,e,p,Y,e-j,p,Y-j,e-j,p,Y-j,e-j,p+x,Y-j,e-j,p+x,Y,e-j,p+x,Y,e-j,p]),a=p+x,C&&n._17O(I,h,y,k,Kn,W,Q,[Y,e,a,Y,e,a+B,Y,e-j,a+B,Y,e-j,a+B,Y,e-j,a,Y,e,a,Y,e-j,a,Y-j,e-j,a,Y-j,e-j,a+B,Y-j,e-j,a+B,Y,e-j,a+B,Y,e-j,a]),a+=B,d&&n._17O(I,h,y,k,ks,F,Q,[Y,e,a,Y,e,a+B,Y,e-j,a+B,Y,e-j,a+B,Y,e-j,a,Y,e,a,Y,e-j,a,Y-j,e-j,a,Y-j,e-j,a+B,Y-j,e-j,a+B,Y,e-j,a+B,Y,e-j,a])}},_17O:function(B,R,z,l,_,N,$,y){var a=this.gv._buffer;Kc(B,R,l,!0,z,_),of(B,R,L,!0,L,!0,L,!1),Lg(B,R.uDiffuse,N),Ml(B,a.vs,new qp(y),R.aPosition),Ml(B,a.ns,new qp($),R.aNormal),Dg(B,0,12),Aq(B,R)}});var qk=function(M,A){this.gv=M,this.s=function(a,w,U){return w==L&&(w=U),w==L?A.getStyle(a):ki(w,A,M)},this.data=A};th(qk,e,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(B,q,k,K){var i,H,D,u,e,p,d,x=this,W=x.gv,Z=x.data,s=Z._id,X=x.s("batch"),h=W._34O,a=W._33O,f=W.isSelectable(Z),c=W.getBrightness(Z),z=c!=L&&1!==c;if(x._iv){if(D=Bc(h,a,Z,X),x.validate(D,X?ub[X]||Wr:L),D&&(u=h[s],e=u.size=D.vs.length/3-u.begin,d=D.rs))for(c=z?c:1,p=0;e>p;p++)d.push(c);if(Pm(Z)){var J=W.getWireframe(Z);J&&Re(W,Z,J)}x.labelInfo=x.label2Info=x.noteInfo=x.note2Info=x._38o=L,x._24O(zm,"getLabel"),x._24O(uf,"getLabel2"),x._26O(rb,"getNote"),x._26O(Og,"getNote2"),x._15O(),x._iv=!1}z&&Lg(B,q.uBrightness,c),H=Kc(B,q,k,f,Z,km),H&&(Fp(H,h[s],a),Fp(H,W._polylineIndexMap[s],W._polylineModelMap),Fp(H,W._wireframeIndexMap[s],W._wireframeModelMap)),h[s]||x._80o(B,q,K),(i=x.labelInfo)&&(Kc(B,q,k,f,Z,zm),x._28O(i,zm,K)),(i=x.label2Info)&&(Kc(B,q,k,f,Z,uf),x._28O(i,uf,K)),(i=x.noteInfo)&&(Kc(B,q,k,f,Z,rb),x._29O(i,rb,K)),(i=x.note2Info)&&(Kc(B,q,k,f,Z,Og),x._29O(i,Og,K)),(i=x._38o)&&x._99O(B,q,i,k,f,K),z&&Lg(B,q.uBrightness,1)},validate:function(){},_16O:function(){return Pb},_80o:function(){},dispose:function(){},getBodyColor:function(u){var v=this.data,P=this.gv.getBodyColor(v);return P?P:u?v.getStyle(u):L},_24O:function(r,o){var J=this,y=J.data,K=J.gv,g=J.s,V=K[o](y);if(V!=L){var F=g(r+".scale"),n=g(r+".max"),N=J[r+"Info"]={label:V,textureScale:g(r+".texture.scale"),color:K[o+"Color"](y),font:g(r+".font"),align:g(r+".align"),background:K[o+"Background"](y)},j=N.rect=pd(N,V);n>0&&n<j.width&&(N.labelWidth=j.width,j.width=n),j.x=j.y=0,j.width*=F,j.height*=F,N.mat=J._16O(g(r+".autorotate"),g(r+".position"),j,g(r+".face"),g(r+".t3"),g(r+".r3"),g(r+".rotationMode"));var Q=j.width/2,c=j.height/2;N.vs=new qp([-Q,c,0,-Q,-c,0,Q,-c,0,Q,c,0]),j.width/=F,j.height/=F}},_26O:function(c,$){var j=this,G=j.data,x=j.gv,p=j.s,q=x[$](G);if(q!=L){var D=p(c+".scale"),T=this[c+"Info"]={note:q,textureScale:p(c+".texture.scale"),expanded:p(c+".expanded"),font:p(c+".font"),color:p(c+".color"),align:p(c+".align"),borderWidth:p(c+".border.width"),borderColor:p(c+".border.color"),background:x[$+"Background"](G)};if(T.expanded){var v=p(c+".max"),i=pd(T,q);i.width+=6,i.height+=2,v>0&&v<i.width&&(T.labelWidth=i.width,i.width=v);var W={x:-i.width/2,y:-8-i.height,width:i.width,height:i.height+8}}else W={x:-6,y:-18,width:12,height:18};T.mat=j._16O(p(c+".autorotate"),p(c+".position"),L,p(c+".face"),p(c+".t3"),p(c+".r3"),p(c+".rotationMode")),T.rect=W,1!==D&&(W=je(W),W.x*=D,W.height*=D,W.y=-W.height,W.width*=D);var V=W.x,l=W.y,s=W.width,R=W.height;T.vs=new qp([V,-l,0,V,-l-R,0,V+s,-l-R,0,V+s,-l,0])}},_28O:function(u,g,K){if(K(this.s(g+".transparent"))){var k=u.rect,V=u.textureScale,$=k.width*V,P=k.height*V;if($>=1&&P>=1){var C=jp($,P);1!==V&&(C.translate(C,k.x,k.y),C.scale(V,V),C.translate(C,-k.x,-k.y)),lo(C,u),C.restore(),zf(this,g,u.mat,u.vs,!0)}}},_29O:function(r,P,t){if(t(this.s(P+".transparent"))){var G=r.rect,h=r.textureScale,x=G.x,u=G.y,c=G.width*h,J=G.height*h;if(c>=1&&J>=1){G.x=G.y=0;var v=jp(c,J);1!==h&&v.scale(h,h),kn(v,r),v.restore(),G.x=x,G.y=u,zf(this,P,r.mat,r.vs,!1)}}},_99O:function(D,O,$,f,o,R){if($){var J=this,l=J.gv,e=J.data,_=l._buffer,P=l._1O,b=$.icons;for(var s in b){var j=b[s],h=$.rects[s];if(h&&R(ki(j.transparent,e,l))){Kc(D,O,f,o,e,s);var T=ki(j.shape3d,e,l),u=T?[T]:ki(j.names,e,l),v=u?u.length:0,U=ki(j.textureScale,e,l)||1,w=ki(j.light,e,l);w==L&&(w=T?!0:!1),of(D,O,ki(j.blend,e,l),w,ki(j.opacity,e,l),ki(j.reverseFlip,e,l),ki(j.reverseColor,e,l),ki(j.reverseCull,e,l));for(var H=0;v>H;H++){var k=u[H],d=h[H];if(xb(J,d.mat),T)wh(l,e,Qm(J.s,T),J.s);else{var m=fr(k);if(m){var A=d.width*U,y=d.height*U;if(A>=1&&y>=1){var M=jp(A,y);$g(M,m,ki(j.stretch,e,l),0,0,A,y,e,l),M.restore(),Vi(D,Hh,P),uo(D,O,P,ki(j.discardSelectable,e,l),_.uv,lb),Ml(D,_.vs,d.vs,O.aPosition),Ml(D,_.ns,si,O.aNormal),$e(D,_.is,Dm),gl(D,0,Dm.length),tr(D,O,P)}}}eb(l)}Aq(D,O)}}}}});var Cc=function(c,r){ml(Cc,this,[c,r])};th(Cc,qk,{_16O:function(t,Z,a,O,k,U,E,D,l){var G=this.data,c=wi(Z,G.s3(),a,O,D,l);return Ok(Jp(),c,G.p3(),O,k,U,E,t,G.r3(),G.getRotationMode())},clear:function(){var p=this;p.faceMat=p.mat=p.shapeModel=p.left=p.right=p.front=p.back=p.top=p.bottom=p.csg=L},validate:function(x,E){var e=this,K=e.gv,l=e.data,j=Qm(e.s),M=Uq(l,K.getMat(l),j?e.s("shape3d.scaleable"):!0);if(e.clear(),x){var y=[];j?cf(K,l,j,e.s,e.getBodyColor(),[M],x,y):(oe(K,l,x,E,M,d,y,fd),oe(K,l,x,E,M,S,y,Oi),oe(K,l,x,E,M,Tg,y,qc),oe(K,l,x,E,M,Po,y,lf),oe(K,l,x,E,M,t,y,Vm),oe(K,l,x,E,M,_,y,Td)),y.length&&(yl(x.vs,y),yl(x.ns,$q(y)))}else e.mat=M,(e.shapeModel=j)||(e.vf(d),e.vf(S),e.vf(t),e.vf(_),e.vf(Tg),e.vf(Po))},vf:function(B){var j=this;if(j.gv.getFaceVisible(j.data,B)){var c=Xi(j,B);return c.mat&&(j.faceMat=!0),c}},_80o:function(j,q,$){var e=this,S=e.gv,H=e.data,k=S._cube,U=e.shapeModel;Rm(S,e.mat),U?wh(S,H,U,e.s,e.getBodyColor(),$):(Ml(j,k.vs,L,q.aPosition),Ml(j,k.ns,L,q.aNormal),$e(j,k.is),e._18O(j,q,e.left,0,$),e._18O(j,q,e.front,6,$),e._18O(j,q,e.right,12,$),e._18O(j,q,e.back,18,$),e._18O(j,q,e.top,24,$),e._18O(j,q,e.bottom,30,$)),eb(S),e.faceMat&&(e._18O(j,q,e.left,0,$,!0),e._18O(j,q,e.front,6,$,!0),e._18O(j,q,e.right,12,$,!0),e._18O(j,q,e.back,18,$,!0),e._18O(j,q,e.top,24,$,!0),e._18O(j,q,e.bottom,30,$,!0))},_18O:function(a,n,H,y,q,O){if(H){if(!q(H.transparent))return;if(O&&!H.mat||!O&&H.mat)return;O&&Rm(this.gv,H.mat);var Y=this,S=Y.data,U=Y.gv,l=U.getTexture(H.texture,S),D=H.uv,$=H.uvScale,x=H.uvOffset,E=H.discardSelectable;if(l)if(D){for(var d=8*(y/6),u=0;8>u;u++)ul[d+u]=D[u];uo(a,n,l,E,U._buffer.uv,ul,x,$)}else uo(a,n,l,E,U._cube.uv,L,x,$);of(a,n,H.blend,H.light,H.opacity,H.reverseFlip,H.reverseColor,H.reverseCull),Lg(a,n.uDiffuse,H.color),gl(a,y,6),Aq(a,n),tr(a,n,l),O&&eb(U)}}});var Cp=function(F,v){ml(Cp,this,[F,v])};th(Cp,qk,{_25Q:1,validate:function(h){var U=this,p=U.gv,l=U.data,f=U.s,S=f("edge.width"),t=l._40I,v=l._41I;if(U.shapeModel=U.info=L,t&&v){var q,V,z,E,r,I,$,b,e,m,W=l.isLooped(),M=f($n),i=y.getEdgeType(M);if(i){var B=i(l,Mi(U,p,l,W,M),p,U._19Q);if(!B.points||B.points.isEmpty())return;I=U.info={},$=B.segments,r=B.points,b=r.size();for(var w=t.getElevation(),s=v.getElevation(),x=0;b>x;x++){var G=r.get(x);G.e==L&&(G.e=w+(s-w)*x/(b-1))}e=Bl(r.get(0)),m=Bl(r.get(b-1));var c=b%2;0===c?(I.c1=Bl(r.get(b/2-1)),I.c2=Bl(r.get(b/2))):I.p3=Bl(r.get((b-c)/2)),I.s1=e,I.s2=Bl(r.get(1)),I.t1=Bl(r.get(b-2)),I.t2=m}else{r=new Rb,I=U.info={};var Q=f("edge.offset"),H=f("edge.center"),n=f("edge.source.t3"),N=f("edge.target.t3"),j=t.p3(),a=v.p3();if(n&&(j[0]+=n[0],j[1]+=n[1],j[2]+=n[2]),N&&(a[0]+=N[0],a[1]+=N[1],a[2]+=N[2]),M===sn){$=f("edge.segments");var J=I.points=f(Vl)||Tb;if(b=J.size()){e=Bl(J.get(0)),m=Bl(J.get(b-1)),!H&&Q&&(z=Of(e,j,!0),Q=g(Q,el(j,e)),j=[j[0]+z[0]*Q,j[1]+z[1]*Q,j[2]+z[2]*Q],z=Of(a,m,!0),Q=g(Q,el(m,a)),a=[a[0]-z[0]*Q,a[1]-z[1]*Q,a[2]-z[2]*Q]);var c=b%2;0===c?(q=Bl(J.get(b/2-1)),V=Bl(J.get(b/2))):I.p3=Bl(J.get((b-c)/2)),I.s1=j,I.s2=e,I.t1=m,I.t2=a}else!H&&Q&&(z=Of(a,j,!0),E=el(j,a),Q=cl(Q,E),j=[j[0]+z[0]*Q,j[1]+z[1]*Q,j[2]+z[2]*Q],a=[a[0]-z[0]*Q,a[1]-z[1]*Q,a[2]-z[2]*Q]),q=j,V=a;r.add({x:j[0],y:j[2],e:j[1]}),r.addAll(J),r.add({x:a[0],y:a[2],e:a[1]})}else{var F=Mi(U,p,l,W,M);if(U._19Q||(F=-F),W){var D=j[0],X=j[1],O=j[2],o=t.getTall()/2+F;q=[D-F,X+o,O],V=[D+F,X+o,O],r.add({x:D-F,y:O,e:X}),r.add({x:D-F,y:O,e:X+o}),r.add({x:D+F,y:O,e:X+o}),r.add({x:D+F,y:O,e:X})}else{z=Of(a,j,!0),E=el(j,a);var Y={x:j[0],y:j[2]},u={x:a[0],y:a[2]},K=Gn(L,Y,u,F),k=K.x-Y.x,T=K.y-Y.y;Q=cl(Q,E),z[0]*=Q,z[1]*=Q,z[2]*=Q,q=[j[0]+z[0]+k,j[1]+z[1],j[2]+z[2]+T],V=[a[0]-z[0]+k,a[1]-z[1],a[2]-z[2]+T],H?(r.add({x:j[0],y:j[2],e:j[1]}),r.add({x:q[0],y:q[2],e:q[1]}),r.add({x:V[0],y:V[2],e:V[1]}),r.add({x:a[0],y:a[2],e:a[1]})):(r.add({x:q[0],y:q[2],e:q[1]}),r.add({x:V[0],y:V[2],e:V[1]}))}}I.c1=q,I.c2=V}I.list=f(pi)===ji?U.createTubeModel(r,$,S/2,h):U.createLineModel(r,$,S,"edge","edge.dash")}}});var Io=function(d,x){ml(Io,this,[d,x])};th(Io,Cc,{_80o:function(D,k,K){var R=this,L=R.gv,W=R.shapeModel;Rm(L,R.mat),W?wh(L,R.data,W,R.s,R.getBodyColor(),K):(db(R,D,k,R.left,K),db(R,D,k,R.front,K),db(R,D,k,R.right,K),db(R,D,k,R.back,K),db(R,D,k,R.top,K),db(R,D,k,R.bottom,K)),eb(L)},validate:function(P,p){var E,J,m=this,Q=m.s,N=m.data,X=N.p3(),U=N._thickness/2,Z=N.isClosePath(),$=N.getPoints(),b=N.getSegments(),l=Q(Nd),q=P&&P.uv;if(m.clear(),0>U)J=m.shapeModel=Md($,b,Q(Ve),Q(Qc),l,Q(Gl),N.getTall(),N.getElevation(),Z),Q(Mp)?Q("shape3d.image")||delete J.uv:(delete J.vs,delete J.ns,delete J.uv),Q("shape3d.top.image")||delete J.top_uv,Q("shape3d.bottom.image")||delete J.bottom_uv;else if(Q(pi)===ji)E=Kg($,b,l,Z),J=m.shapeModel={vs:[]},Q("shape3d.image")&&(J.uv=[],J.sum=Q(Gl)||Pg(E)||1,J.len=0),Q(Ve)&&!Z&&(J.top_vs=[],Q("shape3d.top.image")&&(J.top_uv=[])),Q(Qc)&&!Z&&(J.bottom_vs=[],Q("shape3d.bottom.image")&&(J.bottom_uv=[])),m._12O(E,U);else{var H,W,Y,M,z,h,w,G,i,o;E=Kg($,b,l,Z),z=m.vf(t,q,!1,p),U&&(h=m.vf(_,q,!1,p),w=Z?L:m.vf(d,q,!1,p),G=Z?L:m.vf(S,q,!1,p),i=m.vf(Tg,q,!1,p),o=m.vf(Po,q,!1,p)),U?m._12O(E,U):z&&E.forEach(function(K){if(M=K.length,M>0)for(H=K[0],Y=1;M>Y;Y++)W=K[Y],m.addV(z.vs,H,W),H=W}),m._20Q(E),P||(z&&(z.ns=$q(z.vs),vi(z,"vs"),vi(z,Ao)),U&&(h&&(h.ns=$q(h.vs),vi(h,"vs"),vi(h,Ao)),w&&(w.ns=$q(w.vs),vi(w,"vs"),vi(w,Ao)),G&&(G.ns=$q(G.vs),vi(G,"vs"),vi(G,Ao)),i&&(i.ns=$q(i.vs),vi(i,"vs"),vi(i,Ao)),o&&(o.ns=$q(o.vs),vi(o,"vs"),vi(o,Ao))))}var k=m.mat=Jp();ag(k,X),md(k,N.r3(),N.getRotationMode()),ag(k,sh(X)),P&&(Vf(m,k,P,J),m.clear())},_20Q:function(j){var s,e,h,f,t,o,k,x=this,N=x.front,v=x.back,p=x.top,n=x.bottom,c=N?N.tuv:L,V=v?v.tuv:L,U=p?p.tuv:L,K=n?n.tuv:L,Y=0;(c||V||U||K)&&(s=x.s(Gl)||Pg(j)||1,j.forEach(function(W){if(e=W.length,e>0)for(o=W[0],h=1;e>h;h++)k=W[h],f=Y/s,Y+=el(o,k),t=Y/s,x._14O(N,f,t),x._14O(v,1-t,1-f),x._14O(p,f,t),x._14O(n,f,t),o=k}))},_14O:function(p,O,Q){if(p){var c=p.uv,$=p.tuv;if($){if(c)var s=c[0]+(c[6]-c[0])*O,F=c[1]+(c[7]-c[1])*O,m=c[2]+(c[4]-c[2])*O,T=c[3]+(c[5]-c[3])*O,W=c[2]+(c[4]-c[2])*Q,_=c[3]+(c[5]-c[3])*Q,R=c[0]+(c[6]-c[0])*Q,I=c[1]+(c[7]-c[1])*Q;else s=O,F=0,m=O,T=1,W=Q,_=1,R=Q,I=0;$.push(m,T,W,_,R,I,R,I,s,F,m,T)}}},_13O:function(N){var x=N.uv,M=N.tuv;M&&(x?M.push(x[2],x[3],x[4],x[5],x[6],x[7],x[6],x[7],x[0],x[1],x[2],x[3]):M.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(s,v){var _,p,T,K,I,m=this;s.forEach(function(C){if(I=C.length,I>0)for(_={p:C[0],n:!0},K=1;I>K;K++)p=C[K],T=I-1>K?C[K+1]:L,m.addPoint(_,p,T,v,C)})},addPoint:function(S,b,W,C,c){var e,z,G,F,U,m,E,f,P,y=this,x=S.p,K=S.f,n=S.b,o=y.s("shape3d.side")||gp,s=y.s("shape3d.start.angle"),X=y.shapeModel,r=y.data.isClosePath();if(S.n&&(S.n=!1,K=r&&c.length>2?Gn(c[c.length-2],x,b,C):Gn(L,x,b,C),n=oc(x,K),X?X.top_vs&&y._10O(n,K,o,s,X.top_vs,X.top_uv):(e=y.left)&&(y.addV(e.vs,n,K),y._13O(e))),z=W?Gn(x,b,W,C):r&&c.length>2?Gn(x,b,c[1],C):Gn(x,b,L,C),G=oc(b,z),X){var q,N,O=X.vs,_=X.uv,i=X.sum;for(_&&(q=X.len/i,X.len+=el(x,b),N=X.len/i),m=y._9O(n,K,o,s),E=y._9O(G,z,o,s),f=0;o>f;f++)P=f+1,yl(O,m[P]),yl(O,E[f]),yl(O,m[f]),yl(O,E[f]),yl(O,m[P]),yl(O,E[P]),_&&(F=f/o,U=P/o,_.push(q,U,N,F,q,F,N,F,q,U,N,U));!W&&X.bottom_vs&&y._10O(G,z,o,s,X.bottom_vs,X.bottom_uv,!0)}else!W&&(e=y.right)&&(y.addV(e.vs,z,G),y._13O(e)),(e=y.front)&&y.addV(e.vs,K,z),(e=y.back)&&y.addV(e.vs,G,n),(e=y.top)&&y.addH(e.vs,K,z,G,n,!0),(e=y.bottom)&&y.addH(e.vs,n,G,z,K);S.p=b,S.f=z,S.b=G},_10O:function(N,j,m,s,Z,E,L){var P,c,C=this,u=C.data,t=C._9O(N,j,m,s),e=(N.x+j.x)/2,Y=(N.y+j.y)/2,f=u.getElevation(),Q=0;for(Q=0;m>Q;Q++)L?(yl(Z,t[Q]),yl(Z,t[Q+1])):(yl(Z,t[Q+1]),yl(Z,t[Q])),yl(Z,[e,f,Y]),E&&(L?(P=O*(Q+1)/m+s,c=O*Q/m+s):(P=O*Q/m+s,c=O*(Q+1)/m+s),E.push(.5-.5*n(c),.5-.5*l(c),.5-.5*n(P),.5-.5*l(P),.5,.5))},_9O:function(N,Y,V,f){for(var Q,L,X=this,T=X.data,u=[],h=(N.x+Y.x)/2,w=(N.y+Y.y)/2,m=T.getTall()/2,i=T.getElevation(),A=0;V>=A;A++)Q=O*A/V+f,L=n(Q),u.push([h+(N.x-h)*L,i+m*l(Q),w+(N.y-w)*L]);return u},addV:function(z,v,c){var i=v.x,M=v.y,H=c.x,B=c.y,o=this.data,u=o.getElevation(),g=o.getTall()/2;z.push(i,u-g,M,H,u-g,B,H,u+g,B,H,u+g,B,i,u+g,M,i,u-g,M)},addH:function(Z,A,m,y,U,w){var e=this.data,g=e.getTall()/2,v=e.getElevation()+(w?g:-g);Z.push(A.x,v,A.y,m.x,v,m.y,y.x,v,y.y,y.x,v,y.y,U.x,v,U.y,A.x,v,A.y)},vf:function(m,N,x,O){var C,F=this,z=F.gv.getFaceVisible(F.data,m);return(x||z)&&(C=Xi(F,m,O),C.vs=[],C.tuv=z&&(C.texture||N)?[]:L,C.visible=z),C}});var Le=function(i,j){ml(Le,this,[i,j])};th(Le,qk,{_25Q:1,validate:function(C){var F=this,w=F.data,k=F.s,n=w.getPoints(),R=n.size();if(F.shapeModel=F.info=L,R>1){var _=F.info={},m=w.getSegments(),G=w.getThickness(),V=Bl(n.get(0)),f=Bl(n.get(R-1)),A=R%2;0===A?(_.c1=Bl(n.get(R/2-1)),_.c2=Bl(n.get(R/2))):_.p3=Bl(n.get((R-A)/2)),_.s1=V,_.s2=Bl(n.get(1)),_.t1=Bl(n.get(R-2)),_.t2=f,_.list=k(pi)===ji?F.createTubeModel(n,m,G/2,C):F.createLineModel(n,m,G,"shape.border","shape.dash")}}}),Th(y,{accordionViewExpandIcon:Dl(Kb),accordionViewCollapseIcon:Dl(Kb,!0),accordionViewLabelColor:rc,accordionViewLabelFont:Cl,accordionViewTitleBackground:Xf,accordionViewSelectBackground:Xr,accordionViewSelectWidth:3,accordionViewSeparatorColor:Q,splitViewDividerSize:1,splitViewDividerBackground:Xf,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Pe,rect:[2,2,12,12],background:Kb}]},propertyViewLabelColor:sg,propertyViewLabelSelectColor:rc,propertyViewLabelFont:Cl,propertyViewExpandIcon:Dl(cg),propertyViewCollapseIcon:Dl(cg,!0),propertyViewBackground:tm,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:ad,propertyViewColumnLineColor:ad,propertyViewSelectBackground:Xr,listViewLabelColor:sg,listViewLabelSelectColor:rc,listViewLabelFont:Cl,listViewRowLineVisible:!1,listViewRowLineColor:ad,listViewSelectBackground:Xr,treeViewLabelColor:sg,treeViewLabelSelectColor:rc,treeViewLabelFont:Cl,treeViewExpandIcon:Dl(bi),treeViewCollapseIcon:Dl(bi,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:ad,treeViewSelectBackground:Xr,tableViewLabelColor:sg,tableViewLabelSelectColor:rc,tableViewLabelFont:Cl,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:ad,tableViewColumnLineColor:ad,tableViewSelectBackground:Xr,treeTableViewLabelColor:sg,treeTableViewLabelSelectColor:rc,treeTableViewLabelFont:Cl,treeTableViewExpandIcon:Dl(bi),treeTableViewCollapseIcon:Dl(bi,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:ad,treeTableViewColumnLineColor:ad,treeTableViewSelectBackground:Xr,tableHeaderLabelColor:sg,tableHeaderLabelFont:Cl,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Yc,tableHeaderBackground:tm,tableHeaderMoveBackground:Oj,tableHeaderInsertColor:Xr,tableHeaderSortDescIcon:Yh(cg,!0),tableHeaderSortAscIcon:Yh(cg),tabViewTabGap:1,tabViewLabelColor:rc,tabViewLabelFont:Cl,tabViewTabBackground:Xf,tabViewSelectWidth:3,tabViewSelectBackground:Xr,tabViewMoveBackground:Oj,tabViewInsertColor:Xr,toolbarLabelColor:sg,toolbarLabelSelectColor:rc,toolbarLabelFont:Cl,toolbarBackground:tm,toolbarSelectBackground:Xr,toolbarItemGap:8,toolbarSeparatorColor:qo},!0);var gm={translateX:1,sortColumn:1},hf={sortable:1,sortOrder:1,sortFunc:1},Dc={focusData:1},gk={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Df={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Qn=function(g,L){L.add(g),g.hasChildren()&&g.eachChild(function(o){Qn(o,L)})},Fo=function(k,m,w,O,X,G,d,V,U,A,r){var R,x=w.getValueType(),s=w.getAlign();if(w.getEnumValues()){var p=w.toEnumLabel(m),l=Lq||0,Q=0,J=G,E=y.getTextSize(O,p).width;return R=fr(w.toEnumIcon(m)),R&&(Q=G+Lq/2,"center"===s?Q+=(V-(l+E))/2:"right"===s&&(Q=Q+V-(l+E)),zh(k,R,Q,d+U/2),J=Q+Lq/2),p!=L&&(R?Jf(k,p,O,X,J,d,V-(J-G),U):Jf(k,p,O,X,G,d,V,U,s)),void 0}return m=w.formatValue(m),m!=L?x===Nc?(bf(k,G,d,V,U,m),void 0):x===kf||!x&&Zk(m)?(R=fr(m?Ci:Vq),zh(k,R,G+V/2,d+U/2,A,r),void 0):(Jf(k,m,O,X,G,d,V,U,s),void 0):void 0},xe=function(T,k){var w=k.view,Y=w.getDataModel().getHistoryManager(),K=di(T),u=k.column||k.property;Y&&Y.beginInteraction(),k.editor=T,T.info=k,w.setCurrentEditor(T),w.getView().insertBefore(K,w._79O),tg(T,k.editorRect),T.setFocus?T.setFocus():ol(T),T.commitValue=function(){T._17Q&&(T=T._17Q),w.setValue(k.data,u,T.getValue?T.getValue():T.value),T.close&&T.close(),Wn(K)},u.onEditorCreated&&u.onEditorCreated(k)},il=function(T,u,z,l,o){var X=Dk(T,z),t=u.value,g=u.view,D=o.getValueType();return X.onblur=X.onchange=function(){g.endEditing()},"input"===T?(t=o.formatValue(t),t!=L&&(X.value=t),X.onkeydown=function(l){oq(l)&&g.endEditing()},(D===rh||D===Lf)&&X.addEventListener(dl,y.numberListener,!1)):T===yb&&l.forEach(function(r){var f=J.createElement("option");f.innerHTML=o.toEnumLabel(r),f.value=r,o.isEnumEqual(t,r)&&(f.selected=!0),Ah(X,f)}),xe(X,u),X},He=G.widget={},as=function(S,W,r){th(j+".widget."+S,W,r)};Th(Kq,{ms_value:function(i){i.getValue=function(Q){var h=this.getItemById(Q),p=h.element;return p?p.getValue?p.getValue():p.value:h.selected},i.setValue=function(m,_){var $=this.getItemById(m),b=$.element;b?b.setValue?b.setValue(_):b.value=_:($.selected=_,this.iv())},i.v=function($,q){var P=this;if(2===arguments.length)P.setValue($,q);else{if(!Pj($))return P.getValue($);for(var C in $)P.setValue(C,$[C])}return P}},_46o:function(N){N._icon=L,N._accessType=L,N._valueType=L,N._editable=!1,N._batchEditable=!0,N._align=d,N._nullable=!0,N._emptiable=!1,N.setParent=wg,N.formatValue=function(X){var U=this,n=U._valueType;if(U.getEnumValues())return U.toEnumLabel(X);if(n===kf)return!!X;if(X!=L){if(n===rh)return u(X);if(aq(X))return Zp(X)}return X},N.setEnum=function(r,w,M,O,B,E){var I=this;r&&r.values&&(O=r.editable,M=r.icons,w=r.labels,B=r.strict,E=r.maxHeight,r=r.values),Xb(r)&&(r=r._as),Xb(w)&&(w=w._as),Xb(M)&&(M=M._as),I._enumValues=r,I._enumLabels=w,I._enumIcons=M,I._enumEditable=O,I._enumStrict=B==L?!0:B,I._enumMaxHeight=E,r&&r.length&&aq(r[0])&&(I._valueType=Lf),I.fp("enum",!1,!0)},N.getEnumMaxHeight=function(){return this._enumMaxHeight},N.isEnumEditable=function(){return this._enumEditable},N.getEnumValues=function(){return this._enumValues},N.getEnumLabels=function(){return this._enumLabels},N.getEnumIcons=function(){return this._enumIcons},N.isEnumStrict=function(){return this._enumStrict},N.isEnumEqual=function(D,J){return this._enumStrict?D===J:D==J},N.toEnumLabel=function(E){var F=this,H=F._enumValues,r=F._enumLabels;if(H&&r)for(var o=0;o<H.length;o++)if(F.isEnumEqual(E,H[o]))return r[o];return E},N.toEnumIcon=function(s){var S=this,X=S._enumValues,G=S._enumIcons;if(X&&G)for(var k=0;k<X.length;k++)if(S.isEnumEqual(s,X[k]))return G[k];return Q}},_45o:function(E){E._87o=function(A,O,$,G,W,s){if(A){var x=this,Z=x._90I,q=cs(1);x._columnLineVisible&&(W-=1),x._rowLineVisible&&(s-=1),0>=W||0>=s||(x._90I||(Z=x._90I={}),Z[O]||(Z[O]=new Rb),tg(q,x.tx()+$,x.ty()+G,W,s),Ah(q,A),x._view.insertBefore(q,x._79O),A.onParentAdded&&A.onParentAdded(q),Z[O].add(q))}},E._76o=function(){var D=this,O=D._90I;if(O){for(var K in O)O[K].each(function(A){Wn(A)});delete D._90I}},E._77o=function(C){var G=this;if(G._90I){var a=G._90I[C];a&&(a.each(function(o){Wn(o)}),delete G._90I[C])}}},_47o:function(s){s.getValue=function(h,R){return R.getValue?R.getValue(h,R,this):hc(h,R.getAccessType(),R.getName())},s.setValue=function(c,y,u){if(y.isEmptiable()||""!==u||(u=Q),y.isNullable()||u!=L){var O=this,X=y.getName(),P=y.getAccessType(),j=y.getValueType();j===rh&&Un(u)?u=T(u):j===Lf&&Un(u)?u=parseFloat(u):j===kf&&Un(u)&&(u="true"===u),O._batchEditable&&y._batchEditable&&O.isSelected(c)?O.sm().each(function(S){y.setValue?y.setValue(S,y,u,O):Oo(S,P,X,u)}):y.setValue?y.setValue(c,y,u,O):Oo(c,P,X,u)}},s.setCurrentEditor=function(o){this.endEditing(),this._currentEditor=o,this.redraw()},s.isEditing=function(X,n){var y=this,i=y._currentEditor;if(!i)return!1;if(n){var m=i.info;return m?(m.column||m.property)===n&&m.data===X:!1}return!0},s.endEditing=function(){var I=this,y=I._currentEditor,O=I.getDataModel().getHistoryManager();y&&(delete I._currentEditor,y.commitValue&&y.commitValue(y.info),I.redraw(),O&&O.endInteraction())},s.beginEditing=function(Q){this.endEditing();var K=this,C=Q.column||Q.property;if(C.beginEditing)C.beginEditing(Q);else{var W=Q.data,o=Q.value,j=K.getSelectBackground(W),t=C.getEnumValues(),S=C.getSlider(),F=C.getColorPicker();if(S){var l=Ni(He.Slider,S);return l.setValue(o),l.getView().onblur=function(){K.endEditing()},l.isInstant()&&(l.onValueChanged=function(){K.setValue(W,C,l.getValue())}),xe(l,Q),void 0}if(F||C.getValueType()===Nc){var J=Ni(He.ColorPicker,F);return J.setValue(o),J.onClosed=function(){K.endEditing()},J.isInstant()&&(J.onValueChanged=function(v,k){K.setValue(W,C,k)}),xe(J,Q),J.open(),void 0}if(t){if(He.ComboBox){var k=new He.ComboBox;k.setValue(o),k.setValues(t),k.setLabels(C.getEnumLabels()),k.setIcons(C.getEnumIcons()),k.setEditable(C.isEnumEditable()),k.setStrict(C.isEnumStrict()),k.setMaxHeight(C.getEnumMaxHeight()),k.onClosed=function(){K.endEditing()},xe(k,Q),k.open()}else il(yb,Q,j,t,C);return}var p=C.getValueType();if(p===kf||Zk(o))return K.setValue(W,C,!o),void 0;if(C.getItemEditor()){var c=zo(C.getItemEditor()),Z=new c(W,C,K,Q),U=Z.getView();return U._17Q=Z,Z.setValue(o),Ye(U),xe(U,Q),Z.editBeginning&&Z.editBeginning(),void 0}il("input",Q,j,L,C)}}},_44o:function(P){P.init=function(r){var a=this,x=a.th=new Ke(r),z=a._view=cs(1);a.tv=a._tableView=r,Ah(z,x.getView()),Ah(z,r.getView()),x.mp(function(p){p.property===Te&&a.iv()}),a.iv()},P.getTableView=function(){return this.tv},P.getTableHeader=function(){return this.th},P.getDataModel=function(){return this.tv.dm()},P.getColumnModel=function(){return this.tv.getColumnModel()},P.setColumns=function(B){this.tv.setColumns(B)},P.addColumns=function(G){this.tv.addColumns(G)},P.endEditing=function(){this.tv.endEditing()},P.validateImpl=function(){var m=this,D=m.th,J=vc(D),E={x:0,y:0,width:m.getWidth(),height:J};tg(D,E),E.y=J,E.height=q(0,m.getHeight()-J),tg(m.tv,E)}},ms_vs:function(P){P._41o=function(){return this._29I.height<this._59I},P._43o=function(){var C=this;
C._41o()&&(C._58I||(x(function(){C._94O()},Ie),C.iv()),C._58I=new Date)},P._94O=function(){var k=this;if(k._58I){var M=new Date;M.getTime()-k._58I.getTime()>=Ie?(delete k._58I,k.iv()):x(function(){k._94O()},Ie)}},P._93I=function(){var N=this,y=N._27I;if(N._58I||!N._autoHideScrollBar){y||Ah(N._79O,y=N._27I=cs());var A=N._29I,u=A.height,n=N._59I,a=N.getScrollBarSize(),w=A.width-a-2,_=u*(-N.ty()/n),Y=u*(u/n),e=y.style;n>u?(Eo>Y&&(_=_+Y/2-Eo/2,0>_&&(_=0),_+Eo>u&&(_=u-Eo),Y=Eo),e.visibility=Qi,e.background=N.getScrollBarColor(),e.borderRadius=a/2+Lo,tg(y,w,_,a,Y)):e.visibility=vg}else y&&(y.style.visibility=vg)}},ms_hs:function(X){X._40o=function(){return this._29I.width<this._91I},X._42o=function(){var K=this;K._40o()&&(K._95O||(x(function(){K._94I()},Ie),K.iv()),K._95O=new Date)},X._94I=function(){var Z=this;if(Z._95O){var t=new Date;t.getTime()-Z._95O.getTime()>=Ie?(delete Z._95O,Z.iv()):x(function(){Z._94I()},Ie)}},X._92I=function(){var V=this,S=V._28I;if(V._95O||!V._autoHideScrollBar){S||Ah(V._79O,S=V._28I=cs());var e=V._29I,l=e.width,_=V._91I,o=V.getScrollBarSize(),b=e.height-o-2,T=l*(-V.tx()/_),X=l*(l/_),Z=S.style;_>l?(Eo>X&&(T=T+X/2-Eo/2,0>T&&(T=0),T+Eo>l&&(T=l-Eo),X=Eo),Z.visibility=Qi,Z.background=V.getScrollBarColor(),Z.borderRadius=o/2+Lo,tg(S,T,b,X,o)):Z.visibility=vg}else S&&(S.style.visibility=vg)}}}),Nf(Ci,_l(16,16,[{type:rp,rect:[1,1,14,14],background:Xr},{type:ve,rect:[1,1,14,14],width:1,color:wl},{type:sq,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Nf(Vq,_l(16,16,{type:ve,rect:[1,1,14,14],width:1,color:wl})),Nf(yh,_l(16,16,[{type:Oq,rect:[2,2,12,12],borderWidth:1,borderColor:wl,background:"#FFF"},{type:Oq,rect:[4,4,8,8],background:Xr}])),Nf(kb,_l(16,16,{type:Oq,rect:[2,2,12,12],borderWidth:1,borderColor:wl})),Kq._15Q=function(J){J._29I=Mb,J._59I=0,J._91I=0,J._5o=function(_){var P=this;P._30I=new Rb,P._rows=new Rb,P._rowMap={},P._31I=0,P._14I=0,P._view=cs(1),P._canvas=ll(P._view),Ah(P._view,P._79O=cs()),P.dm(_?_:new Qp)},J.getCheckIcon=function(o){var b=this.sm(),u=b.co(o);return b.sg()?fr(u?yh:kb):fr(u?Ci:Vq)},J.checkData=function(H){var e=this.sm(),D=e.co(H);e.sg()&&D||(this._32o=1,D?e.rs(H):e.as(H),delete this._32o)},J.getDataAt=function(q){q.target&&(q=this.lp(q));var z=s(q.y/this._rowHeight),V=this._rows;return 0>z||z>=V.size()?L:V.get(z)},J.onDataDoubleClicked=function(){},J.onDataClicked=function(){},J.adjustTranslateX=function(){return 0},J.adjustTranslateY=function(Y){var y=this.getHeight()-this._59I;return y>Y&&(Y=y),Y>0?0:u(Y)},J.onPropertyChanged=function(S){var v=this,r=S.property;gk[r]?v.ivm():Dc[r]||v.redraw(),r===Lm?v._42o():r===En&&v._43o()},J.getLabel=function(O){return O.toLabel()},J.getLabelFont=function(){return this._labelFont},J.getLabelColor=function(F){var x=this;if(x.isCheckMode()){if(x._focusData===F)return x._labelSelectColor}else if(x.isSelected(F))return x._labelSelectColor;return x._labelColor},J.getStartRowIndex=function(){return this._31I},J.getEndRowIndex=function(){return this._14I},J.getRowDatas=function(){return this._rows},J.getRowIndex=function(o){return this._rowMap[o._id]},J.getRowSize=function(){return this._rows.size()},J.getViewRect=function(){return je(this._29I)},J.isVisible=function(y){return this._visibleFunc?this._visibleFunc(y):!0},J.getCurrentSortFunc=function(){return this._sortFunc},J.setDataModel=function(r){var Q=this,$=Q._dataModel,S=Q._3o;$!==r&&($&&($.umm(Q.handleDataModelChange,Q),$.umd(Q.handleDataPropertyChange,Q),$.umh(Q._15o,Q),S||$.sm().ums(Q._16o,Q)),Q._dataModel=r,r.mm(Q.handleDataModelChange,Q),r.md(Q.handleDataPropertyChange,Q),r.mh(Q._15o,Q),S?S._21I(r):r.sm().ms(Q._16o,Q),Q.fp("dataModel",$,r))},J.validateModel=function(){var i=this;i._rows.clear(),i._rowMap={},i.buildChildren(i._dataModel._roots);var o=i._rows=i._rows.toList(i.isVisible,i),F=0,G=i.getCurrentSortFunc(),Y=o.size();for(G&&o.sort(G);Y>F;F++)i._rowMap[o.get(F)._id]=F},J.buildChildren=function(Y){var l=this;Y.each(function(C){l._rows.add(C),l.buildChildren(C._children)})},J.handleDataModelChange=function(){this.ivm()},J.handleDataPropertyChange=function(_){"parent"===_.property?this.ivm():this.invalidateData(_.data)},J._15o=function(){this.ivm()},J._16o=function(o){o.datas.each(this.invalidateData,this),this.onSelectionChanged(o)},J.onSelectionChanged=function(X){var c=this,n=c.sm();!c.isAutoMakeVisible()||1!==n.size()||"set"!==X.kind&&"append"!==X.kind||c._32o||c.makeVisible(n.ld())},J.makeVisible=function(V){V&&(this._23I=V,this.iv())},J.scrollToIndex=function(P){var t=this,A=t._29I,L=A.height,v=t._rowHeight,I=v*P;P>=0&&P<t._rows.size()&&L>0&&(I+v>A.y+L?t.ty(-I+L-v):I<A.y&&t.ty(-I))},J.ivm=function(){this.invalidateModel()},J.invalidateModel=function(){var q=this;q._96I||(q._96I=1,q._32I=1,delete q._24I,q.iv())},J.redraw=function(){var P=this;P._32I||(P._32I=1,delete P._24I,P.iv())},J.invalidateData=function(C){var l=this;v?l.redraw():l._32I||(l._24I||(l._24I={}),l._24I[C._id]=C,l.iv())},J.getFocusData=function(){return this._focusData},J.setFocusDataById=function(X){this.setFocusData(this.dm().getDataById(X))},J.setFocusData=function(q){var O=this,j=O._focusData;j!==q&&(O._focusData=q,O.fp("focusData",j,q),j&&O.invalidateData(j),q&&(O.invalidateData(q),O.isAutoMakeVisible()&&O.makeVisible(q)))},J.drawRowBackground=function(F,q,e,u,m,x,j){var J=this,$=J.isCheckMode();(q===J._focusData&&$||e&&!$)&&bf(F,u,m,x,j,J.getSelectBackground(q))},J.drawData=function(k,K,p){var c=this,L=c._rowHeight,G=L*p,P=c._29I,V=P.x,X=P.width;k.save(),k.beginPath(),k.rect(V,G,X,L),k.clip(),c._87o(c.drawRow(k,K,c.isSelected(K),V,G,X,L),p,V,G,X,L),k.restore(),c._rowLineVisible&&bf(k,V,G+L-1,X,1,c._rowLineColor)},J._12I=function(D){var t=this,Z=t._31I,e=t._29I,b=e.x,a=e.y,z=e.width,F=e.height;for(D.beginPath(),D.rect(b,a,z,F),D.clip(),D.clearRect(b,a,z,F),t._76o(),t._93db(D);Z<t._14I;Z++)t.drawData(D,t._rows.get(Z),Z);t._92db(D)},J._13I=function(i){for(var N,V=this,j=V._rowHeight,S=V._29I,Y=S.x,Q=S.width,A=V._31I,s=V._30I;A<V._14I;A++)N=V._rows.get(A),V._24I[N._id]&&s.add({data:N,index:A});s.isEmpty()||(i.beginPath(),s.each(function(U){i.rect(Y,U.index*j,Q,j)}),i.clip(),s.each(function(N){i.clearRect(Y,N.index*j,Q,j)}),s.each(function(n){V._77o(n.index)}),V._93db(i),s.each(function(g){V.drawData(i,g.data,g.index)}),V._92db(i),s.clear())},J.validateImpl=function(){var P=this,I=P._canvas,M=P.getWidth(),T=P.getHeight(),x=P._rowHeight,u=P._32I;(M!==I.clientWidth||T!==I.clientHeight)&&(bk(I,M,T),u=1),P._96I&&P.validateModel();var N=P._29I,c={x:-P.tx(),y:-P.ty(),width:M,height:T},b=P._rows.size(),J=Up(I),C=P._23I;u||Bs(c,N)||(u=1),P._29I=c,P._59I=b*x,P._31I=s(c.y/x),P._14I=k((c.y+c.height)/x),P._31I<0&&(P._31I=0),P._14I>b&&(P._14I=b),P._99I&&u&&P._99I(),mk(J,P.tx(),P.ty(),1),u?P._12I(J):P._24I&&P._13I(J),P._93I(),P._92I(),J.restore(),P._32I=P._24I=P._96I=L,C&&(P.scrollToIndex(P.getRowIndex(C)),delete P._23I),P.tx(P.tx()),P.ty(P.ty())}},Kq._48o=function(v){v._rootVisible=!0,v._rootData=L,v._35o=function(){this._expandMap={},this._levelMap={}},v.validateModel=function(){var J=this,D=J._rootData;J._rows.clear(),J._levelMap={},J._rowMap={},J._currentLevel=0,D?J._rootVisible?J.isVisible(D)&&J.buildData(D):J.buildChildren(D):J.buildChildren(),delete J._currentLevel},v.buildData=function(x){var M=this,_=x._id,B=M._rows;M._rowMap[_]=B.size(),B.add(x),M._levelMap[_]=M._currentLevel,M.isExpanded(x)&&(M._currentLevel++,M.buildChildren(x),M._currentLevel--)},v.buildChildren=function(x){var w=this,V=x?x._children:w._dataModel._roots,o=w.getCurrentSortFunc();o&&w.isChildrenSortable(x)?V.toList(w.isVisible,w).sort(o).each(w.buildData,w):V.each(function(_){w.isVisible(_)&&w.buildData(_)})},v.getLevel=function(O){return this._levelMap[O._id]},v.getToggleIcon=function(K){var j=this,$=j._loader,A=j._collapseIcon;return $&&!$.isLoaded(K)?A:K.hasChildren()?j.isExpanded(K)?j._expandIcon:A:L},v.isCheckMode=function(){return this._checkMode!=L},v.isChildrenSortable=function(){return!0},v.handleDataModelChange=function(R){var G=this;R.kind===Qd?delete G._expandMap[R.data._id]:R.kind===nh&&(G._expandMap={}),G.ivm()},v.toggle=function(u){var j=this;j.isExpanded(u)?j.collapse(u):j.expand(u)},v.isExpanded=function(U){return 1===this._expandMap[U._id]},v.expand=function(E){var G=this,a=G._loader;G.isExpanded(E)||(a&&!a.isLoaded(E)&&a.load(E),G._expandMap[E._id]=1,G.ivm(),G.onExpanded(E))},v.onExpanded=function(){},v.collapse=function(J){var c=this;c.isExpanded(J)&&(delete c._expandMap[J._id],c.ivm(),c.onCollapsed(J))},v.onCollapsed=function(){},v.expandAll=function(){var b=this;b._dataModel.each(function(h){h.hasChildren()&&(b._expandMap[h._id]=1)}),b.ivm()},v.collapseAll=function(){this._expandMap={},this.ivm()},v.makeVisible=function(T){if(T){var J=this;if(!J._rootData||T.isDescendantOf(J._rootData)){for(var x=T._parent;x;)J.expand(x),x=x._parent;J._23I=T,J.iv()}}},v.checkData=function(N){var d,i=this,m=i._checkMode,G=i.sm(),D=G.co(N);if(!G.sg()||!D){if(i._32o=1,m===a)D?G.rs(N):G.as(N);else if(m===yf)d=new Rb(N),d.addAll(N._children);else if("descendant"===m)d=new Rb,Qn(N,d);else if("all"===m&&(d=new Rb,Qn(N,d),!D))for(var g=N._parent;g;)d.add(g),g=g._parent;d&&(D?G.rs(d):G.as(d)),delete i._32o}},v._97I=function(T,M,$,f,d,F,l){var B=this,L=B._indent,J=B._levelMap[M._id],h=B.getIconWidth(M),K=fr(B.getToggleIcon(M));K?(f+=L*J,zh(T,K,f+L/2,d+l/2,M,B),f+=L):f+=L*(J+1),B._checkMode&&(zh(T,B.getCheckIcon(M),f+L/2,d+l/2,M,B),f+=L),B.drawIcon(T,M,f,d,h,l),B.drawLabel(T,M,f+h,d,l)}},Kq._14Q=function(b){b.getIcon=function(D){return D.getIcon()},b.getIconWidth=function($){return this.getIcon($)?this._indent:0},b.drawIcon=function(h,p,F,J,n,A){if(n){var m=this,Q=m.getBodyColor(p),X=fr(m.getIcon(p),Q);X&&(A-=m.isRowLineVisible()?1:0,$g(h,X,Ko,F,J,n,A,p,m,Q),dp(h,m.getBorderColor(p),F,J,n,A))}},b.drawLabel=function(_,$,O,w,y){var t=this;Jf(_,t.getLabel($),t.getLabelFont($),t.getLabelColor($),O,w,0,y)}},Kq._50o=function(Y){Y._98I=function(){var K=this,A=K._39o=new Qp;K._60I=new Rb,A.mm(K._17o,K),A.md(K._18o,K),A.mh(K._19o,K)},Y.setColumns=function(s){this._39o.clear(),this.addColumns(s)},Y.addColumns=function(m){var y=this._39o;m.forEach(function(U){if(!(U instanceof Dj)){var O=zo(U.className);U=Ni(O?O:Dj,U)}y.add(U)})},Y.onColumnClicked=function(){},Y.onCheckColumnClicked=function(){},Y._3Q=function(H){for(var X,u=0,r=this._60I,e=r.size();e>u;u++)if(X=r.get(u),X.column===H)return X;return L},Y.getColumnAt=function(G){var Z=this._4Q(G);return Z?Z.column:L},Y._4Q=function(W){for(var E=this,Y=W.target?E.lp(W).x:W.x,O=E._60I,A=0;A<O.size();A++){var S=O.get(A),Q=S.startX;if(Y>=Q&&Y<Q+S.column.getWidth())return S}return L},Y.getToolTip=function(h){var D=this,P=D.getDataAt(h),J=D.getColumnAt(h);return P&&J?J.getToolTip(P,D):L},Y.adjustTranslateX=function(o){var e=this.getWidth()-this._91I;return e>o&&(o=e),o>0?0:u(o)},Y._99I=function(){var D=this,I=D._29I,_=D._60I;_.clear(),D._91I=0,D._39o._roots.each(function(P){if(P.isVisible()){var N=D._91I+P.getWidth();D._91I<=I.x+I.width&&N>=I.x&&_.add({column:P,startX:D._91I}),D._91I=N}})},Y.drawData=function(U,P,e){var N=this,j=N._rowHeight,L=j*e,T=N.isSelected(P),D=N._29I,n=D.x,s=D.width;N.drawRowBackground(U,P,T,n,L,s,j),N._60I.each(function(q){var f=q.column,H=q.startX,t=f.getWidth();t>0&&!N.isEditing(P,f)&&(U.save(),U.beginPath(),U.rect(H,L,t,j),U.clip(),N._87o(N.drawCell(U,P,T,f,H,L,t,j),e,H,L,t,j),N._columnLineVisible&&bf(U,H+t-1,L,1,j,N._columnLineColor),U.restore())}),N._rowLineVisible&&bf(U,n,L+j-1,s,1,N._rowLineColor)},Y.drawCell=function($,w,b,i,y,S,u,t){var B=this;if(i.drawCell)return i.drawCell($,w,b,i,y,S,u,t,B);var r=B.getValue(w,i);Fo($,r,i,B.getLabelFont(w,i,r),B.getLabelColor(w,i,r),y,S,u,t,w,B)},Y.getColumnModel=function(){return this._39o},Y._17o=function(){this.redraw()},Y._18o=function(q){var t=this;q.data===t._sortColumn&&hf[q.property]?t.ivm():(t._42o(),t.redraw())},Y._19o=function(){this.redraw()},Y.getCurrentSortFunc=function(){var n=this,v=n._sortColumn;if(v&&v.isSortable()){var j=v.getSortFunc(),q=Zf===v.getSortOrder()?1:-1;return j||(j=lr),function(O,s){return j.call(n,n.getValue(O,v),n.getValue(s,v),O,s)*q}}return n._sortFunc},Y.isCellEditable=function(o,t){return t.isEditable()&&this.isEditable()},Y._37O=function(j,f){if(Eq(f))for(var G=this,e=G.lp(f),N=G._60I,l=G._rowHeight,O=G._29I,w=O.x,R=O.y,g=O.width,d=O.height,H=0;H<N.size();H++){var C=N.get(H),P=C.startX,L=C.column,k=L.getWidth();if(L!==G._31o&&L!==G._4o&&G.isCellEditable(j,L)&&e.x>=P&&e.x<P+k){var h={x:P,y:G.getRowIndex(j)*l,width:k,height:l},b={x:h.x+G.tx(),y:h.y+G.ty(),width:h.width,height:h.height},Z=0,M=0;return h.x<w?Z=h.x-w:h.x+h.width>w+g&&(Z=h.x+h.width-w-g),Z&&(G.tx(G.tx()-Z),b.x-=Z),h.y<R?M=h.y-R:h.y+l>R+d&&(M=h.y+l-R-d),M&&(G.ty(G.ty()-M),b.y-=M),G.beginEditing({data:j,column:L,value:G.getValue(j,L),event:f,rect:h,editorRect:b,view:G}),void 0}}}},He.BaseItemEditor=function(F,A,P,x){this._data=F,this._column=A,this._master=P,this._editInfo=x},as("BaseItemEditor",e,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var tl=G.Tab=function(){ml(tl,this)};ao("Tab",ck,{ms_ac:["view","closable","disabled"],_icon:L,_closable:!1,_disabled:!1,setParent:wg});var Dj=G.Column=function(){ml(Dj,this)};ao("Column",ck,{_46o:1,ms_ac:["accessType","valueType",Qi,Sb,Do,Qo,"align",Nc,"sortOrder",So,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Zf,_sortFunc:L,_sortable:!0,setWidth:function(U){16>U&&(U=16);var J=this._width;this._width=U,this.fp(Qo,J,U)},getToolTip:function(U,b){return this.formatValue(b.getValue(U,this))}});var nq=G.Property=function(){ml(nq,this)};ao("Property",ck,{_46o:1,ms_ac:["accessType","valueType",Sb,Do,"categoryName",Nc,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:L,getToolTip:function(m,H,V){var y=this;return H?y.formatValue(V.getValue(m,y)):V.getPropertyName(y)}}),He.AccordionView=function(){var X=this;X._20o={},X._21o=new Rb,X._10o=L,X._9o=L,X._11o=L,X._view=cs(),X.iv()},as("AccordionView",e,{ms_v:1,ms_fire:1,ms_ac:[hn,ii,"titleHeight",An,oo,"titleBackground","selectWidth",_g,"orientation","separatorColor"],_expandIcon:y.accordionViewExpandIcon,_collapseIcon:y.accordionViewCollapseIcon,_titleHeight:Tq,_labelColor:y.accordionViewLabelColor,_labelFont:y.accordionViewLabelFont,_titleBackground:y.accordionViewTitleBackground,_selectBackground:y.accordionViewSelectBackground,_selectWidth:y.accordionViewSelectWidth,_orientation:"v",_separatorColor:y.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(k,Y,M,D){var j=this,C=cs();if(j._20o[k])throw k+" already exists";C.onmousedown=tj,C.style.cursor=ak,C.addEventListener(E?kd:Vn,function(g){tj(g)},!1),C.addEventListener(E?ff:qg,function(P){tj(P),Eq(P)&&(j._10o===k?j.collapse():j.expand(k))},!1),Ah(j._view,C),j._20o[k]={content:Y,div:C,canvas:ll(C),icon:D},j._21o.add(k),M&&j.expand(k),j.iv()},remove:function(E){var K=this,s=K._20o[E];s&&(Wn(s.div),delete K._20o[E],K._21o.remove(E),K.iv())},clear:function(){var K=this;K._20o={},K._21o.clear(),K.iv()},isExpanded:function(z){return this._10o===z},expand:function(O){var M=this;M._20o[O]&&M._10o!==O&&(M._10o=O,M.onExpanded(O),M.iv())},onExpanded:function(){},collapse:function(){var i=this;i._10o&&(i.onCollapsed(i._10o),delete i._10o,i.iv())},onCollapsed:function(){},initCanvas:function(A,o,c){bk(A,o,c);var Q=Up(A);return mk(Q,0,0,1),Q.clearRect(0,0,o,c),Q},drawTitle:function(C,L,e,w,o){var b=this,D=fr(o.icon),V=b.isExpanded(L),q=b._titleHeight,u=b._titleBackground,G=b._selectWidth,k=b._separatorColor,P=fr(V?b._expandIcon:b._collapseIcon),i=G+4;bf(C,0,0,e,w,u),V&&G&&bf(C,0,0,G,w,b._selectBackground),(V||b._21o.get(b._21o.size()-1)!==L)&&bf(C,0,w-1,e,1,k?k:Sd(u)),D&&(zh(C,D,i+Cf(D)/2,q/2),i+=Cf(D)+2),Jf(C,L,b.getLabelFont(L),b.getLabelColor(L),i,0,0,q),P&&zh(C,P,e-Cf(P)/2-4,q/2)},validateImpl:function(){var p=this,y=p._view,c=0,S=0,I=p.getWidth(),C=p.getHeight(),K=p._titleHeight,J=p._21o.size()*K,A=p._11o,j=p._9o;delete p._11o,delete p._9o,p._21o.each(function(m){var n,h,M=p._20o[m],A=M.content,g=p._10o===m;bg(p)?(tg(M.div,c,0,K,C),n=p.initCanvas(M.canvas,K,C),Ei(n,0,C),vn(n,-B),p.drawTitle(n,m,C,K,M),n.restore(),g?(h=q(0,I-J),A&&(p._11o=A,p._9o=di(A),tg(A,c+K,0,h,C)),c+=K+h):c+=K):(tg(M.div,0,S,I,K),n=p.initCanvas(M.canvas,I,K),p.drawTitle(n,m,I,K,M),n.restore(),g?(h=q(0,C-J),A&&(p._11o=A,p._9o=di(A),tg(A,0,S+K,I,h)),S+=K+h):S+=K)});var f=p._9o;A&&A!==p._11o&&A.endEditing&&A.endEditing(),f&&f!==j&&Ah(y,f),j&&j!==f&&Wn(j)}}),He.SplitView=function(K,k,s,N){var H=this,r=H._dividerDiv=cs(),U=H._60O=ll(),v=H._61O=ll(),C=U.style,T=v.style;H._view=cs(1),Ah(H._view,r),C.msTouchAction=Cj,C.pointerEvents=Cj,C.cursor=ak,T.msTouchAction=Cj,T.pointerEvents=Cj,T.cursor=ak,K&&H.setLeftView(K),k&&H.setRightView(k),s&&H.setOrientation(s),N!=L&&H.setPosition(N),H.setStatus(Er),new Jr(H)},as("SplitView",e,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:y.splitViewDividerSize,_dividerBackground:y.splitViewDividerBackground,_dragOpacity:y.splitViewDragOpacity,_toggleIcon:y.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(H,Q){var C=this,A=C._position;isNaN(H)||(Q||(C._82O=0>H?-1:H>1?1:0),C._position=H,C.fp(hm,A,H))},getLeftView:function(){return this._leftView},setLeftView:function(r){var J=this,k=J._leftView,w=J._view;if(J._leftView!==r){if(k&&k!==J._rightView){var R=di(k);R.parentNode===w&&Wn(R)}if(J._leftView=r,r){var V=di(r);V.parentNode!==w&&w.insertBefore(V,J._dividerDiv)}J.fp("leftView",k,r)}},getRightView:function(){return this._rightView},setRightView:function(l){var $=this,_=$._rightView,r=$._view;if($._rightView!==l){if(_&&_!==$._leftView){var o=di(_);o.parentNode===r&&Wn(o)}if($._rightView=l,l){var e=di(l);e.parentNode!==r&&r.insertBefore(e,$._dividerDiv)}$.fp("rightView",_,l)}},validateImpl:function(){var Z=this,b=Z._draggable,n=Z._position,T=Z.getWidth(),o=Z.getHeight(),F=Z._dividerSize,e=Z._dividerBackground,s=E?18:8,y=Z._dividerDiv,g=Z._82O,M=Z._60O,x=Z._61O,W=Z._toggleIcon,z=Z._status,t=y.style,G=null,v=E?20:4,V=W.comps[0];F>=s||0===F?Z._coverDiv&&(Wn(Z._coverDiv),delete Z._coverDiv):Z._coverDiv||(Z._coverDiv=cs(),C&&(Z._coverDiv.style.background=lq),Ah(y,Z._coverDiv)),Z._togglable?M.parentNode||(Ah(y,M),Ah(y,x)):(Wn(M),Wn(x));var K=Z._coverDiv,i=Z._leftView,l=Z._rightView;if(bg(Z)){if(F>T&&(F=T),z===Er)if(1===g)var d=n,R=q(0,T-F-d);else-1===g?(R=-n,d=q(0,T-F-R)):(d=u((T-F)*n),R=q(0,T-F-d));else"cl"===z?(d=0,R=q(0,T-F)):"cr"===z&&(R=0,d=q(0,T-F));i&&tg(i,0,0,d,o),l&&tg(l,d+F,0,R,o),tg(y,d,0,F,o),Z._22o=d,K&&(tg(K,F/2-s/2,0,s,o),K.style.cursor=b?Rd:""),y.style.cursor=b?Rd:"";var S=y.clientHeight/2,X=y.clientWidth;bk(M,X,X),tg(M,0,S-X-v,X,X),G=Up(M),mk(G,0,0,1),V.rotation=-B,nj(G,W,0,0,X,X),G.restore(),bk(x,X,X),tg(x,0,S+v,X,X),G=Up(x),mk(G,0,0,1),V.rotation=B,nj(G,W,0,0,X,X),G.restore()}else{if(F>o&&(F=o),z===Er)if(1===g)var w=n,P=q(0,o-F-w);else-1===g?(P=-n,w=q(0,o-F-P)):(w=u((o-F)*n),P=q(0,o-F-w));else"cl"===z?(w=0,P=q(0,o-F)):"cr"===z&&(P=0,w=q(0,o-F));i&&tg(i,0,0,T,w),l&&tg(l,0,w+F,T,P),tg(y,0,w,T,F),Z._22o=w,K&&(tg(K,0,F/2-s/2,T,s),K.style.cursor=b?Ij:""),t.cursor=b?Ij:"";var O=y.clientWidth/2,X=y.clientHeight;bk(M,X,X),tg(M,O-X-v,0,X,X),G=Up(M),mk(G,0,0,1),V.rotation=0,nj(G,W,0,0,X,X),G.restore(),bk(x,X,X),tg(x,O+v,0,X,X),G=Up(x),mk(G,0,0,1),V.rotation=p,nj(G,W,0,0,X,X),G.restore()}t.background=e}});var Jr=function(U){this.sv=U,this.addListeners()};th(Jr,e,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(T){var r=this,y=r.sv,a=y._dividerDiv,Y=y._60O,A=y._61O,C=y._status,J=T.target;if(J===Y)C===Er?y.setStatus("cl"):"cr"===C&&y.setStatus(Er);else if(J===A)C===Er?y.setStatus("cr"):"cl"===C&&y.setStatus(Er);else if(og(T)&&(J===a||J===y._coverDiv)&&(tj(T),y.isDraggable())){r.resizeDiv=cs();var F=r.resizeDiv.style,f=a.style;F.left=f.left,F.top=f.top,F.width=f.width,F.height=f.height,F.opacity=y.getDragOpacity(),F.background=y.getDividerBackground(),r._85o=r._86o=bg(y)?mh(T).x:mh(T).y,Ah(r.getView(),r.resizeDiv),r._clientPoint=mh(T),Qj(r,T)}},handleWindowTouchMove:function(Y){if(og(Y)){var V=this,S=V.sv,H=S._dividerSize,T=V.resizeDiv.style,K=S.getWidth(),M=S.getHeight(),h=S._22o-V._86o;bg(S)?(V._85o=mh(Y).x,h+=V._85o,h>K-H&&(h=K-H),0>h&&(h=0),T.left=h+Lo):(V._85o=mh(Y).y,h+=V._85o,h>M-H&&(h=M-H),0>h&&(h=0),T.top=h+Lo)}},handleWindowTouchEnd:function(t){var h=this,V=h.sv,I=V._22o-h._86o+h._85o,d=V._dividerSize,s=bg(V)?V.getWidth():V.getHeight(),A=V._82O,z=el(h._clientPoint,mh(t));z>1&&(V.setStatus(Er),0>I&&(I=0),I>s-d&&(I=s-d),s!==d&&(1===A?V.setPosition(I,1):-1===A?V.setPosition(I-s+d,1):V.setPosition(I/(s-d),1))),Wn(h.resizeDiv),h.resizeDiv=h._85o=h._clientPoint=L},handle_mousedown:function(w){Eq(w)&&this.handle_touchstart(w)},handleWindowMouseMove:function(N){this.handleWindowTouchMove(N)},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)}}),He.TabView=function(){var f=this,$=f._view=cs(1),p=f._91O=cs(1),A=f._tabModel=new Qp,X=A.sm(),x=f.invalidate;f._7o=new Rb,f._canvas=ll(p),Ah($,p),Ah($,f._92O=cs(1)),X.setSelectionMode(R),X.ms(x,f),A.mm(x,f),A.md(x,f),A.mh(x,f),new rg(f),f.iv()},as("TabView",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",An,oo,"tabBackground","selectWidth",_g,"moveBackground","insertColor"],_tabPosition:Tg,_tabHeight:Tq,_tabGap:y.tabViewTabGap,_labelColor:y.tabViewLabelColor,_labelFont:y.tabViewLabelFont,_tabBackground:y.tabViewTabBackground,_selectWidth:y.tabViewSelectWidth,_selectBackground:y.tabViewSelectBackground,_moveBackground:y.tabViewMoveBackground,_insertColor:y.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(F,S,y){var b=new tl,A=this._tabModel;return b.setName(F),b.setView(S),A.add(b),y&&A.sm().ss(b),b},getLabel:function(S){return S.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(G){this._23o=G,this.iv()},get:function(Q){var C=this,T=C._tabModel;if(aq(Q))return T._roots.get(Q);if(Un(Q)){var i;return T.each(function(j){Q===C.getLabel(j)&&(i=j)}),i}return Q instanceof tl?Q:L},select:function(f){this._tabModel.sm().ss(this.get(f))},remove:function(B){var p=this;if(B=p.get(B)){var y=p._tabModel,J=y._roots.indexOf(B);p._tabModel.remove(B),p._12Q(--J)}},getCurrentTab:function(){return this._8o},hideTabView:function($,W){W.parentNode===this._92O&&(pc(W)?(W.style.display=om,W._tab_=$):Wn(W),ec())},showTabView:function(Q,k){pc(k)&&(k.style.display="block",k._tab_=Q),k.parentNode!==this._92O&&(Ah(this._92O,k),ec())},_24o:function(){var s,L=this,q=L._8o,Z=L._9o,$=L._tabModel.sm().ld();$&&(s=di($.getView())),s!==Z&&(Z&&(q.getView().endEditing&&q.getView().endEditing(),L.hideTabView(q,Z)),s&&L.showTabView($,s)),L._8o=$,L._9o=s,q!==$&&L.onTabChanged(q,$)},onTabChanged:function(){},onTabClosed:function(G,V){this._12Q(--V)},_12Q:function(C){var $=this,o=$._tabModel,Z=o.size();if(Z&&!o.sm().ld()){C==L&&(C=0),C>=Z&&(C=Z-1),0>C&&(C=0);for(var z=C;z>=0;z--){var f=$.get(z);if(!f.isDisabled())return $.select(f),f}for(z=C+1;Z>z;z++)if(f=$.get(z),!f.isDisabled())return $.select(f),f}},_9Q:function(Z){var K=4,s=fr(Z.getIcon());s&&(K+=Cf(s,Z)+4);var y=this.getLabel(Z);return y&&(K+=Ki(this.getLabelFont(Z),y).width+4),Z.isClosable()&&(K+=10),K},_10Q:function(i,E,$,c,v,D,G){var T,m=this,o=m._tabPosition,y=$+4,w=m._selectWidth,H=fr(E.getIcon()),C=E.isDisabled(),b=m.getLabelColor(E),J=m.getLabelFont(E),f=m.getLabel(E),a=m._selectBackground,k=o===d+"-vertical",r=o===S+"-vertical";(k||r)&&(y=c+4),C&&(i.globalAlpha=Rr),bf(i,$,c,v,D,G),E===m._8o&&w&&(o===Tg?bf(i,$,c+D-w,v,w,a):o===d?bf(i,$+v-w,c,w,D,a):o===S?bf(i,$,c,w,D,a):k?bf(i,$+v-w,c,w,D,a):r?bf(i,$,c,w,D,a):bf(i,$,c,v,w,a));var _=v/2;if(k&&(Ei(i,_,c+D/2),vn(i,p),Ei(i,-_,-c-D/2)),H){var u=Si(H,E),N=Cf(H,E);if(k||r){var Y=$+v/2,I=y+u/2;Ei(i,Y,I),vn(i,B),Ei(i,-Y,-I),zh(i,H,$+v/2,y+u/2,E,m),Ei(i,Y,I),vn(i,-B),Ei(i,-Y,-I),y+=u+4}else zh(i,H,y+N/2,c+D/2,E,m),y+=N+4}return k||r?(Ei(i,v/2,y+v/2),vn(i,B),Ei(i,-v/2,-y-v/2),Jf(i,f,J,b,$,y,D,v),Ei(i,v/2,y+v/2),vn(i,-B),Ei(i,-v/2,-y-v/2)):Jf(i,f,J,b,y,c,v,D),k&&(Ei(i,_,c+D/2),vn(i,-p),Ei(i,-_,-c-D/2)),E.isClosable()&&(i.strokeStyle=b,i.lineWidth=1,i.beginPath(),r?(i.moveTo($+v-10,c+D-4),i.lineTo($+v-4,c+D-10),i.moveTo($+v-4,c+D-4),i.lineTo($+v-10,c+D-10),i.stroke(),T={x:$+v-12,y:c+D-12,width:12,height:12}):(i.moveTo($+v-10,c+4),i.lineTo($+v-4,c+10),i.moveTo($+v-4,c+4),i.lineTo($+v-10,c+10),i.stroke(),T={x:$+v-12,y:c,width:12,height:12})),C&&(i.globalAlpha=1),T},validateImpl:function(){var l=this;l._24o();var x,y=l._canvas,v=l._tabPosition,c=l._91O,e=l._92O,U=l._tabModel,j=l.getWidth(),_=l.getHeight(),u=l._tabHeight,H=l._7o,n=l._tabGap,V=v===Tg,t=v===d,F=v===Po,Z=v===S,A=v===d+"-vertical",g=v===S+"-vertical",s=l._23o,X=0;if((t||Z)&&U._roots.each(function(A){X=q(l._9Q(A),X)}),V?(tg(c,0,0,j,u),x={x:0,y:u,width:j,height:q(0,_-u)}):t?(tg(c,0,0,X,_),x={x:X,y:0,width:q(0,j-X),height:_}):Z?(tg(c,j-X,0,X,_),x={x:0,y:0,width:q(0,j-X),height:_}):A?(tg(c,0,0,u,_),x={x:u,y:0,width:q(0,j-u),height:_}):g?(tg(c,j-u,0,u,_),x={x:0,y:0,width:q(0,j-u),height:_}):(tg(c,0,_-u,j,u),x={x:0,y:0,width:j,height:q(0,_-u)}),tg(e,x),A||g){l._9o&&(x.x=0,tg(l._8o.getView(),x)),bk(y,u,_);var N=Up(y),h=0;if(mk(N,0,l.ty(),1),N.clearRect(0,0,u,_),H.clear(),U._roots.each(function(W){var $,X=l._9Q(W);s&&s.tab===W||($=l._10Q(N,W,0,h,u,X,l._tabBackground),$&&g&&($.x=j-12)),H.add({_75o:$,tab:W,startY:h,endY:h+X,height:X}),h+=X+n}),l._23Q=q(0,h-n),s){var J=s.position;l._10Q(N,s.tab,0,s.startY,u,s.height,l._moveBackground),bf(N,0,J,u,1,l._insertColor)}N.restore(),l.ty(l.ty())}else if(t||Z){l._9o&&(x.x=0,tg(l._8o.getView(),x)),bk(y,X,_);var N=Up(y),h=0;if(mk(N,0,l.ty(),1),N.clearRect(0,0,X,_),H.clear(),U._roots.each(function(L){var x;s&&s.tab===L||(x=l._10Q(N,L,0,h,X,u,l._tabBackground),x&&Z&&(x.x=j-12)),H.add({_75o:x,tab:L,startY:h,endY:h+u,height:u}),h+=u+n}),l._23Q=q(0,h-n),s){var J=s.position;l._10Q(N,s.tab,0,s.startY,X,s.height,l._moveBackground),bf(N,0,J,X,1,l._insertColor)}N.restore(),l.ty(l.ty())}else{l._9o&&(x.y=0,tg(l._8o.getView(),x)),bk(y,j,u);var N=Up(y),a=0;if(mk(N,l.tx(),0,1),N.clearRect(0,0,j,u),H.clear(),U._roots.each(function(S){var m,P=l._9Q(S);s&&s.tab===S||(m=l._10Q(N,S,a,0,P,u,l._tabBackground),m&&F&&(m.y=_-u)),H.add({_75o:m,tab:S,startX:a,endX:a+P,width:P}),a+=P+n}),l._64I=q(0,a-n),s){var J=s.position;l._10Q(N,s.tab,s.startX,0,s.width,u,l._moveBackground),qb(N,l._insertColor,J,0,u)}N.restore(),l.tx(l.tx())}for(var R=[],G=e.children,K=0;K<G.length;K++){var z=G[K],b=z._tab_;b&&!U.contains(b)&&R.push(z)}R.forEach(function(g){e.removeChild(g)})}});var rg=function(y){this.tv=y,this.addListeners()};th(rg,e,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(m){this.handleScroll(m,10*(m.wheelDelta/40))},handle_DOMMouseScroll:function(y){this.handleScroll(y,10*-y.detail)},handleScroll:function(C,j){tj(C);var h=this.tv,k=h._tabPosition;!h._40o()||k!==Tg&&k!==Po||h.tx(this.tv.tx()+j),!h._41o()||k!==d&&k!==S&&k!==d+"-vertical"&&k!==S+"-vertical"||h.ty(this.tv.ty()+j)},_8Q:function(w){var s,P,Y=this.tv,i=Y._tabPosition,n=Y._7o;if(i===Tg||i===Po){var G=Y.lp(w).x;for(s=0;s<n.size();s++)if(P=n.get(s),P.startX<=G&&G<=P.endX)return P}else if(i===d||i===S||i===d+"-vertical"||i===S+"-vertical"){var c=Y.lp(w).y;for(s=0;s<n.size();s++)if(P=n.get(s),P.startY<=c&&c<=P.endY)return P}return L},isClickable:function(R){var w=this.tv,i=w._tabPosition,W=this._73o=this._8Q(R);return!w._40o()||i!==Tg&&i!==Po?!w._41o()||i!==d&&i!==S&&i!==d+"-vertical"&&i!==S+"-vertical"?W&&(!W.tab.isDisabled()||w.isMovable()):!0:!0},handle_mousemove:function(z){var s=this;pl?s._74o=s._8Q(z):s.getView().style.cursor=s.isClickable(z)?ak:""},handle_mousedown:function(s){this.handle_mousemove(s),this.handle_touchstart(s)},handle_touchstart:function(m){var E=this,A=E.tv,z=A._tabPosition;tj(m),E.isClickable(m)&&(z===Tg||z===Po?(E.x=mh(m).x,E.lp=A.lp(m),E.tx=A.tx()):(E.y=mh(m).y,E.lp=A.lp(m),E.ty=A.ty()),Qj(E,m))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(W){var V,K=this,o=K.tv,w=o._tabPosition,a=K._73o;if(w===Tg||w===Po){if(V=mh(W).x-K.x,!K._25o&&!K.moving&&Z(V)>2&&(o._40o()&&!ee(W)?K._25o=1:a&&o.isMovable()&&(K.moving=1)),K._25o)o.tx(K.tx+V);else if(K.moving){var M=K.lp.x+V,U=o._tabGap/2;o._7o.each(function($){var P=$.endX,G=M-$.startX<P-M;M>=$.startX&&P>=M&&o._7Q({tab:a.tab,startX:a.startX+V,width:a.width,front:G,insertTab:$.tab,position:G?q(0,$.startX-U):g(o._64I,P+U)})})}}else if(V=mh(W).y-K.y,!K._25o&&!K.moving&&Z(V)>2&&(o._41o()&&!ee(W)?K._25o=1:a&&o.isMovable()&&(K.moving=1)),K._25o)o.ty(K.ty+V);else if(K.moving){var n=K.lp.y+V,U=o._tabGap/2;o._7o.each(function(e){var $=e.endY,d=n-e.startY<$-n;n>=e.startY&&$>=n&&o._7Q({tab:a.tab,startY:a.startY+V,height:a.height,front:d,insertTab:e.tab,position:d?q(0,e.startY-U):g(o._23Q,$+U)})})}},handleWindowMouseUp:function(M){this.handleWindowTouchEnd(M)},handleWindowTouchEnd:function(){var s=this,$=s.tv,l=$._tabPosition,w=$.getTabModel(),H=w._roots,v=s._73o;if(s.moving){var T=$._23o;if(T&&T.insertTab!==T.tab){var e=T.tab,N=H.remove(e),X=H.indexOf(T.insertTab);X>=0&&(T.front||X++,X<=H.size()&&(H.add(e,X),w._38I(e,N,X)))}$._7Q(L),delete s.moving}else if(!s._25o&&v){e=v.tab;var Z=s._74o;if(!Z||Z.tab===e)if(!e.isDisabled()&&Zd(v._75o,s.lp)){var h=H.indexOf(e);w.remove(e),$.onTabClosed(e,h)}else e.isDisabled()||$._8o===e||w.sm().ss(e)}s._25o=s._73o=s._74o=l===Tg||l===Po?s.x=s.lp=s.tx=L:s.y=s.lp=s.ty=L}}),He.PropertyView=function($){var N=this;N._view=cs(1),N._canvas=ll(N._view),Ah(N._view,N._79O=cs()),N._rows=new Rb,N._28o=new Rb,N._26o={},N._26Q={};var W=N._propertyModel=new Qp,s=N.ivm;W.mm(s,N),W.md(s,N),W.mh(s,N),N.dm($?$:new Qp),new Ho(N)},as("PropertyView",e,{ms_ac:[An,Uf,oo,Sb,Do,"categorizable",Qk,So,iq,hn,ii,Cr,Bm,Hg,"selectRowIndex",_g,"background",pn,De,vm,Ge,Ig],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Mb,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Lq,_background:y.propertyViewBackground,_expandIcon:y.propertyViewExpandIcon,_collapseIcon:y.propertyViewCollapseIcon,_scrollBarColor:Db,_scrollBarSize:wn,_autoHideScrollBar:Ri,_selectBackground:y.propertyViewSelectBackground,_rowHeight:em,_rowLineVisible:y.propertyViewRowLineVisible,_rowLineColor:y.propertyViewRowLineColor,_10I:.5,_columnLineVisible:y.propertyViewColumnLineVisible,_columnLineColor:y.propertyViewColumnLineColor,_labelColor:y.propertyViewLabelColor,_labelSelectColor:y.propertyViewLabelSelectColor,_labelFont:y.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(n){0>n&&(n=0),n>1&&(n=1);var D=this,y=D._10I;D._10I=n,D.fp("columnPosition",y,n)},getPropertyName:function(u){return u.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(u,g,y){return y===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(m,e){return e===this._selectRowIndex?this._labelSelectColor:m.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var d=this.getHeight()-this._59I;return d>t&&(t=d),t>0?0:u(t)},isExpanded:function(Q){if(!Q)return!0;var c=this._26o[Q];return c?c.isExpanded:!(this._26Q[Q]===!1)},toggle:function(S){var X=this;
X.isExpanded(S)?X.collapse(S):X.expand(S)},expandAll:function(){this.validate();for(var q in this._26o)this.expand(q)},expand:function(w){if(w&&w!==om){var F=this,T=F._26o[w];T&&!T.isExpanded&&(T.isExpanded=!0,F.onExpanded(w),F.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var x in this._26o)this.collapse(x)},collapse:function(n){if(n&&n!==om){var m=this,C=m._26o[n];C&&C.isExpanded&&(C.isExpanded=!1,m.onCollapsed(n),m.ivm())}},onCollapsed:function(){},getCategoryName:function(q){if(!this.isCategorizable())return om;var $=q.getCategoryName();return $?$:om},getPropertyModel:function(){return this._propertyModel},setDataModel:function(f){var E=this,e=E._dataModel;e!==f&&(e&&(e.umd(E.handlePropertyChange,E),E._3o||e.sm().ums(E.ivm,E)),E._dataModel=f,f.md(E.handlePropertyChange,E),E._3o?E._3o._21I(f):f.sm().ms(E.ivm,E),E.fp(Ck,e,f))},isVisible:function(C){return this._visibleFunc?this._visibleFunc(C):!0},onPropertyChanged:function(p){var o=this,E=p.property;Df[E]?o.ivm():o.iv(),E===En&&o._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Tb},handlePropertyChange:function(u){this._27o===u.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var B=this;B._96I||(B.setSelectRowIndex(-1),B._96I=1,B.iv())},redraw:function(){this.iv()},validateModel:function(){var e=this,d=e._rows,f=e._28o,Y={},P=new Rb,S=e._27o;e.updateCurrentData(),S!==e._27o&&e.endEditing(),d.clear(),f.clear(),e.getRawProperties().each(function(B){if(e.isVisible(B)){P.add(B);var W=e.getCategoryName(B);Y[W]||(f.add(W,W===om?0:Q),Y[W]={isExpanded:e.isExpanded(W),properties:new Rb})}}),e._sortFunc&&P.sort(e._sortFunc);for(var b in e._26o)e._26Q[b]=e.isExpanded(b);e._26o=Y,f.each(function(J){J!==om&&d.add(J);var n=Y[J];n.isExpanded&&P.each(function(z){e.getCategoryName(z)===J&&(n.properties.add(z),d.add({property:z,data:e._27o}))},e)})},validateImpl:function(){var F=this;F._76o(),F._96I&&(F.validateModel(),delete F._96I);var K=F._canvas,A=F.getWidth(),n=F.getHeight(),I=-F.ty(),X=F._rowHeight,e=F._indent,j=A-e,q=F._rows,Z=q.size(),T=F._9I=e+j*F._10I,V=F._59I=Z*X;bk(K,A,n),F._29I={x:0,y:I,width:A,height:n},F._31I=s(I/X),F._14I=k((I+n)/X),F._31I<0&&(F._31I=0),F._14I>Z&&(F._14I=Z);var o,z=Up(K),y=F._background;mk(z,0,-I,1),z.beginPath(),z.rect(0,I,A,n),z.clip(),z.clearRect(0,I,A,n),F._93db(z),y&&bf(z,0,0,e,V,y);for(var Q=F._31I;Q<F._14I;Q++){var v=q.get(Q),I=X*Q;if(Un(v))y&&bf(z,e,I,j,X,y),o=fr(F.isExpanded(v)?F._expandIcon:F._collapseIcon),o&&$g(z,o,Ko,0,I,e,X),z.save(),z.beginPath(),z.rect(e,I,j,X),z.clip(),F.drawCategoryName(z,v,Q,e,I,j,X),z.restore();else{var p=v.property,S=v.data,o=fr(p.getIcon()),Y=F._selectRowIndex===Q?F.getSelectBackground():L;if(o&&$g(z,o,Ko,0,I,e,X),Y&&bf(z,e,I,j,X,Y),z.save(),z.beginPath(),z.rect(e,I,T-e,X),z.clip(),F.drawPropertyName(z,p,Q,e,I,T-e,X),z.restore(),!F.isEditing(S,p)){var r=T+1,M=A-T-1;z.save(),z.beginPath(),z.rect(r,I,M,X),z.clip(),F._87o(F.drawPropertyValue(z,p,F.getValue(S,p),Q,r,I,M,X,S),Q,r,I,M,X),z.restore()}}F._rowLineVisible&&bf(z,e,I+X-1,j,1,F._rowLineColor)}F._columnLineVisible&&(bf(z,T,0,1,V,F._columnLineColor),bf(z,A-1,0,1,V)),F._92db(z),F._93I(),z.restore(),F.ty(F.ty())},drawCategoryName:function(X,m,c,Q,N,D,S){Jf(X,m,this.getCategoryFont(m),this.getCategoryColor(m),Q,N,D,S)},drawPropertyName:function(z,t,p,T,u,L,g){return t.drawPropertyName?(t.drawPropertyName(z,t,p,T,u,L,g,this),void 0):(Jf(z,this.getPropertyName(t),this.getPropertyFont(t,p),this.getPropertyColor(t,p),T,u,L,g),void 0)},drawPropertyValue:function(d,x,h,L,N,r,t,z,u){return x.drawPropertyValue?x.drawPropertyValue(d,x,h,L,N,r,t,z,u,this):(Fo(d,h,x,this.getLabelFont(x,h,L),this.getLabelColor(x,h,L),N,r,t,z,u,this),void 0)},isPropertyEditable:function(v){return v.isEditable()&&this.isEditable()},setProperties:function(M){this._propertyModel.clear(),this.addProperties(M)},addProperties:function(y){if(y){var d=this._propertyModel;y.forEach(function(W){if(!(W instanceof nq)){var y=zo(W.className);W=Ni(y?y:nq,W)}d.add(W)})}},getRowIndexAt:function(t){var A=this,B=s(A.lp(t).y/A._rowHeight);return B>=0&&B<A._rows.size()?B:-1},getPropertyAt:function(R){var r=this,D=r.getRowIndexAt(R);return D>=0?r._rows.get(D).property:L},getToolTip:function(q){var E=this,j=E.getPropertyAt(q),k=E._27o;return j&&k?j.getToolTip(k,E._9I<E.lp(q).x,E):L}});var Ho=function(f){this.pv=f,this.addListeners()};th(Ho,e,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(M){this.getView().style.cursor=M},clear:function(){var J=this;J._62O=J.cp=J.ty=J.p=L,J.setCursor(a)},handle_mousedown:function(b){this.handle_touchstart(b)},handle_touchstart:function(K){var z=this,J=z.pv;tj(K),J.setFocus(K)&&(Eq(K)?(z.cp=mh(K),z.ty=J.ty(),z.p=J.getColumnPosition(),z.handle_touchmove(K)):J.setSelectRowIndex(J.getRowIndexAt(K)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(d){this.handle_touchend(d)},handle_touchend:function(L){var W=this;if(W.cp&&!W._62O){var v=W.pv,O=v.lp(L),P=O.x,x=O.y,j=v._indent,N=v.getRowIndexAt(L),C=v._9I;if(N>=0){var B=v._rowHeight,w=B*N,l=v._rows.get(N),S=l.property;if(Un(l))fr(v.isExpanded(l)?v._expandIcon:v._collapseIcon)&&P>=0&&j>=P&&x>=w&&w+B>=x?v.toggle(l):Br(L)&&v.toggle(l);else if(P>C&&v.isPropertyEditable(S)){var I={x:C+1,y:w,width:v.getWidth()-C-1,height:B},U={x:I.x+v.tx(),y:I.y+v.ty(),width:I.width,height:I.height},u=0,d=v._29I;I.y<d.y?u=I.y-d.y:I.y+B>d.y+d.height&&(u=I.y+B-d.y-d.height),u&&(v.ty(v.ty()-u),U.y-=u),v.beginEditing({data:l.data,property:S,value:v.getValue(l.data,S),event:L,rect:I,editorRect:U,view:v})}}v.setSelectRowIndex(N)}W.clear()},handleWindowMouseMove:function(j){this.handleWindowTouchMove(j)},handleWindowTouchMove:function(e){var T=this,E=T.pv,D=T.ty,L=T.cp,F=mh(e),O=T._62O;if("p"===O)E.setTranslateY(D+F.y-L.y);else if("c"===O){var p=E.getWidth()-E._indent;if(p>16){var g=T.p-(L.x-F.x)/p,k=16/p;k>g&&(g=k),g>1-k&&(g=1-k),E.setColumnPosition(g)}}else"s"===O&&E.setTranslateY(D+(L.y-F.y)*E._59I/E._29I.height)},handle_mousemove:function(w){this.handle_touchmove(w)},handle_touchmove:function(s){if(!pl&&Eq(s)){var N=this,$=N.pv,p=Z($.lp(s).x-$._9I)<=(E?8:3);N.cp?N._62O||(p?(N._62O="c",Qj(N)):Z(mh(s).y-N.cp.y)>=2&&(N._62O=N.isV(s)?"s":"p",Qj(N))):(p?N.setCursor(Rd):N.setCursor(a),N.isV(s)&&$._43o())}},isV:function(K){var X=this.pv,L=X._29I;return X._41o()&&L.x+L.width-X.lp(K).x<Bh},handle_mousewheel:function(g){this.handleScroll(g,g.wheelDelta/40)},handle_DOMMouseScroll:function(O){2===O.axis&&this.handleScroll(O,-O.detail)},handleScroll:function(W,n){var r=this.pv;tj(W),r.endEditing(),r.translate(0,n*r.getRowHeight())},handle_keydown:function(V){var r=this.pv,F=r._rows.size(),_=r._selectRowIndex+(xr(V)?-1:1);(xr(V)||wc(V))&&(0>_&&(_=0),_>=F&&(_=F-1),r.setSelectRowIndex(_))}}),He.ListView=function(W){this._5o(W),new Mo(this)},as("ListView",e,{ms_ac:[An,Uf,oo,pn,Qk,De,vm,So,iq,Cr,Bm,Hg,Nl,_g],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Lq,_rowHeight:em,_rowLineVisible:y.listViewRowLineVisible,_rowLineColor:y.listViewRowLineColor,_scrollBarColor:Db,_scrollBarSize:wn,_autoMakeVisible:Kh,_autoHideScrollBar:Ri,_selectBackground:y.listViewSelectBackground,_labelColor:y.listViewLabelColor,_labelSelectColor:y.listViewLabelSelectColor,_labelFont:y.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(s){var M=this,Y=M._checkMode;M._checkMode=s,M.fp(Dd,Y,s)},drawRow:function(q,P,L,f,A,O,J){var m=this,h=0,E=m._indent,s=m.getIconWidth(P);m.drawRowBackground(q,P,L,f,A,O,J),m._checkMode&&(zh(q,m.getCheckIcon(P),h+E/2,A+J/2,P,m),h+=E),m.drawIcon(q,P,h,A,s,J),m.drawLabel(q,P,h+s,A,J)}});var Mo=function(c){this.list=c,this.addListeners()};th(Mo,e,{ms_listener:1,getView:function(){return this.list._view},clear:function(d){var v=this;d&&"d"===v._62O&&v.list.handleDragAndDrop(d,"end"),v._62O=v.cp=v.tx=v.ty=L},handle_mousedown:function(q){this.handle_touchstart(q)},handle_touchstart:function(O){var u=this,b=u.list;if(tj(O),b.setFocus(O))if(u.cp=mh(O),u.tx=b.tx(),u.ty=b.ty(),Eq(O))u.isV(O)||u.isH(O)||!b.handleDragAndDrop||b.handleDragAndDrop(O,"prepare");else{var A=b.getDataAt(O);A&&u._33o(O,A),u.clear(O)}},handleWindowMouseUp:function($){this.clear($)},handleWindowTouchEnd:function(p){this.clear(p)},handle_mouseup:function(V){this.handle_touchend(V)},handle_touchend:function(P){var D=this,J=D.list;if(D.cp&&!D._62O){var S=J.getDataAt(P);S&&(J.isCheckMode()?D._34o(P,S):D._33o(P,S),Br(P)?J.onDataDoubleClicked(S,P):J.onDataClicked(S,P))}D.clear(P)},handleWindowMouseMove:function(B){this.handleWindowTouchMove(B)},handleWindowTouchMove:function(N){var Y=this,O=Y.list,c=Y._62O,C=Y.tx,P=Y.ty,M=Y.cp,A=mh(N),Q=O._29I;"p"===c?O.setTranslate(C+A.x-M.x,P+A.y-M.y):"v"===c?O.ty(P+(M.y-A.y)*O._59I/Q.height):"h"===c?O.tx(C+(M.x-A.x)*O._91I/Q.width):"d"===c&&O.handleDragAndDrop(N,"between")},handle_mousemove:function(l){this.handle_touchmove(l)},handle_touchmove:function(h){if(!pl&&Eq(h)){var U=this,g=U.list,Q=U.isV(h),H=U.isH(h);if(U.cp){if(!U._62O){if(el(mh(h),U.cp)<2)return;Q?U._62O="v":H?U._62O="h":g.handleDragAndDrop?(U._62O="d",g.handleDragAndDrop(h,"begin")):U._62O="p",Qj(U)}}else Q&&g._43o(),H&&g._42o()}},isV:function(a){var U=this.list,M=U._29I;return U._41o()&&M.x+M.width-U.lp(a).x<Bh},isH:function(I){var L=this.list,v=L._29I;return L._40o()&&v.y+v.height-L.lp(I).y<Bh},handle_mousewheel:function(l){this.handleScroll(l,l.wheelDelta/40,l.wheelDelta!==l.wheelDeltaX)},handle_DOMMouseScroll:function(w){this.handleScroll(w,-w.detail,1)},handleScroll:function(i,S,l){var X=this.list;tj(i),X.endEditing&&X.endEditing(),l&&X._41o()?X.translate(0,S*X.getRowHeight()):X._40o()&&X.translate(10*S,0)},handle_keydown:function(s){var L,h=this.list,g=h.sm(),M=h._rows,Z=M.size();if(Ce(s))h.selectAll();else if(_q(s))h.handleDelete&&h.handleDelete(s);else if(Fe(s))h.isCheckMode()&&(L=h.getFocusData(),L&&h.checkData(L));else if(xr(s)||wc(s)){var S=h.isCheckMode();if(L=S?h.getFocusData():g.ld()){var m=h.getRowIndex(L);m>=0&&(xr(s)?0!==m&&(L=M.get(m-1),S?h.setFocusData(L):g.ss(L)):m!==Z-1&&(L=M.get(m+1),S?h.setFocusData(L):g.ss(L)))}else Z>0&&(L=M.get(0),S?h.setFocusData(L):g.ss(L))}},_34o:function(L,f){var c=this.list,n=c.lp(L).x;return n>=0&&n<=c._indent?(c.checkData(f),void 0):(c.setFocusData(f),void 0)},_33o:function(z,s){var x=this.list,r=x.sm(),C=r.ld();if(ee(z))x.isSelected(s)?r.rs(s):r.as(s);else if(Af(z))if(C)for(var q=x.getRowIndex(C),D=x.getRowIndex(s);q!==D;)q+=D>q?1:-1,r.as(x._rows.get(q));else r.ss(s);else(Eq(z)||!r.contains(s))&&r.ss(s)}}),He.TreeView=function(T){var I=this;I._35o(),I._5o(T),new ed(I)},as("TreeView",e,{ms_ac:[An,Uf,oo,"rootVisible",Dd,"rootData",So,iq,Cr,Bm,Hg,Qk,pn,De,vm,hn,ii,Nl,_g,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:L,_indent:Lq,_rowHeight:em,_rowLineVisible:y.treeViewRowLineVisible,_rowLineColor:y.treeViewRowLineColor,_scrollBarColor:Db,_scrollBarSize:wn,_autoHideScrollBar:Ri,_expandIcon:y.treeViewExpandIcon,_collapseIcon:y.treeViewCollapseIcon,_autoMakeVisible:Kh,_selectBackground:y.treeViewSelectBackground,_labelColor:y.treeViewLabelColor,_labelSelectColor:y.treeViewLabelSelectColor,_labelFont:y.treeViewLabelFont,drawRow:function(H,i,$,E,n,M,Y){var h=this;h.drawRowBackground(H,i,$,E,n,M,Y),h._97I(H,i,$,0,n,M,Y)}});var ed=function(U){ml(ed,this,[U])};th(ed,Mo,{toggle:function(k,h,x,f){var D=this.list,m=D.lp(k).x;if(fr(D.getToggleIcon(h))){var N=x*f;if(m>=N&&N+x>=m)return D.toggle(h),!0}return Br(k)?(D.toggle(h),!0):!1},_34o:function(d,Z){var t=this.list,D=t.lp(d).x,V=t._levelMap[Z._id],M=t._indent,G=M*(V+1);return D>=G&&G+M>=D?(t.checkData(Z),void 0):(this.toggle(d,Z,M,V)||t.setFocusData(Z),void 0)},_33o:function(F,H){var l=this,q=l.list;l.toggle(F,H,q._indent,q.getLevel(H))||ed.superClass._33o.call(l,F,H)},handle_keydown:function(V){if(Jl(V)||rk(V)){var P=this.list,q=P._rows,l=P.isCheckMode(),$=P.sm(),G=l?P.getFocusData():$.ld();G?G.hasChildren()&&(Jl(V)?P.collapse(G):P.expand(G)):q.size()>0&&(G=q.get(0),l?P.setFocusData(G):$.ss(G))}else ed.superClass.handle_keydown.call(this,V)}});var nr=He.TableView=function(E){this._98I(),this._5o(E),new hq(this)};as("TableView",e,{ms_ac:[An,Uf,oo,"sortMode",Sb,Do,pn,De,vm,Ge,Ig,"sortColumn",So,iq,Cr,Bm,Hg,Nl,_g],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Cs,_editable:!0,_batchEditable:!1,_rowHeight:em,_rowLineVisible:y.tableViewRowLineVisible,_rowLineColor:y.tableViewRowLineColor,_columnLineVisible:y.tableViewColumnLineVisible,_columnLineColor:y.tableViewColumnLineColor,_scrollBarColor:Db,_scrollBarSize:wn,_autoHideScrollBar:Ri,_autoMakeVisible:Kh,_selectBackground:y.tableViewSelectBackground,_labelColor:y.tableViewLabelColor,_labelSelectColor:y.tableViewLabelSelectColor,_labelFont:y.tableViewLabelFont,getCheckColumn:function(){var J=this;if(!J._31o){var W=J._31o=new Dj;W.setEditable(!0),W.setWidth(40),W.getValue=J.getCheckColumValue,W.drawCell=J.drawCheckColumnCell}return J._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(X){var c=this,T=c._39o,B=c.getCheckColumn();X!==c.isCheckMode()&&(X?T.add(B,0):T.remove(B),c.fp(Dd,!X,X))},getCheckColumValue:function(D,n,H){return H.isSelected(D)},drawCheckColumnCell:function(T,l,a,B,V,c,Y,R,k){zh(T,k.getCheckIcon(l),V+Y/2,c+R/2,l,k)}});var hq=function(H){ml(hq,this,[H])};th(hq,Mo,{_34o:function(p,S){var K=this.list,c=K._31o;if(K.isCellEditable(S,c)){var J=K._3Q(c),D=K.lp(p).x;if(J&&D>=J.startX&&D<J.startX+c.getWidth())return K.checkData(S),void 0}K.setFocusData(S),K._37O(S,p)},_33o:function(F,n){hq.superClass._33o.apply(this,arguments),this.list._37O(n,F)}});var $c=He.TreeTableView=function(G){var d=this,Q=d._4o=new Dj;d._35o(),d._98I(),d._5o(G),Q.setDisplayName("Name"),Q.setEditable(!0),Q.setWidth(180),Q.drawCell=Xo,Q.getValue=yp,d._39o.add(Q),new Jq(d)},Xo=function(j,B,k,v,u,U,V,O,h){h._97I(j,B,k,u,U,V,O)},yp=function(P,q,E){return E.getLabel(P)};as("TreeTableView",e,{ms_ac:[An,Uf,oo,"sortMode",Sb,Do,Qk,Dd,"rootData","rootVisible",So,iq,"sortColumn",hn,ii,Cr,Bm,Hg,Nl,vm,pn,De,Ge,Ig,_g,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Cs,_checkMode:L,_editable:!0,_batchEditable:!1,_indent:Lq,_rowHeight:em,_rowLineVisible:y.treeTableViewRowLineVisible,_rowLineColor:y.treeTableViewRowLineColor,_columnLineVisible:y.treeTableViewColumnLineVisible,_columnLineColor:y.treeTableViewColumnLineColor,_expandIcon:y.treeTableViewExpandIcon,_collapseIcon:y.treeTableViewCollapseIcon,_scrollBarColor:Db,_scrollBarSize:wn,_autoHideScrollBar:Ri,_autoMakeVisible:Kh,_selectBackground:y.treeTableViewSelectBackground,_labelColor:y.treeTableViewLabelColor,_labelSelectColor:y.treeTableViewLabelSelectColor,_labelFont:y.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Jq=function(Q){ml(Jq,this,[Q])};th(Jq,Mo,{_34o:function(R,p){var O=this.list,$=O._4o,W=O._3Q($),i=O.lp(R).x;if(W){var A=O._indent,P=W.startX+A*O.getLevel(p);if(fr(O.getToggleIcon(p))&&i>=P&&P+A>=i)return O.toggle(p),void 0;if(O.isCellEditable(p,$)&&(P+=A,i>=P&&P+A>=i))return O.checkData(p),void 0}O.setFocusData(p),O._37O(p,R)},_33o:function(h,T){var y=this.list,j=y.lp(h).x;if(fr(y.getToggleIcon(T))){var v=y._3Q(y._4o);if(v){var K=y._indent,r=v.startX+K*y.getLevel(T);if(j>=r&&r+K>=j)return y.toggle(T),void 0}}Jq.superClass._33o.apply(this,arguments),y._37O(T,h)}});var Ke=He.TableHeader=function(O){var Q=this,c=Q._view=cs(1),g=Q._39o=O.getColumnModel(),C=Q.iv;Q.tv=Q._tableView=O,Q._60I=new Rb,Q._canvas=ll(c),c.style.background=y.tableHeaderBackground||"",c.style.height=ne+Lo,g.mm(C,Q),g.md(C,Q),g.mh(C,Q),O.mp(function(z){gm[z.property]&&Q.iv()},Q),new Sm(Q),Q.iv()};as("TableHeader",e,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",An,oo,Qk,"moveBackground","insertColor",Ge,Ig,"resizable","movable"],_checkIcon:Vq,_movable:!0,_resizable:!0,_labelColor:y.tableHeaderLabelColor,_labelFont:y.tableHeaderLabelFont,_columnLineColor:y.tableHeaderColumnLineColor,_columnLineVisible:y.tableHeaderColumnLineVisible,_sortDescIcon:y.tableHeaderSortDescIcon,_sortAscIcon:y.tableHeaderSortAscIcon,_moveBackground:y.tableHeaderMoveBackground,_insertColor:y.tableHeaderInsertColor,_indent:Lq,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(L){return L.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(T){return T.getColor()||this._labelColor},getLabelAlign:function(y){return y._align},onPropertyChanged:function(){this.iv()},_5Q:function(h){this._61I=h,this.iv()},getLogicalPoint:function(O){return nn(O,this._canvas,this.tv.tx())},validateImpl:function(){var w=this,v=w._canvas,Z=w.getWidth(),r=w.getHeight(),V=w.tv,q=w._60I,e=w._61I,Q=-V.tx(),L=0;(Z!==v.clientWidth||r!==v.clientHeight)&&bk(v,Z,r),q.clear(),w._39o._roots.each(function(J){if(J.isVisible()){var m=L+J.getWidth();Q+Z>=L&&m>=Q&&q.add({column:J,startX:L}),L=m}});var X=Up(v);if(mk(X,-Q,0,1),X.beginPath(),X.rect(Q,0,Z,r),X.clip(),X.clearRect(Q,0,Z,r),q.each(function(j){var n=j.column,T=j.startX,c=n.getWidth();c>0&&(X.save(),X.beginPath(),X.rect(T,0,c,r),X.clip(),e&&e.column===n||w.drawColumn(X,n,T,0,c,r),w._columnLineVisible&&bf(X,T+c-1,0,1,r,w._columnLineColor),X.restore())}),e){var A=e.column,L=e.startX,H=e.position,u=A.getWidth();X.save(),X.beginPath(),X.rect(L,0,u,r),X.clip(),X.fillStyle=w._moveBackground,X.fill(),w.drawColumn(X,A,L,0,u,r),X.restore(),qb(X,w._insertColor,H,0,r)}X.restore()},_6Q:function(D){var f=this.tv;return f._31o===D&&f.sm().getSelectionMode()===F},drawColumn:function(M,l,g,A,v,L){var G=this,R=G.tv,K=fr(l.getIcon()),j=G.getLabelAlign(l);if(G._6Q(l)){var B=fr(G._checkIcon);zh(M,B,g+v/2,A+L/2,l,G)}else{var $=G.getLabel(l),p=G.getLabelFont(l),r=G.getLabelColor(l),x=Ki(p,$).width,P=K?G._indent:0;j===d?(K&&$g(M,K,Ko,g,A,P,L),Jf(M,$,p,r,g+P,A,v,L,d)):j===S?(K&&$g(M,K,Ko,g+v-x-P,A,P,L),Jf(M,$,p,r,g,A,v,L,S)):(K&&$g(M,K,Ko,g+(v-x-P)/2,A,P,L),Jf(M,$,p,r,g+(v-x+P)/2,A,0,L,d))}if(l.isSortable()&&R.getSortColumn()===l&&(K=fr(l.getSortOrder()===Zf?G._sortAscIcon:G._sortDescIcon))){var X=Cf(K,l)/2+2;zh(M,K,j===S?g+X:g+v-X,A+L/2,l,R)}}});var Sm=function(u){var P=this;P.th=u,P.tv=u._tableView,P.addListeners()};th(Sm,e,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(O){this.getView().style.cursor=O},handle_mousemove:function(o){if(!pl){var x=this;delete x._29o,x.setCursor(a);for(var r=x.th,B=r._60I,f=r.lp(o).x,O=B.size()-1;O>=0;O--){var q=B.get(O),j=q.column,F=q.startX+j.getWidth();if(r.isResizable()&&Z(F-f)<=(E?10:3))return x._29o=q,x.setCursor(Rd),void 0;(j.isSortable()||r.isMovable()||j===x.tv.getCheckColumn())&&f>=q.startX&&F>=f&&j.getWidth()>0&&(x._29o=q,x.setCursor(ak))}}},handle_mousedown:function(e){this.handle_touchstart(e)},handle_touchstart:function(p){var e=this;tj(p),e.tv.endEditing(),e.handle_mousemove(p),e._29o&&(e.x=mh(p).x,e.lx=e.th.lp(p).x,e.w=e._29o.column.getWidth(),Qj(e,p))},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(h){var L=this,S=L.th,E=L.getView().style.cursor,P=L._29o,M=mh(h).x-L.x;if(L.resizing||L.moving||(E===Rd?L.resizing=1:S.isMovable()&&E===ak&&Z(M)>2&&(L.moving=1)),L.resizing)P.column.setWidth(L.w+M);else if(L.moving){var c=L.lx+M;S._60I.each(function(Y){var q=Y.startX,b=q+Y.column.getWidth();if(c>=q&&b>=c){var K={column:P.column,startX:P.startX+M,front:b-c>c-q,insertColumn:Y.column};K.position=K.front?q:b,S._5Q(K)}})}},_16Q:function(h,P){var W=this,a=W.tv,p=W.th,l=p._checkIcon;if(p._6Q(h)){var k=fr(l),e=W.lx,A=h.getWidth(),Y=Cf(k,h);if(e>=P+A/2-Y&&P+A/2+Y>=e){p.setCheckIcon(l===Ci?Vq:Ci);var o=a.sm(),y=a._rows;return l===Ci?o.rs(y):o.ss(y),a.onCheckColumnClicked(h),!0}}return!1},handleWindowMouseUp:function(K){this.handleWindowTouchEnd(K)},handleWindowTouchEnd:function(A){var m=this,T=m.tv,l=m.th,k=m._29o;if(m.moving){var $=l._61I;if($&&$.insertColumn!==$.column){var Y=$.column,Q=T.getColumnModel()._roots,c=Q.remove(Y),W=Q.indexOf($.insertColumn);W>=0&&($.front||W++,W<=Q.size()&&(Q.add(Y,W),T.getColumnModel()._38I(Y,c,W)))}l._5Q(L),delete m.moving}else if(!m.resizing&&k){Y=k.column;var p=l.lp(A).x,X=k.startX,t=!0;if(l.onColumnClicked){var F=l.onColumnClicked(Y,A);F===!1&&(t=!1)}if(t&&p>=X&&p<=X+Y.getWidth()&&!m._16Q(Y,X)){if(Y.isSortable()){var n=T.getSortMode(),I=Y.getSortOrder();n===Cs?T.getSortColumn()===Y?(I===zq&&T.setSortColumn(L),Y.setSortOrder(I===Zf?zq:Zf)):T.setSortColumn(Y):"bistate"===n&&(T.getSortColumn()===Y?Y.setSortOrder(I===Zf?zq:Zf):T.setSortColumn(Y))}T.onColumnClicked(Y,A)}}m._29o=m.resizing=m.x=m.lx=m.w=L}}),He.TablePane=function(P){this.init(new nr(P))},as("TablePane",e,{ms_v:1,_44o:1}),He.TreeTablePane=function(u){this.init(new $c(u))},as("TreeTablePane",e,{ms_v:1,_44o:1}),He.Toolbar=function(z){var o=this,d=o._view=cs(1),t=d.style;t.background=y.toolbarBackground||"",t.height=Tq+Lo,o._canvas=ll(d),o._30o=new Rb,o._90I=new Rb,o.setItems(z||[]),d.handleGroupSelectedChanged=function(Z){if(Z.isSelected()){var C=Z.getGroupId();null!=C&&o._items.forEach(function(K){var b=K.element;b&&b!==Z&&b.setSelected&&b.getGroupId&&b.getGroupId()===C&&b.setSelected(!1)})}},new sc(o)},as("Toolbar",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[ye,An,oo,Uf,_g,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:y.toolbarLabelColor,_labelSelectColor:y.toolbarLabelSelectColor,_labelFont:y.toolbarLabelFont,_selectBackground:y.toolbarSelectBackground,_itemGap:y.toolbarItemGap,_separatorColor:y.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(_){var e=this.getItemInfoAt(_);return e?e.item.toolTip:L},getLabelColor:function(z){return z.selected&&z.type!==Ci&&z.type!==$i?this._labelSelectColor:this._labelColor},onPropertyChanged:function(Z){this.iv(),Z.property===ye&&this._items.forEach(function(D){jj(D)})},redraw:function(){this.iv()},addItem:function(c,Q){var m=this._items;Q==L?m.push(c):m.splice(Q,0,c),this.fp(ye,L,m)},removeItem:function(k){if(k)for(var Q=this._items,Y=0;Y<Q.length;Y++)k===Q[Y]&&(Q.splice(Y,1),this.fp(ye,L,Q))},removeItemById:function(h){if(h!=L)for(var t=this._items,N=0;N<t.length;N++)h===t[N].id&&(t.splice(N,1),this.fp(ye,L,t))},getItemById:function(K){if(K!=L)for(var M=this._items,w=0;w<M.length;w++){var t=M[w];if(K===t.id)return t}},getItemInfos:function(){return this._30o},getItemInfoAt:function(A){var o=this,d=0,R=o._30o,n=o.lp(A),b=n.x,C=n.y;if(C>=0&&C<=o.getHeight())for(;d<R.size();d++){var I=R.get(d);if(I.startX<=b&&b<=I.endX)return I}return L},drawItem:function(C,k,i,h,y){if(k.visible===!1)return 0;var Z=this,L=k.disabled;L&&(C.globalAlpha=Rr);var S=Z.drawItemImpl(C,k,i,h,y),I=Z._itemGap;return L&&(C.globalAlpha=1),this._currentItem!==k||"separator"===k||k.unfocusable||dp(C,Z._separatorColor,i-I/2,0,S+I,h),S},drawItemImpl:function(N,R,b,J,u){var F,q=this,f=q._view,Z=q._itemGap,I=J/2,h=R.type,A=R.label,y=q.getLabelFont(R),z=q.getLabelColor(R),w=R.selected,Y=fr(R.icon),W=Cf(Y,R),K=0,X=R.element,n=W+(A?Ki(y,A).width:0);if("separator"===R)return qb(N,q._separatorColor,b,J/4,I),1;if(X){Y&&zh(N,Y,b+W/2,I),Jf(N,A,y,z,b+W,0,0,J);var e=di(X);u||q._90I.add(e),e.parentNode!==f&&Ah(f,e),X.iv&&X.iv(),X.validate&&X.validate();var x=e.getBoundingClientRect(),S=x.width,_=e.style;return Ye(e),_.left=q.tx()+b+n+Lo,_.top=(J-x.height)/2+Lo,n+S}return h===$i?F=fr(w?yh:kb):h===Ci&&(F=fr(w?Ci:Vq)),F?(K=Cf(F,R),zh(N,F,b+K/2,I),b+=K,n+=K):w&&bf(N,b-Z/2,0,n+Z,J,q.getSelectBackground(R)),Y&&zh(N,Y,b+W/2,I),Jf(N,A,y,z,b+W,0,0,J),n},validateImpl:function(){var a=this,O=a._canvas,S=a.getWidth(),l=a.getHeight(),M=a._30o,V=a._items;bk(O,S,l);var C=Up(O),h=a._itemGap,n=h/2;mk(C,a.tx(),0,1),C.clearRect(0,0,S,l);var Y=a._90I;a._90I=new Rb,M.clear(),V.forEach(function(c){var o=a.drawItem(C,c,n,l);M.add({item:c,startX:n,endX:n+o,width:o}),o&&(n+=o+h)}),Y.each(function(L){a._90I.contains(L)||Wn(L)}),a._64I=q(0,n),C.restore(),a._stickToRight?(a._65O=0,C=Up(O),n=S-a._64I+h,mk(C,0,0,1),C.clearRect(0,0,S,l),M.clear(),V.forEach(function(J){var u=a.drawItem(C,J,n,l,!0);M.add({item:J,startX:n,endX:n+u,width:u}),u&&(n+=u+h)}),C.restore()):a.tx(a.tx())},handleClick:function(q){var z=this,Q=q.type,X=q.action,I=q.groupId,h=q.selected;q.disabled||(I!=L?h||(q.selected=!0,this._items.forEach(function(r){r.groupId===I&&q!==r&&(r.selected=!1)}),X&&q.action(q,z)):Q===Ci||"toggle"===Q?(q.selected=!h,X&&q.action(q,z)):X&&q.action(q,z)),ec(),z.iv()}});var sc=function(A){this.tb=A,this.addListeners()};th(sc,e,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(O){this.handleScroll(O,10*(O.wheelDelta/40))},handle_DOMMouseScroll:function(R){this.handleScroll(R,10*-R.detail)},handleScroll:function(o,G){tj(o);var Z=this.tb;Z.isScrollable()&&!Z._stickToRight&&(Z.tx(Z.tx()+G),Pl())},handle_mousemove:function(k){var s=this;pl?s.info2=s.tb.getItemInfoAt(k):s.setItem(k)},handle_mouseout:function(m){var E=this;m.target===E.getView()?E.tb.setCurrentItem(L):E.handle_mousemove(m)},handle_mousedown:function(N){this.handle_mousemove(N),this.handle_touchstart(N)},handle_touchstart:function(Z){var h=this,E=h.tb,L=Z.target;(L===h.getView()||L===E._canvas)&&(tj(Z),E.setFocus(Z)&&(this.setItem(Z),(E.isScrollable()||h.info&&!h.info.item.disabled)&&(h.x=mh(Z).x,h.tx=E.tx(),Qj(h,Z))))},handleWindowMouseMove:function(O){this.handleWindowTouchMove(O)},handleWindowTouchMove:function(Y){var a=this,Q=a.tb;if(!Q._stickToRight){var X=mh(Y).x-a.x;!a._25o&&Z(X)>2&&Q.isScrollable()&&(a._25o=1),a._25o&&Q.tx(a.tx+X)}},handleWindowMouseUp:function(f){this.handleWindowTouchEnd(f)},handleWindowTouchEnd:function(){var k=this,B=k.tb,U=k.info,E=k.info2;if(!k._25o&&U){var s=U.item;E&&E.item!==s||B.handleClick(s)}k._25o=k.x=k.tx=k.info2=L,k.setItem()},setItem:function(k){var Q=this,p=Q.tb,D=Q.info=k?p.getItemInfoAt(k):L;p.setCurrentItem(D?D.item:L)}}),He.BorderPane=function(){this._view=cs(1),this.iv()},as("BorderPane",e,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(P,J){this._12o("leftView",P),J!=L&&this.setLeftWidth(J)},getRightView:function(){return this._rightView},setRightView:function(J,Y){this._12o("rightView",J),Y!=L&&this.setRightWidth(Y)},getTopView:function(){return this._topView},setTopView:function(x,q){this._12o("topView",x),q!=L&&this.setTopHeight(q)},getBottomView:function(){return this._bottomView},setBottomView:function(R,h){this._12o("bottomView",R),h!=L&&this.setBottomHeight(h)},getCenterView:function(){return this._centerView},setCenterView:function(M){this._12o("centerView",M)},_12o:function(X,U){var Z=this,o="_"+X,z=Z._view,Y=Z[o];Y!==U&&(Y&&(Y.getView?Wn(Y.getView()):Wn(Y)),Z[o]=U,U&&(U.getView?Ah(z,U.getView(),1):Ah(z,U,1)),Z.fp(X,Y,U))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var z=this,y=z._topView,T=z._bottomView,$=z._leftView,e=z._rightView,k=z._centerView,n=z.getWidth(),R=z.getHeight(),p=0,i=0,W=n,Y=R,V=0,u=0,U=0,X=0;y&&(V=z._topHeight==L?vc(y):z._topHeight,i=V),T&&(u=z._bottomHeight==L?vc(T):z._bottomHeight,Y=R-u),$&&(U=z._leftWidth==L?Tf($):z._leftWidth,p=U),e&&(X=z._rightWidth==L?Tf(e):z._rightWidth,W=n-X);var F=q(0,W-p),J=q(0,Y-i);y&&tg(y,0,0,n,V),T&&tg(T,0,Y,n,u),$&&tg($,0,i,U,J),e&&tg(e,W,i,X,J),k&&tg(k,p,i,F,J)}})}}(this,Object);